"use strict";var ff=Object.create;var Un=Object.defineProperty;var mf=Object.getOwnPropertyDescriptor;var gf=Object.getOwnPropertyNames;var _f=Object.getPrototypeOf,pf=Object.prototype.hasOwnProperty;var i=(t,e)=>Un(t,"name",{value:e,configurable:!0});var hf=(t,e)=>()=>(t&&(e=t(t=0)),e);var Z=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),yf=(t,e)=>{for(var n in e)Un(t,n,{get:e[n],enumerable:!0})},Sa=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of gf(e))!pf.call(t,o)&&o!==n&&Un(t,o,{get:()=>e[o],enumerable:!(r=mf(e,o))||r.enumerable});return t};var kt=(t,e,n)=>(n=t!=null?ff(_f(t)):{},Sa(e||!t||!t.__esModule?Un(n,"default",{value:t,enumerable:!0}):n,t)),bf=t=>Sa(Un({},"__esModule",{value:!0}),t);var importMetaUrlShim,y=hf(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var Da=Z((exports,module)=>{y();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{i(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=i((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}i(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(i(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=i((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=i(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=i((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,o){r?n(r):e(o.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=i((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=i(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=i(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=i((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=i(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,o=e;t[o]&&!(o>=r);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var s="";e<o;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var f=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|f:(7&a)<<18|l<<12|f<<6|63&t[e++])<65536)s+=String.fromCharCode(a);else{var g=a-65536;s+=String.fromCharCode(55296|g>>10,56320|1023&g)}}else s+=String.fromCharCode((31&a)<<6|l)}else s+=String.fromCharCode(a)}return s}i(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}i(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var o=n,s=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=s)break;e[n++]=l}else if(l<=2047){if(n+1>=s)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=s)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=s)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-o}i(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}i(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}i(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}i(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}i(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}i(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}i(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}i(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}i(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}i(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}i(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}i(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}i(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}i(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}i(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}i(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}i(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}i(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}i(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(o,s){var a=o.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(s);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}i(e,"t");function n(o){e(o.instance,o.module)}i(n,"r");function r(o){return getBinaryPromise().then(function(s){return WebAssembly.instantiate(s,t)}).then(function(s){return s}).then(o,function(s){err("failed to asynchronously prepare wasm: "+s),abort(s)})}if(i(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(o){return err("Module.instantiateWasm callback failed with error: "+o),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,t).then(n,function(s){return err("wasm streaming compile failed: "+s),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}i(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}i(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:i(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}i(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var $=0,k=1;;){var G=t[e++];if($+=(127&G)*k,k*=128,!(128&G))break}return $}i(r,"_");function o(){var $=r();return UTF8ArrayToString(t,(e+=$)-$,$)}i(o,"n");function s($,k){if($)throw new Error(k)}i(s,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),s(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{s(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),s(t[8]!==0,"need the dylink section to be first"),e=9;var f=r();n=e+f,a=o()}var g={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){g.memorySize=r(),g.memoryAlign=r(),g.tableSize=r(),g.tableAlign=r();for(var b=r(),T=0;T<b;++T){var x=o();g.neededDynlibs.push(x)}}else for(s(a!=="dylink.0");e<n;){var L=t[e++],B=r();if(L===1)g.memorySize=r(),g.memoryAlign=r(),g.tableSize=r(),g.tableAlign=r();else if(L===2)for(b=r(),T=0;T<b;++T)x=o(),g.neededDynlibs.push(x);else if(L===3)for(var D=r();D--;){var j=o();256&r()&&g.tlsExports.add(j)}else if(L===4)for(D=r();D--;)o(),j=o(),(3&r())==1&&g.weakImports.add(j);else e+=B}return g}i(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}i(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}i(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}i(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}i(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}i(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}i(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}i(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}i(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}i(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}i(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}i(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}i(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),o={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var s=0;s<r.length;++s)e.push(o[r[s]]);n=="v"?e.push(0):e.push(1,o[n])}i(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(o,{e:{f:t}}).exports.f}i(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}i(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}i(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}i(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}i(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}i(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var o in t){var s=t[o];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=e),r[o]=s}return updateGOT(r,n),r}i(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}i(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}i(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}i(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:i(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(i(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(i(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return i(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}i(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function o(l){if(e.fs&&e.fs.findObject(l)){var f=e.fs.readFile(l,{encoding:"binary"});return f instanceof Uint8Array||(f=new Uint8Array(f)),e.loadAsync?Promise.resolve(f):f}if(l=locateFile(l),e.loadAsync)return new Promise(function(g,b){readAsync(l,T=>g(new Uint8Array(T)),b)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}i(o,"n");function s(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?o(t).then(function(f){return loadWebAssemblyModule(f,e,n)}):loadWebAssemblyModule(o(t),e,n)}i(s,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return i(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?s().then(function(l){return a(l),!0}):(a(s()),!0)}i(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}i(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}i(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}i(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}i(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}i(_abort,"_abort");function _emscripten_date_now(){return Date.now()}i(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}i(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}i(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}i(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var o=e*(1+.2/r);if(o=Math.min(o,t+100663296),emscripten_realloc_buffer(Math.min(n,(s=Math.max(t,o))+((a=65536)-s%a)%a)))return!0}var s,a;return!1}i(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:i(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:i(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var o=r.atime.getTime(),s=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=s%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:i(function(t,e,n,r,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var s=HEAPU8.slice(t,t+n);FS.msync(e,s,o,n,r)},"doMsync"),varargs:void 0,get:i(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:i(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:i(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}i(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}i(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}i(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}i(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,o){try{var s=convertI32PairToI53Checked(e,n);if(isNaN(s))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,s,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],a.getdents&&s===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}i(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var o=0,s=0;s<n;s++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var f=FS.write(t,HEAP8,a,l,r);if(f<0)return-1;o+=f,r!==void 0&&(r+=f)}return o}i(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var o=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=o,0}catch(s){if(typeof FS>"u"||!(s instanceof FS.ErrnoError))throw s;return s.errno}}i(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}i(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,o){var s=currentParseCallback(e,{row:n,column:r});typeof s=="string"?(setValue(o,s.length,"i32"),stringToUTF16(s,t,10240)):setValue(o,0,"i32")}i(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}i(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}i(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,o=(n-=2)<2*t.length?n/2:t.length,s=0;s<o;++s){var a=t.charCodeAt(s);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}i(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}i(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),o=r>>2;t.forEach(a=>{HEAP32[o++]=allocateUTF8OnStack(a)}),HEAP32[o]=0;try{var s=e(n,r);return exitJS(s,!0),s}catch(a){return handleException(a)}}}i(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=i(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}i(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(i(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{i(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=i((f,g,b)=>e.slice(f,b),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,s=0;if(r&&r.includedRanges){o=r.includedRanges.length,s=C._calloc(o,SIZE_OF_RANGE);let f=s;for(let g=0;g<o;g++)marshalRange(f,r.includedRanges[g]),f+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,s,o);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{i(this,"Tree")}constructor(e,n,r,o){assertInternal(e),this[0]=n,this.language=r,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(n);if(n>0){let s=r;for(let a=0;a<n;a++)o[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(r)}return o}}class Node{static{i(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let o=[],s=this.tree.language.types;for(let b=0,T=s.length;b<T;b++)e.includes(s[b])&&o.push(b);let a=C._malloc(SIZE_OF_INT*o.length);for(let b=0,T=o.length;b<T;b++)setValue(a+b*SIZE_OF_INT,o[b],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,o.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),f=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=new Array(l);if(l>0){let b=f;for(let T=0;T<l;T++)g[T]=unmarshalNode(this.tree,b),b+=SIZE_OF_NODE}return C._free(f),C._free(a),g}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{i(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{i(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,o=this.types.length;r<o;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,o=this.fields.length;r<o;r++){let s=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=s!==0?UTF8ToString(s):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),o=C._malloc(r+1);stringToUTF8(e,o,r+1);let s=C._ts_language_symbol_for_name(this[0],o,r,n);return C._free(o),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let o=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let D=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),j=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,$=e.substr(j,100).split(`
`)[0],k,G=$.match(QUERY_WORD_REGEX)[0];switch(D){case 2:k=new RangeError(`Bad node name '${G}'`);break;case 3:k=new RangeError(`Bad field name '${G}'`);break;case 4:k=new RangeError(`Bad capture name @${G}`);break;case 5:k=new TypeError(`Bad pattern structure at offset ${j}: '${$}'...`),G="";break;default:k=new SyntaxError(`Bad syntax at offset ${j}: '${$}'...`),G=""}throw k.index=j,k.length=G.length,C._free(r),k}let s=C._ts_query_string_count(o),a=C._ts_query_capture_count(o),l=C._ts_query_pattern_count(o),f=new Array(a),g=new Array(s);for(let D=0;D<a;D++){let j=C._ts_query_capture_name_for_id(o,D,TRANSFER_BUFFER),$=getValue(TRANSFER_BUFFER,"i32");f[D]=UTF8ToString(j,$)}for(let D=0;D<s;D++){let j=C._ts_query_string_value_for_id(o,D,TRANSFER_BUFFER),$=getValue(TRANSFER_BUFFER,"i32");g[D]=UTF8ToString(j,$)}let b=new Array(l),T=new Array(l),x=new Array(l),L=new Array(l),B=new Array(l);for(let D=0;D<l;D++){let j=C._ts_query_predicates_for_pattern(o,D,TRANSFER_BUFFER),$=getValue(TRANSFER_BUFFER,"i32");L[D]=[],B[D]=[];let k=[],G=j;for(let K=0;K<$;K++){let Y=getValue(G,"i32");G+=SIZE_OF_INT;let fe=getValue(G,"i32");if(G+=SIZE_OF_INT,Y===PREDICATE_STEP_TYPE_CAPTURE)k.push({type:"capture",name:f[fe]});else if(Y===PREDICATE_STEP_TYPE_STRING)k.push({type:"string",value:g[fe]});else if(k.length>0){if(k[0].type!=="string")throw new Error("Predicates must begin with a literal value");let oe=k[0].value,ge=!0;switch(oe){case"not-eq?":ge=!1;case"eq?":if(k.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(k.length-1));if(k[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${k[1].value}"`);if(k[2].type==="capture"){let E=k[1].name,q=k[2].name;B[D].push(function(W){let S,N;for(let P of W)P.name===E&&(S=P.node),P.name===q&&(N=P.node);return S===void 0||N===void 0||S.text===N.text===ge})}else{let E=k[1].name,q=k[2].value;B[D].push(function(W){for(let S of W)if(S.name===E)return S.node.text===q===ge;return!0})}break;case"not-match?":ge=!1;case"match?":if(k.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${k.length-1}.`);if(k[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${k[1].value}".`);if(k[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${k[2].value}.`);let Ae=k[1].name,Oe=new RegExp(k[2].value);B[D].push(function(E){for(let q of E)if(q.name===Ae)return Oe.test(q.node.text)===ge;return!0});break;case"set!":if(k.length<2||k.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${k.length-1}.`);if(k.some(E=>E.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');b[D]||(b[D]={}),b[D][k[1].value]=k[2]?k[2].value:null;break;case"is?":case"is-not?":if(k.length<2||k.length>3)throw new Error(`Wrong number of arguments to \`#${oe}\` predicate. Expected 1 or 2. Got ${k.length-1}.`);if(k.some(E=>E.type!=="string"))throw new Error(`Arguments to \`#${oe}\` predicate must be a strings.".`);let A=oe==="is?"?T:x;A[D]||(A[D]={}),A[D][k[1].value]=k[2]?k[2].value:null;break;default:L[D].push({operator:oe,operands:k.slice(1)})}k.length=0}}Object.freeze(b[D]),Object.freeze(T[D]),Object.freeze(x[D])}return C._free(r),new Query(INTERNAL,o,f,B,L,Object.freeze(b),Object.freeze(T),Object.freeze(x))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let o=e;if(typeof process<"u"&&process.versions&&process.versions.node){let s=require("fs");n=Promise.resolve(s.readFileSync(o))}else n=fetch(o).then(s=>s.arrayBuffer().then(a=>{if(s.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${s.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(o=>r(o,{loadAsync:!0})).then(o=>{let s=Object.keys(o),a=s.find(f=>LANGUAGE_FUNCTION_REGEX.test(f)&&!f.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(s,null,2)}`);let l=o[a]();return new Language(INTERNAL,l)})}}class Query{static{i(this,"Query")}constructor(e,n,r,o,s,a,l,f){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=o,this.predicates=s,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=f,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let s=o.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),f=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),g=new Array(a);this.exceededMatchLimit=!!f;let b=0,T=l;for(let x=0;x<a;x++){let L=getValue(T,"i32");T+=SIZE_OF_INT;let B=getValue(T,"i32");T+=SIZE_OF_INT;let D=new Array(B);if(T=unmarshalCaptures(this,e.tree,T,D),this.textPredicates[L].every(j=>j(D))){g[b++]={pattern:L,captures:D};let j=this.setProperties[L];j&&(g[x].setProperties=j);let $=this.assertedProperties[L];$&&(g[x].assertedProperties=$);let k=this.refutedProperties[L];k&&(g[x].refutedProperties=k)}}return g.length=b,C._free(l),g}captures(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let s=o.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),f=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),g=[];this.exceededMatchLimit=!!f;let b=[],T=l;for(let x=0;x<a;x++){let L=getValue(T,"i32");T+=SIZE_OF_INT;let B=getValue(T,"i32");T+=SIZE_OF_INT;let D=getValue(T,"i32");if(T+=SIZE_OF_INT,b.length=B,T=unmarshalCaptures(this,e.tree,T,b),this.textPredicates[L].every(j=>j(b))){let j=b[D],$=this.setProperties[L];$&&(j.setProperties=$);let k=this.assertedProperties[L];k&&(j.assertedProperties=k);let G=this.refutedProperties[L];G&&(j.refutedProperties=G),g.push(j)}}return C._free(l),g}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,o=t.textCallback(e,null,n);for(e+=o.length;e<n;){let s=t.textCallback(e,null,n);if(!(s&&s.length>0))break;e+=s.length,o+=s}return e>n&&(o=o.slice(0,r)),o}i(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let o=0,s=r.length;o<s;o++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[o]={name:t.captureNames[a],node:l}}return n}i(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}i(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}i(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}i(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:o,column:s},l[0]=a,l}i(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}i(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}i(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}i(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}i(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}i(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}i(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}i(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Qa=Z(ht=>{"use strict";y();Object.defineProperty(ht,"__esModule",{value:!0});ht.bytePairEncode=ht.BinaryMap=ht.binaryMapKey=void 0;var im=i((t,e,n)=>{let r=n-e,o=16777215>>>Math.max(0,(3-r)*8),s=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return s+16777216*l},"binaryMapKey");ht.binaryMapKey=im;var go=class t{static{i(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let o=r<6+n,s=(0,ht.binaryMapKey)(e,n,r);return o?this.final.get(s):this.nested.get(s)?.get(e,6+n,r)}set(e,n){let r=(0,ht.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let s=this.nested.get(r);if(s instanceof t)s.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};ht.BinaryMap=go;var pt=new Int32Array(128),$e=new Int32Array(128);function om(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,o=-1;for(;pt.length<n*2;)$e=new Int32Array($e.length*2),pt=new Int32Array(pt.length*2);for(let f=0;f<n-1;f++){let g=e.get(t,f,f+2)??2147483647;g<r&&(r=g,o=f),$e[f]=f,pt[f]=g}$e[n-1]=n-1,pt[n-1]=2147483647,$e[n]=n,pt[n]=2147483647;let s=n+1;function a(f,g=0){if(f+g+2<s){let b=e.get(t,$e[f],$e[f+g+2]);if(b!==void 0)return b}return 2147483647}for(i(a,"getRank");r!==2147483647;){pt[$e[o]]=a(o,1),o>0&&(pt[$e[o-1]]=a(o-1,1));for(let f=o+1;f<s-1;f++)$e[f]=$e[f+1];s--,o=-1,r=2147483647;for(let f=0;f<s-1;f++){let g=pt[$e[f]];pt[$e[f]]<r&&(r=g,o=f)}}let l=[];for(let f=0;f<s-1;f++)l.push(e.get(t,$e[f],$e[f+1]));return l}i(om,"bytePairEncode");ht.bytePairEncode=om});var Ja=Z(zr=>{"use strict";y();Object.defineProperty(zr,"__esModule",{value:!0});zr.makeTextEncoder=void 0;var _o=class{static{i(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},po=class{static{i(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},sm=i(()=>typeof Buffer<"u"?new po:new _o,"makeTextEncoder");zr.makeTextEncoder=sm});var Xa=Z(Hr=>{"use strict";y();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.LRUCache=void 0;var ho=class{static{i(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let o=new yo(e,n);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};Hr.LRUCache=ho;var yo=class{static{i(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var vo=Z(Gr=>{"use strict";y();Object.defineProperty(Gr,"__esModule",{value:!0});Gr.TikTokenizer=void 0;var Vr=Qa(),am=Ja(),um=Xa();function lm(t){let e=new Map;try{let o=require("fs").readFileSync(t,"utf-8");return n(o),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let o of r.split(/[\r\n]+/)){if(o.trim()==="")continue;let s=o.split(" ");if(s.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(s[0],"base64")),l=parseInt(s[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${s[1]} to integer`)}}i(n,"processBpeRanks")}i(lm,"loadTikTokenBpe");function cm(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i(cm,"escapeRegExp");var bo=class{static{i(this,"TikTokenizer")}constructor(e,n,r,o=8192){this.textEncoder=(0,am.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new um.LRUCache(o);let s=typeof e=="string"?lm(e):e;this.init(s,n,r)}init(e,n,r){this.encoder=new Vr.BinaryMap;for(let[o,s]of e)this.encoder.set(o,s);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(o=>cm(o)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[o,s]of e)this.decoder.set(s,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,s]of n)this.specialTokensDecoder.set(s,o)}findNextSpecialToken(e,n,r){let o=n,s=null;if(r&&this.specialTokensRegex)for(;s=e.slice(o).match(this.specialTokensRegex),!(!s||r&&r.includes(s[0]));)o+=s.index+1;let a=s?o+s.index:e.length;return[s,a]}encode(e,n){let r=[],o=0;for(;;){let s,a;if([s,a]=this.findNextSpecialToken(e,o,n),a>o&&this.encodeByIndex(e,r,o,a),s){if(o=o+this.encodeSpecialToken(r,s),o>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,o){let s,a=e.substring(r,o);for(this.regex.lastIndex=0;s=this.regex.exec(a);){let l=this.cache.get(s[0]);if(l)for(let f of l)n.push(f);else{let f=this.textEncoder.encode(s[0]),g=this.encoder.get(f,0,this.textEncoder.length);if(g!==void 0)n.push(g),this.cache.set(s[0],[g]);else{let b=(0,Vr.bytePairEncode)(f,this.encoder,this.textEncoder.length);for(let T of b)n.push(T);this.cache.set(s[0],b)}}}}encodeTrimSuffixByIndex(e,n,r,o,s,a,l){let f,g=e.substring(r,o);for(this.regex.lastIndex=0;f=this.regex.exec(g);){let b=f[0],T=this.cache.get(b);if(T)if(a+T.length<=s)a+=T.length,l+=b.length,n.push(...T);else{let x=s-a;a+=x,l+=b.length,n.push(...T.slice(0,x));break}else{let x=this.textEncoder.encode(b),L=this.encoder.get(x,0,x.length);if(L!==void 0)if(this.cache.set(b,[L]),a+1<=s)a++,l+=b.length,n.push(L);else break;else{let B=(0,Vr.bytePairEncode)(x,this.encoder,this.textEncoder.length);if(this.cache.set(b,B),a+B.length<=s){a+=B.length,l+=b.length;for(let D of B)n.push(D)}else{let D=s-a;a+=D,l+=b.length;for(let j=0;j<D;j++)n.push(B[j]);break}}}if(a>=s)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let o=[],s=0,a=0,l=0;for(;;){let g,b;if([g,b]=this.findNextSpecialToken(e,s,r),b>s){let{tokenCount:T,encodeLength:x}=this.encodeTrimSuffixByIndex(e,o,s,b,n,a,l);if(a=T,l=x,a>=n)break}if(g!==null){if(a++,a<=n&&(s=s+this.encodeSpecialToken(o,g),l+=g[0].length,s>=e.length)||a>=n)break}else break}let f=l===e.length?e:e.slice(0,l);return{tokenIds:o,text:f}}encodeTrimPrefix(e,n,r){let o=[],s=0,a=0,l=0,f=new Map;for(f.set(a,l);;){let x,L;if([x,L]=this.findNextSpecialToken(e,s,r),L>s){let B,D=e.substring(s,L);for(this.regex.lastIndex=0;B=this.regex.exec(D);){let j=B[0],$=this.cache.get(j);if($)a+=$.length,l+=j.length,o.push(...$),f.set(a,l);else{let k=this.textEncoder.encode(j),G=this.encoder.get(k);if(G!==void 0)this.cache.set(j,[G]),a++,l+=j.length,o.push(G),f.set(a,l);else{let K=(0,Vr.bytePairEncode)(k,this.encoder,this.textEncoder.length);this.cache.set(j,K),a+=K.length,l+=j.length;for(let Y of K)o.push(Y);f.set(a,l)}}}}if(x!==null){if(s=s+this.encodeSpecialToken(o,x),a++,l+=x[0].length,f.set(a,l),s>=e.length)break}else break}if(a<=n)return{tokenIds:o,text:e};let g=a-n,b=0,T=0;for(let[x,L]of f)if(x>=g){b=x,T=L;break}if(b>n){let x=this.encode(e,r),L=x.slice(x.length-n);return{tokenIds:L,text:this.decode(L)}}return{tokenIds:o.slice(b),text:e.slice(T)}}decode(e){let n=[];for(let r of e){let o=[],s=this.decoder?.get(r);if(s!==void 0)o=Array.from(s);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);o=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...o)}return this.textDecoder.decode(new Uint8Array(n))}};Gr.TikTokenizer=bo});var au=Z(Me=>{"use strict";y();Object.defineProperty(Me,"__esModule",{value:!0});Me.createTokenizer=Me.createByEncoderName=Me.createByModelName=Me.getRegexByModel=Me.getRegexByEncoder=Me.getSpecialTokensByModel=Me.getSpecialTokensByEncoder=Me.MODEL_TO_ENCODING=void 0;var dm=vo(),fm=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Me.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Zr="<|endoftext|>",Ka="<|fim_prefix|>",Ya="<|fim_middle|>",eu="<|fim_suffix|>",tu="<|endofprompt|>",zn="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",nu="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",mm=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],ru=mm.join("|");function wo(t){let e="";if(Me.MODEL_TO_ENCODING.has(t))e=Me.MODEL_TO_ENCODING.get(t);else for(let[n,r]of fm)if(t.startsWith(n)){e=r;break}return e}i(wo,"getEncoderFromModelName");async function gm(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let o=await r.text();n.writeFileSync(e,o)}i(gm,"fetchAndSaveFile");function Eo(t){let e=new Map([[Zr,50256]]);switch(t){case"o200k_base":e=new Map([[Zr,199999],[tu,200018]]);break;case"cl100k_base":e=new Map([[Zr,100257],[Ka,100258],[Ya,100259],[eu,100260],[tu,100276]]);break;case"p50k_edit":e=new Map([[Zr,50256],[Ka,50281],[Ya,50282],[eu,50283]]);break;default:break}return e}i(Eo,"getSpecialTokensByEncoder");Me.getSpecialTokensByEncoder=Eo;function _m(t){let e=wo(t);return Eo(e)}i(_m,"getSpecialTokensByModel");Me.getSpecialTokensByModel=_m;function iu(t){switch(t){case"o200k_base":return ru;case"cl100k_base":return nu;default:break}return zn}i(iu,"getRegexByEncoder");Me.getRegexByEncoder=iu;function pm(t){let e=wo(t);return iu(e)}i(pm,"getRegexByModel");Me.getRegexByModel=pm;async function hm(t,e=null){return ou(wo(t),e)}i(hm,"createByModelName");Me.createByModelName=hm;async function ou(t,e=null){let n,r,o=Eo(t);switch(t){case"o200k_base":n=ru,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=nu,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=zn,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=zn,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=zn,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=zn,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let s=require("fs"),a=require("path"),l=a.basename(r),f=a.resolve(__dirname,"..","model");s.existsSync(f)||s.mkdirSync(f,{recursive:!0});let g=a.resolve(f,l);return s.existsSync(g)||(console.log(`Downloading file from ${r}`),await gm(r,g),console.log(`Saved file to ${g}`)),su(g,o,n)}i(ou,"createByEncoderName");Me.createByEncoderName=ou;function su(t,e,n,r=8192){return new dm.TikTokenizer(t,e,n,r)}i(su,"createTokenizer");Me.createTokenizer=su});var uu=Z(ke=>{"use strict";y();Object.defineProperty(ke,"__esModule",{value:!0});ke.createTokenizer=ke.createByEncoderName=ke.createByModelName=ke.getSpecialTokensByModel=ke.getSpecialTokensByEncoder=ke.getRegexByModel=ke.getRegexByEncoder=ke.MODEL_TO_ENCODING=ke.TikTokenizer=void 0;var ym=vo();Object.defineProperty(ke,"TikTokenizer",{enumerable:!0,get:i(function(){return ym.TikTokenizer},"get")});var Ct=au();Object.defineProperty(ke,"MODEL_TO_ENCODING",{enumerable:!0,get:i(function(){return Ct.MODEL_TO_ENCODING},"get")});Object.defineProperty(ke,"getRegexByEncoder",{enumerable:!0,get:i(function(){return Ct.getRegexByEncoder},"get")});Object.defineProperty(ke,"getRegexByModel",{enumerable:!0,get:i(function(){return Ct.getRegexByModel},"get")});Object.defineProperty(ke,"getSpecialTokensByEncoder",{enumerable:!0,get:i(function(){return Ct.getSpecialTokensByEncoder},"get")});Object.defineProperty(ke,"getSpecialTokensByModel",{enumerable:!0,get:i(function(){return Ct.getSpecialTokensByModel},"get")});Object.defineProperty(ke,"createByModelName",{enumerable:!0,get:i(function(){return Ct.createByModelName},"get")});Object.defineProperty(ke,"createByEncoderName",{enumerable:!0,get:i(function(){return Ct.createByEncoderName},"get")});Object.defineProperty(ke,"createTokenizer",{enumerable:!0,get:i(function(){return Ct.createTokenizer},"get")})});var Tu=Z((Eb,Eu)=>{y();var jo=require("fs"),ri=require("path"),Kn=ri.join,Dm=ri.dirname,vu=jo.accessSync&&function(t){try{jo.accessSync(t)}catch{return!1}return!0}||jo.existsSync||ri.existsSync,wu={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function Am(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(wu).map(function(f){f in t||(t[f]=wu[f])}),t.module_root||(t.module_root=Om(__filename)),ri.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,o=t.try.length,s,a,l;r<o;r++){s=Kn.apply(null,t.try[r].map(function(f){return t[f]||f})),n.push(s);try{return a=t.path?e.resolve(s):e(s),t.path||(a.path=s),a}catch(f){if(f.code!=="MODULE_NOT_FOUND"&&f.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(f.message))throw f}}throw l=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(f){return t.arrow+f}).join(`
`)),l.tries=n,l}i(Am,"bindings");Eu.exports=Am;function Om(t){for(var e=Dm(t),n;;){if(e==="."&&(e=process.cwd()),vu(Kn(e,"dist")))return Kn(e,"dist");if(vu(Kn(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=Kn(e,"..")}}i(Om,"getRoot")});var Ru=Z((Rb,Su)=>{y();Su.exports=Tu()("node_sqlite3.node")});var Nu=Z(Iu=>{y();var Fm=require("util");function qm(t,e,n){let r=t[e];t[e]=function(){let o=new Error,s=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return Fm.inspect(l,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=i(function(){let f=arguments[0];return f&&f.stack&&!f.__augmented&&(f.stack=xu(f).join(`
`),f.stack+=`
--> in `+s,f.stack+=`
`+xu(o).slice(1).join(`
`),f.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}i(qm,"extendTrace");Iu.extendTrace=qm;function xu(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}i(xu,"filter")});var Cu=Z((ku,Pu)=>{y();var jm=require("path"),it=Ru(),_n=require("events").EventEmitter;Pu.exports=ku=it;function pn(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let s=r[r.length-1];n=i(function(a){a&&s(a)},"errBack")}let o=new ii(this,e,n);return t.call(this,o,r)}}i(pn,"normalizeMethod");function Wo(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}i(Wo,"inherits");it.cached={Database:i(function(t,e,n){if(t===""||t===":memory:")return new ze(t,e,n);let r;if(t=jm.resolve(t),!it.cached.objects[t])r=it.cached.objects[t]=new ze(t,e,n);else{r=it.cached.objects[t];let s=typeof e=="number"?n:e;if(typeof s=="function"){let a=function(){s.call(r,null)};var o=a;i(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var ze=it.Database,ii=it.Statement,Uo=it.Backup;Wo(ze,_n);Wo(ii,_n);Wo(Uo,_n);ze.prototype.prepare=pn(function(t,e){return e.length?t.bind.apply(t,e):t});ze.prototype.run=pn(function(t,e){return t.run.apply(t,e).finalize(),this});ze.prototype.get=pn(function(t,e){return t.get.apply(t,e).finalize(),this});ze.prototype.all=pn(function(t,e){return t.all.apply(t,e).finalize(),this});ze.prototype.each=pn(function(t,e){return t.each.apply(t,e).finalize(),this});ze.prototype.map=pn(function(t,e){return t.map.apply(t,e).finalize(),this});ze.prototype.backup=function(){let t;return arguments.length<=2?t=new Uo(this,arguments[0],"main","main",!0,arguments[1]):t=new Uo(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[it.BUSY,it.LOCKED],t};ii.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let o={};if(r.length){let s=Object.keys(r[0]),a=s[0];if(s.length>2)for(let l=0;l<r.length;l++)o[r[l][a]]=r[l];else{let l=s[1];for(let f=0;f<r.length;f++)o[r[f][a]]=r[f][l]}}e(n,o)}),this.all.apply(this,t)};var Mu=!1,Bo=["trace","profile","change"];ze.prototype.addListener=ze.prototype.on=function(t){let e=_n.prototype.addListener.apply(this,arguments);return Bo.indexOf(t)>=0&&this.configure(t,!0),e};ze.prototype.removeListener=function(t){let e=_n.prototype.removeListener.apply(this,arguments);return Bo.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};ze.prototype.removeAllListeners=function(t){let e=_n.prototype.removeAllListeners.apply(this,arguments);return Bo.indexOf(t)>=0&&this.configure(t,!1),e};it.verbose=function(){if(!Mu){let t=Nu();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(ze.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(ii.prototype,e)}),Mu=!0}return it}});var yn=Z(je=>{"use strict";y();Object.defineProperty(je,"__esModule",{value:!0});je.stringArray=je.array=je.func=je.error=je.number=je.string=je.boolean=void 0;function Wm(t){return t===!0||t===!1}i(Wm,"boolean");je.boolean=Wm;function Lu(t){return typeof t=="string"||t instanceof String}i(Lu,"string");je.string=Lu;function Bm(t){return typeof t=="number"||t instanceof Number}i(Bm,"number");je.number=Bm;function $m(t){return t instanceof Error}i($m,"error");je.error=$m;function zm(t){return typeof t=="function"}i(zm,"func");je.func=zm;function Du(t){return Array.isArray(t)}i(Du,"array");je.array=Du;function Hm(t){return Du(t)&&t.every(e=>Lu(e))}i(Hm,"stringArray");je.stringArray=Hm});var ps=Z(Q=>{"use strict";y();Object.defineProperty(Q,"__esModule",{value:!0});Q.Message=Q.NotificationType9=Q.NotificationType8=Q.NotificationType7=Q.NotificationType6=Q.NotificationType5=Q.NotificationType4=Q.NotificationType3=Q.NotificationType2=Q.NotificationType1=Q.NotificationType0=Q.NotificationType=Q.RequestType9=Q.RequestType8=Q.RequestType7=Q.RequestType6=Q.RequestType5=Q.RequestType4=Q.RequestType3=Q.RequestType2=Q.RequestType1=Q.RequestType=Q.RequestType0=Q.AbstractMessageSignature=Q.ParameterStructures=Q.ResponseError=Q.ErrorCodes=void 0;var Yt=yn(),Ho;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Ho||(Q.ErrorCodes=Ho={}));var Vo=class t extends Error{static{i(this,"ResponseError")}constructor(e,n,r){super(n),this.code=Yt.number(e)?e:Ho.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Q.ResponseError=Vo;var Ge=class t{static{i(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Q.ParameterStructures=Ge;Ge.auto=new Ge("auto");Ge.byPosition=new Ge("byPosition");Ge.byName=new Ge("byName");var ve=class{static{i(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ge.auto}};Q.AbstractMessageSignature=ve;var Go=class extends ve{static{i(this,"RequestType0")}constructor(e){super(e,0)}};Q.RequestType0=Go;var Zo=class extends ve{static{i(this,"RequestType")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.RequestType=Zo;var Qo=class extends ve{static{i(this,"RequestType1")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.RequestType1=Qo;var Jo=class extends ve{static{i(this,"RequestType2")}constructor(e){super(e,2)}};Q.RequestType2=Jo;var Xo=class extends ve{static{i(this,"RequestType3")}constructor(e){super(e,3)}};Q.RequestType3=Xo;var Ko=class extends ve{static{i(this,"RequestType4")}constructor(e){super(e,4)}};Q.RequestType4=Ko;var Yo=class extends ve{static{i(this,"RequestType5")}constructor(e){super(e,5)}};Q.RequestType5=Yo;var es=class extends ve{static{i(this,"RequestType6")}constructor(e){super(e,6)}};Q.RequestType6=es;var ts=class extends ve{static{i(this,"RequestType7")}constructor(e){super(e,7)}};Q.RequestType7=ts;var ns=class extends ve{static{i(this,"RequestType8")}constructor(e){super(e,8)}};Q.RequestType8=ns;var rs=class extends ve{static{i(this,"RequestType9")}constructor(e){super(e,9)}};Q.RequestType9=rs;var is=class extends ve{static{i(this,"NotificationType")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.NotificationType=is;var os=class extends ve{static{i(this,"NotificationType0")}constructor(e){super(e,0)}};Q.NotificationType0=os;var ss=class extends ve{static{i(this,"NotificationType1")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.NotificationType1=ss;var as=class extends ve{static{i(this,"NotificationType2")}constructor(e){super(e,2)}};Q.NotificationType2=as;var us=class extends ve{static{i(this,"NotificationType3")}constructor(e){super(e,3)}};Q.NotificationType3=us;var ls=class extends ve{static{i(this,"NotificationType4")}constructor(e){super(e,4)}};Q.NotificationType4=ls;var cs=class extends ve{static{i(this,"NotificationType5")}constructor(e){super(e,5)}};Q.NotificationType5=cs;var ds=class extends ve{static{i(this,"NotificationType6")}constructor(e){super(e,6)}};Q.NotificationType6=ds;var ms=class extends ve{static{i(this,"NotificationType7")}constructor(e){super(e,7)}};Q.NotificationType7=ms;var gs=class extends ve{static{i(this,"NotificationType8")}constructor(e){super(e,8)}};Q.NotificationType8=gs;var _s=class extends ve{static{i(this,"NotificationType9")}constructor(e){super(e,9)}};Q.NotificationType9=_s;var Au;(function(t){function e(o){let s=o;return s&&Yt.string(s.method)&&(Yt.string(s.id)||Yt.number(s.id))}i(e,"isRequest"),t.isRequest=e;function n(o){let s=o;return s&&Yt.string(s.method)&&o.id===void 0}i(n,"isNotification"),t.isNotification=n;function r(o){let s=o;return s&&(s.result!==void 0||!!s.error)&&(Yt.string(s.id)||Yt.number(s.id)||s.id===null)}i(r,"isResponse"),t.isResponse=r})(Au||(Q.Message=Au={}))});var ys=Z(Dt=>{"use strict";y();var Ou;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.LRUCache=Dt.LinkedMap=Dt.Touch=void 0;var Ue;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ue||(Dt.Touch=Ue={}));var li=class{static{i(this,"LinkedMap")}constructor(){this[Ou]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Ue.None){let r=this._map.get(e);if(r)return n!==Ue.None&&this.touch(r,n),r.value}set(e,n,r=Ue.None){let o=this._map.get(e);if(o)o.value=n,r!==Ue.None&&this.touch(o,r);else{switch(o={key:e,value:n,next:void 0,previous:void 0},r){case Ue.None:this.addItemLast(o);break;case Ue.First:this.addItemFirst(o);break;case Ue.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,o=this._head;for(;o;){if(n?e.bind(n)(o.value,o.key,this):e(o.value,o.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}[(Ou=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ue.First&&n!==Ue.Last)){if(n===Ue.First){if(e===this._head)return;let r=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(r.previous=o,o.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ue.Last){if(e===this._tail)return;let r=e.next,o=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=o,o.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Dt.LinkedMap=li;var hs=class extends li{static{i(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ue.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ue.None)}set(e,n){return super.set(e,n,Ue.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Dt.LRUCache=hs});var qu=Z(ci=>{"use strict";y();Object.defineProperty(ci,"__esModule",{value:!0});ci.Disposable=void 0;var Fu;(function(t){function e(n){return{dispose:n}}i(e,"create"),t.create=e})(Fu||(ci.Disposable=Fu={}))});var At=Z(ws=>{"use strict";y();Object.defineProperty(ws,"__esModule",{value:!0});var bs;function vs(){if(bs===void 0)throw new Error("No runtime abstraction layer installed");return bs}i(vs,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");bs=n}i(e,"install"),t.install=e})(vs||(vs={}));ws.default=vs});var vn=Z(bn=>{"use strict";y();Object.defineProperty(bn,"__esModule",{value:!0});bn.Emitter=bn.Event=void 0;var Vm=At(),ju;(function(t){let e={dispose(){}};t.None=function(){return e}})(ju||(bn.Event=ju={}));var Es=class{static{i(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:i(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let o=0,s=this._callbacks.length;o<s;o++)if(this._callbacks[o]===e)if(this._contexts[o]===n){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,a=r.length;s<a;s++)try{n.push(r[s].apply(o[s],e))}catch(l){(0,Vm.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},di=class t{static{i(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Es),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let o={dispose:i(()=>{this._callbacks&&(this._callbacks.remove(e,n),o.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};bn.Emitter=di;di._noop=function(){}});var gi=Z(wn=>{"use strict";y();Object.defineProperty(wn,"__esModule",{value:!0});wn.CancellationTokenSource=wn.CancellationToken=void 0;var Gm=At(),Zm=yn(),Ts=vn(),fi;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ts.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ts.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Zm.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}i(e,"is"),t.is=e})(fi||(wn.CancellationToken=fi={}));var Qm=Object.freeze(function(t,e){let n=(0,Gm.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),mi=class{static{i(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Qm:(this._emitter||(this._emitter=new Ts.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ss=class{static{i(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new mi),this._token}cancel(){this._token?this._token.cancel():this._token=fi.Cancelled}dispose(){this._token?this._token instanceof mi&&this._token.dispose():this._token=fi.None}};wn.CancellationTokenSource=Ss});var Uu=Z(En=>{"use strict";y();Object.defineProperty(En,"__esModule",{value:!0});En.SharedArrayReceiverStrategy=En.SharedArraySenderStrategy=void 0;var Jm=gi(),Yn;(function(t){t.Continue=0,t.Cancelled=1})(Yn||(Yn={}));var Rs=class{static{i(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Yn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let o=new Int32Array(r,0,1);Atomics.store(o,0,Yn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};En.SharedArraySenderStrategy=Rs;var xs=class{static{i(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Yn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Is=class{static{i(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new xs(e)}cancel(){}dispose(){}},Ns=class{static{i(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new Jm.CancellationTokenSource:new Is(n)}};En.SharedArrayReceiverStrategy=Ns});var ks=Z(_i=>{"use strict";y();Object.defineProperty(_i,"__esModule",{value:!0});_i.Semaphore=void 0;var Xm=At(),Ms=class{static{i(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Xm.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};_i.Semaphore=Ms});var Bu=Z(Ot=>{"use strict";y();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.ReadableStreamMessageReader=Ot.AbstractMessageReader=Ot.MessageReader=void 0;var Cs=At(),Tn=yn(),Ps=vn(),Km=ks(),Wu;(function(t){function e(n){let r=n;return r&&Tn.func(r.listen)&&Tn.func(r.dispose)&&Tn.func(r.onError)&&Tn.func(r.onClose)&&Tn.func(r.onPartialMessage)}i(e,"is"),t.is=e})(Wu||(Ot.MessageReader=Wu={}));var pi=class{static{i(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new Ps.Emitter,this.closeEmitter=new Ps.Emitter,this.partialMessageEmitter=new Ps.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Tn.string(e.message)?e.message:"unknown"}`)}};Ot.AbstractMessageReader=pi;var Ls;(function(t){function e(n){let r,o,s,a=new Map,l,f=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,a.set(s.name,s)),n.contentDecoders!==void 0)for(let g of n.contentDecoders)a.set(g.name,g);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,f.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let g of n.contentTypeDecoders)f.set(g.name,g)}return l===void 0&&(l=(0,Cs.default)().applicationJson.decoder,f.set(l.name,l)),{charset:r,contentDecoder:s,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:f}}i(e,"fromOptions"),t.fromOptions=e})(Ls||(Ls={}));var Ds=class extends pi{static{i(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=Ls.fromOptions(n),this.buffer=(0,Cs.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Km.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let o=r.get("content-length");if(!o){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let s=parseInt(o);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${o}`));return}this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,o=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(o)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Cs.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ot.ReadableStreamMessageReader=Ds});var Gu=Z(Ft=>{"use strict";y();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.WriteableStreamMessageWriter=Ft.AbstractMessageWriter=Ft.MessageWriter=void 0;var $u=At(),er=yn(),Ym=ks(),zu=vn(),eg="Content-Length: ",Hu=`\r
`,Vu;(function(t){function e(n){let r=n;return r&&er.func(r.dispose)&&er.func(r.onClose)&&er.func(r.onError)&&er.func(r.write)}i(e,"is"),t.is=e})(Vu||(Ft.MessageWriter=Vu={}));var hi=class{static{i(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new zu.Emitter,this.closeEmitter=new zu.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${er.string(e.message)?e.message:"unknown"}`)}};Ft.AbstractMessageWriter=hi;var As;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,$u.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,$u.default)().applicationJson.encoder}}i(e,"fromOptions"),t.fromOptions=e})(As||(As={}));var Os=class extends hi{static{i(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=As.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Ym.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let o=[];return o.push(eg,r.byteLength.toString(),Hu),o.push(Hu),this.doWrite(e,o,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(o){return this.handleError(o,e),Promise.reject(o)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Ft.WriteableStreamMessageWriter=Os});var Zu=Z(yi=>{"use strict";y();Object.defineProperty(yi,"__esModule",{value:!0});yi.AbstractMessageBuffer=void 0;var tg=13,ng=10,rg=`\r
`,Fs=class{static{i(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,o=0,s=0;e:for(;r<this._chunks.length;){let g=this._chunks[r];for(o=0;o<g.length;){switch(g[o]){case tg:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case ng:switch(n){case 1:n=2;break;case 3:n=4,o++;break e;default:n=0}break;default:n=0}o++}s+=g.byteLength,r++}if(n!==4)return;let a=this._read(s+o),l=new Map,f=this.toString(a,"ascii").split(rg);if(f.length<2)return l;for(let g=0;g<f.length-2;g++){let b=f[g],T=b.indexOf(":");if(T===-1)throw new Error(`Message header must separate key and value using ':'
${b}`);let x=b.substr(0,T),L=b.substr(T+1).trim();l.set(e?x.toLowerCase():x,L)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,o=0;for(;e>0;){let s=this._chunks[o];if(s.byteLength>e){let a=s.slice(0,e);n.set(a,r),r+=e,this._chunks[o]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};yi.AbstractMessageBuffer=Fs});var Yu=Z(ne=>{"use strict";y();Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.ConnectionOptions=ne.MessageStrategy=ne.CancellationStrategy=ne.CancellationSenderStrategy=ne.CancellationReceiverStrategy=ne.RequestCancellationReceiverStrategy=ne.IdCancellationReceiverStrategy=ne.ConnectionStrategy=ne.ConnectionError=ne.ConnectionErrors=ne.LogTraceNotification=ne.SetTraceNotification=ne.TraceFormat=ne.TraceValues=ne.Trace=ne.NullLogger=ne.ProgressType=ne.ProgressToken=void 0;var Qu=At(),Te=yn(),J=ps(),Ju=ys(),tr=vn(),qs=gi(),ir;(function(t){t.type=new J.NotificationType("$/cancelRequest")})(ir||(ir={}));var js;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}i(e,"is"),t.is=e})(js||(ne.ProgressToken=js={}));var nr;(function(t){t.type=new J.NotificationType("$/progress")})(nr||(nr={}));var Us=class{static{i(this,"ProgressType")}constructor(){}};ne.ProgressType=Us;var Ws;(function(t){function e(n){return Te.func(n)}i(e,"is"),t.is=e})(Ws||(Ws={}));ne.NullLogger=Object.freeze({error:i(()=>{},"error"),warn:i(()=>{},"warn"),info:i(()=>{},"info"),log:i(()=>{},"log")});var ce;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ce||(ne.Trace=ce={}));var Xu;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Xu||(ne.TraceValues=Xu={}));(function(t){function e(r){if(!Te.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}i(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}i(n,"toString"),t.toString=n})(ce||(ne.Trace=ce={}));var Ye;(function(t){t.Text="text",t.JSON="json"})(Ye||(ne.TraceFormat=Ye={}));(function(t){function e(n){return Te.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}i(e,"fromString"),t.fromString=e})(Ye||(ne.TraceFormat=Ye={}));var Bs;(function(t){t.type=new J.NotificationType("$/setTrace")})(Bs||(ne.SetTraceNotification=Bs={}));var bi;(function(t){t.type=new J.NotificationType("$/logTrace")})(bi||(ne.LogTraceNotification=bi={}));var rr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(rr||(ne.ConnectionErrors=rr={}));var Sn=class t extends Error{static{i(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ne.ConnectionError=Sn;var $s;(function(t){function e(n){let r=n;return r&&Te.func(r.cancelUndispatched)}i(e,"is"),t.is=e})($s||(ne.ConnectionStrategy=$s={}));var vi;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Te.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Te.func(r.dispose))}i(e,"is"),t.is=e})(vi||(ne.IdCancellationReceiverStrategy=vi={}));var zs;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Te.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Te.func(r.dispose))}i(e,"is"),t.is=e})(zs||(ne.RequestCancellationReceiverStrategy=zs={}));var wi;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new qs.CancellationTokenSource}});function e(n){return vi.is(n)||zs.is(n)}i(e,"is"),t.is=e})(wi||(ne.CancellationReceiverStrategy=wi={}));var Ei;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(ir.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Te.func(r.sendCancellation)&&Te.func(r.cleanup)}i(e,"is"),t.is=e})(Ei||(ne.CancellationSenderStrategy=Ei={}));var Ti;(function(t){t.Message=Object.freeze({receiver:wi.Message,sender:Ei.Message});function e(n){let r=n;return r&&wi.is(r.receiver)&&Ei.is(r.sender)}i(e,"is"),t.is=e})(Ti||(ne.CancellationStrategy=Ti={}));var Si;(function(t){function e(n){let r=n;return r&&Te.func(r.handleMessage)}i(e,"is"),t.is=e})(Si||(ne.MessageStrategy=Si={}));var Ku;(function(t){function e(n){let r=n;return r&&(Ti.is(r.cancellationStrategy)||$s.is(r.connectionStrategy)||Si.is(r.messageStrategy))}i(e,"is"),t.is=e})(Ku||(ne.ConnectionOptions=Ku={}));var ft;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ft||(ft={}));function ig(t,e,n,r){let o=n!==void 0?n:ne.NullLogger,s=0,a=0,l=0,f="2.0",g,b=new Map,T,x=new Map,L=new Map,B,D=new Ju.LinkedMap,j=new Map,$=new Set,k=new Map,G=ce.Off,K=Ye.Text,Y,fe=ft.New,oe=new tr.Emitter,ge=new tr.Emitter,Ae=new tr.Emitter,Oe=new tr.Emitter,A=new tr.Emitter,E=r&&r.cancellationStrategy?r.cancellationStrategy:Ti.Message;function q(_){if(_===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+_.toString()}i(q,"createRequestQueueKey");function W(_){return _===null?"res-unknown-"+(++l).toString():"res-"+_.toString()}i(W,"createResponseQueueKey");function S(){return"not-"+(++a).toString()}i(S,"createNotificationQueueKey");function N(_,I){J.Message.isRequest(I)?_.set(q(I.id),I):J.Message.isResponse(I)?_.set(W(I.id),I):_.set(S(),I)}i(N,"addMessageToQueue");function P(_){}i(P,"cancelUndispatched");function z(){return fe===ft.Listening}i(z,"isListening");function H(){return fe===ft.Closed}i(H,"isClosed");function U(){return fe===ft.Disposed}i(U,"isDisposed");function X(){(fe===ft.New||fe===ft.Listening)&&(fe=ft.Closed,ge.fire(void 0))}i(X,"closeHandler");function ee(_){oe.fire([_,void 0,void 0])}i(ee,"readErrorHandler");function Ie(_){oe.fire(_)}i(Ie,"writeErrorHandler"),t.onClose(X),t.onError(ee),e.onClose(X),e.onError(Ie);function le(){B||D.size===0||(B=(0,Qu.default)().timer.setImmediate(()=>{B=void 0,gt()}))}i(le,"triggerMessageQueue");function He(_){J.Message.isRequest(_)?lr(_):J.Message.isNotification(_)?dr(_):J.Message.isResponse(_)?cr(_):on(_)}i(He,"handleMessage");function gt(){if(D.size===0)return;let _=D.shift();try{let I=r?.messageStrategy;Si.is(I)?I.handleMessage(_,He):He(_)}finally{le()}}i(gt,"processMessageQueue");let ur=i(_=>{try{if(J.Message.isNotification(_)&&_.method===ir.type.method){let I=_.params.id,F=q(I),V=D.get(F);if(J.Message.isRequest(V)){let de=r?.connectionStrategy,be=de&&de.cancelUndispatched?de.cancelUndispatched(V,P):void 0;if(be&&(be.error!==void 0||be.result!==void 0)){D.delete(F),k.delete(I),be.id=V.id,zt(be,_.method,Date.now()),e.write(be).catch(()=>o.error("Sending response for canceled message failed."));return}}let me=k.get(I);if(me!==void 0){me.cancel(),sn(_);return}else $.add(I)}N(D,_)}finally{le()}},"callback");function lr(_){if(U())return;function I(re,_e,ue){let Se={jsonrpc:f,id:_.id};re instanceof J.ResponseError?Se.error=re.toJson():Se.result=re===void 0?null:re,zt(Se,_e,ue),e.write(Se).catch(()=>o.error("Sending response failed."))}i(I,"reply");function F(re,_e,ue){let Se={jsonrpc:f,id:_.id,error:re.toJson()};zt(Se,_e,ue),e.write(Se).catch(()=>o.error("Sending response failed."))}i(F,"replyError");function V(re,_e,ue){re===void 0&&(re=null);let Se={jsonrpc:f,id:_.id,result:re};zt(Se,_e,ue),e.write(Se).catch(()=>o.error("Sending response failed."))}i(V,"replySuccess"),gr(_);let me=b.get(_.method),de,be;me&&(de=me.type,be=me.handler);let we=Date.now();if(be||g){let re=_.id??String(Date.now()),_e=vi.is(E.receiver)?E.receiver.createCancellationTokenSource(re):E.receiver.createCancellationTokenSource(_);_.id!==null&&$.has(_.id)&&_e.cancel(),_.id!==null&&k.set(re,_e);try{let ue;if(be)if(_.params===void 0){if(de!==void 0&&de.numberOfParams!==0){F(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${_.method} defines ${de.numberOfParams} params but received none.`),_.method,we);return}ue=be(_e.token)}else if(Array.isArray(_.params)){if(de!==void 0&&de.parameterStructures===J.ParameterStructures.byName){F(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by name but received parameters by position`),_.method,we);return}ue=be(..._.params,_e.token)}else{if(de!==void 0&&de.parameterStructures===J.ParameterStructures.byPosition){F(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by position but received parameters by name`),_.method,we);return}ue=be(_.params,_e.token)}else g&&(ue=g(_.method,_.params,_e.token));let Se=ue;ue?Se.then?Se.then(Le=>{k.delete(re),I(Le,_.method,we)},Le=>{k.delete(re),Le instanceof J.ResponseError?F(Le,_.method,we):Le&&Te.string(Le.message)?F(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${Le.message}`),_.method,we):F(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,we)}):(k.delete(re),I(ue,_.method,we)):(k.delete(re),V(ue,_.method,we))}catch(ue){k.delete(re),ue instanceof J.ResponseError?I(ue,_.method,we):ue&&Te.string(ue.message)?F(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${ue.message}`),_.method,we):F(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,we)}}else F(new J.ResponseError(J.ErrorCodes.MethodNotFound,`Unhandled method ${_.method}`),_.method,we)}i(lr,"handleRequest");function cr(_){if(!U())if(_.id===null)_.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(_.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let I=_.id,F=j.get(I);if(_r(_,F),F!==void 0){j.delete(I);try{if(_.error){let V=_.error;F.reject(new J.ResponseError(V.code,V.message,V.data))}else if(_.result!==void 0)F.resolve(_.result);else throw new Error("Should never happen.")}catch(V){V.message?o.error(`Response handler '${F.method}' failed with message: ${V.message}`):o.error(`Response handler '${F.method}' failed unexpectedly.`)}}}}i(cr,"handleResponse");function dr(_){if(U())return;let I,F;if(_.method===ir.type.method){let V=_.params.id;$.delete(V),sn(_);return}else{let V=x.get(_.method);V&&(F=V.handler,I=V.type)}if(F||T)try{if(sn(_),F)if(_.params===void 0)I!==void 0&&I.numberOfParams!==0&&I.parameterStructures!==J.ParameterStructures.byName&&o.error(`Notification ${_.method} defines ${I.numberOfParams} params but received none.`),F();else if(Array.isArray(_.params)){let V=_.params;_.method===nr.type.method&&V.length===2&&js.is(V[0])?F({token:V[0],value:V[1]}):(I!==void 0&&(I.parameterStructures===J.ParameterStructures.byName&&o.error(`Notification ${_.method} defines parameters by name but received parameters by position`),I.numberOfParams!==_.params.length&&o.error(`Notification ${_.method} defines ${I.numberOfParams} params but received ${V.length} arguments`)),F(...V))}else I!==void 0&&I.parameterStructures===J.ParameterStructures.byPosition&&o.error(`Notification ${_.method} defines parameters by position but received parameters by name`),F(_.params);else T&&T(_.method,_.params)}catch(V){V.message?o.error(`Notification handler '${_.method}' failed with message: ${V.message}`):o.error(`Notification handler '${_.method}' failed unexpectedly.`)}else Ae.fire(_)}i(dr,"handleNotification");function on(_){if(!_){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(_,null,4)}`);let I=_;if(Te.string(I.id)||Te.number(I.id)){let F=I.id,V=j.get(F);V&&V.reject(new Error("The received response has neither a result nor an error property."))}}i(on,"handleInvalidMessage");function at(_){if(_!=null)switch(G){case ce.Verbose:return JSON.stringify(_,null,4);case ce.Compact:return JSON.stringify(_);default:return}}i(at,"stringifyTrace");function fr(_){if(!(G===ce.Off||!Y))if(K===Ye.Text){let I;(G===ce.Verbose||G===ce.Compact)&&_.params&&(I=`Params: ${at(_.params)}

`),Y.log(`Sending request '${_.method} - (${_.id})'.`,I)}else wt("send-request",_)}i(fr,"traceSendingRequest");function mr(_){if(!(G===ce.Off||!Y))if(K===Ye.Text){let I;(G===ce.Verbose||G===ce.Compact)&&(_.params?I=`Params: ${at(_.params)}

`:I=`No parameters provided.

`),Y.log(`Sending notification '${_.method}'.`,I)}else wt("send-notification",_)}i(mr,"traceSendingNotification");function zt(_,I,F){if(!(G===ce.Off||!Y))if(K===Ye.Text){let V;(G===ce.Verbose||G===ce.Compact)&&(_.error&&_.error.data?V=`Error data: ${at(_.error.data)}

`:_.result?V=`Result: ${at(_.result)}

`:_.error===void 0&&(V=`No result returned.

`)),Y.log(`Sending response '${I} - (${_.id})'. Processing request took ${Date.now()-F}ms`,V)}else wt("send-response",_)}i(zt,"traceSendingResponse");function gr(_){if(!(G===ce.Off||!Y))if(K===Ye.Text){let I;(G===ce.Verbose||G===ce.Compact)&&_.params&&(I=`Params: ${at(_.params)}

`),Y.log(`Received request '${_.method} - (${_.id})'.`,I)}else wt("receive-request",_)}i(gr,"traceReceivedRequest");function sn(_){if(!(G===ce.Off||!Y||_.method===bi.type.method))if(K===Ye.Text){let I;(G===ce.Verbose||G===ce.Compact)&&(_.params?I=`Params: ${at(_.params)}

`:I=`No parameters provided.

`),Y.log(`Received notification '${_.method}'.`,I)}else wt("receive-notification",_)}i(sn,"traceReceivedNotification");function _r(_,I){if(!(G===ce.Off||!Y))if(K===Ye.Text){let F;if((G===ce.Verbose||G===ce.Compact)&&(_.error&&_.error.data?F=`Error data: ${at(_.error.data)}

`:_.result?F=`Result: ${at(_.result)}

`:_.error===void 0&&(F=`No result returned.

`)),I){let V=_.error?` Request failed: ${_.error.message} (${_.error.code}).`:"";Y.log(`Received response '${I.method} - (${_.id})' in ${Date.now()-I.timerStart}ms.${V}`,F)}else Y.log(`Received response ${_.id} without active response promise.`,F)}else wt("receive-response",_)}i(_r,"traceReceivedResponse");function wt(_,I){if(!Y||G===ce.Off)return;let F={isLSPMessage:!0,type:_,message:I,timestamp:Date.now()};Y.log(F)}i(wt,"logLSPMessage");function Mt(){if(H())throw new Sn(rr.Closed,"Connection is closed.");if(U())throw new Sn(rr.Disposed,"Connection is disposed.")}i(Mt,"throwIfClosedOrDisposed");function pr(){if(z())throw new Sn(rr.AlreadyListening,"Connection is already listening")}i(pr,"throwIfListening");function hr(){if(!z())throw new Error("Call listen() first.")}i(hr,"throwIfNotListening");function _t(_){return _===void 0?null:_}i(_t,"undefinedToNull");function Fn(_){if(_!==null)return _}i(Fn,"nullToUndefined");function qn(_){return _!=null&&!Array.isArray(_)&&typeof _=="object"}i(qn,"isNamedParam");function an(_,I){switch(_){case J.ParameterStructures.auto:return qn(I)?Fn(I):[_t(I)];case J.ParameterStructures.byName:if(!qn(I))throw new Error("Received parameters by name but param is not an object literal.");return Fn(I);case J.ParameterStructures.byPosition:return[_t(I)];default:throw new Error(`Unknown parameter structure ${_.toString()}`)}}i(an,"computeSingleParam");function jn(_,I){let F,V=_.numberOfParams;switch(V){case 0:F=void 0;break;case 1:F=an(_.parameterStructures,I[0]);break;default:F=[];for(let me=0;me<I.length&&me<V;me++)F.push(_t(I[me]));if(I.length<V)for(let me=I.length;me<V;me++)F.push(null);break}return F}i(jn,"computeMessageParams");let Et={sendNotification:i((_,...I)=>{Mt();let F,V;if(Te.string(_)){F=_;let de=I[0],be=0,we=J.ParameterStructures.auto;J.ParameterStructures.is(de)&&(be=1,we=de);let re=I.length,_e=re-be;switch(_e){case 0:V=void 0;break;case 1:V=an(we,I[be]);break;default:if(we===J.ParameterStructures.byName)throw new Error(`Received ${_e} parameters for 'by Name' notification parameter structure.`);V=I.slice(be,re).map(ue=>_t(ue));break}}else{let de=I;F=_.method,V=jn(_,de)}let me={jsonrpc:f,method:F,params:V};return mr(me),e.write(me).catch(de=>{throw o.error("Sending notification failed."),de})},"sendNotification"),onNotification:i((_,I)=>{Mt();let F;return Te.func(_)?T=_:I&&(Te.string(_)?(F=_,x.set(_,{type:void 0,handler:I})):(F=_.method,x.set(_.method,{type:_,handler:I}))),{dispose:i(()=>{F!==void 0?x.delete(F):T=void 0},"dispose")}},"onNotification"),onProgress:i((_,I,F)=>{if(L.has(I))throw new Error(`Progress handler for token ${I} already registered`);return L.set(I,F),{dispose:i(()=>{L.delete(I)},"dispose")}},"onProgress"),sendProgress:i((_,I,F)=>Et.sendNotification(nr.type,{token:I,value:F}),"sendProgress"),onUnhandledProgress:Oe.event,sendRequest:i((_,...I)=>{Mt(),hr();let F,V,me;if(Te.string(_)){F=_;let re=I[0],_e=I[I.length-1],ue=0,Se=J.ParameterStructures.auto;J.ParameterStructures.is(re)&&(ue=1,Se=re);let Le=I.length;qs.CancellationToken.is(_e)&&(Le=Le-1,me=_e);let Xe=Le-ue;switch(Xe){case 0:V=void 0;break;case 1:V=an(Se,I[ue]);break;default:if(Se===J.ParameterStructures.byName)throw new Error(`Received ${Xe} parameters for 'by Name' request parameter structure.`);V=I.slice(ue,Le).map(yr=>_t(yr));break}}else{let re=I;F=_.method,V=jn(_,re);let _e=_.numberOfParams;me=qs.CancellationToken.is(re[_e])?re[_e]:void 0}let de=s++,be;me&&(be=me.onCancellationRequested(()=>{let re=E.sender.sendCancellation(Et,de);return re===void 0?(o.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):re.catch(()=>{o.log(`Sending cancellation messages for id ${de} failed`)})}));let we={jsonrpc:f,id:de,method:F,params:V};return fr(we),typeof E.sender.enableCancellation=="function"&&E.sender.enableCancellation(we),new Promise(async(re,_e)=>{let ue=i(Xe=>{re(Xe),E.sender.cleanup(de),be?.dispose()},"resolveWithCleanup"),Se=i(Xe=>{_e(Xe),E.sender.cleanup(de),be?.dispose()},"rejectWithCleanup"),Le={method:F,timerStart:Date.now(),resolve:ue,reject:Se};try{await e.write(we),j.set(de,Le)}catch(Xe){throw o.error("Sending request failed."),Le.reject(new J.ResponseError(J.ErrorCodes.MessageWriteError,Xe.message?Xe.message:"Unknown reason")),Xe}})},"sendRequest"),onRequest:i((_,I)=>{Mt();let F=null;return Ws.is(_)?(F=void 0,g=_):Te.string(_)?(F=null,I!==void 0&&(F=_,b.set(_,{handler:I,type:void 0}))):I!==void 0&&(F=_.method,b.set(_.method,{type:_,handler:I})),{dispose:i(()=>{F!==null&&(F!==void 0?b.delete(F):g=void 0)},"dispose")}},"onRequest"),hasPendingResponse:i(()=>j.size>0,"hasPendingResponse"),trace:i(async(_,I,F)=>{let V=!1,me=Ye.Text;F!==void 0&&(Te.boolean(F)?V=F:(V=F.sendNotification||!1,me=F.traceFormat||Ye.Text)),G=_,K=me,G===ce.Off?Y=void 0:Y=I,V&&!H()&&!U()&&await Et.sendNotification(Bs.type,{value:ce.toString(_)})},"trace"),onError:oe.event,onClose:ge.event,onUnhandledNotification:Ae.event,onDispose:A.event,end:i(()=>{e.end()},"end"),dispose:i(()=>{if(U())return;fe=ft.Disposed,A.fire(void 0);let _=new J.ResponseError(J.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let I of j.values())I.reject(_);j=new Map,k=new Map,$=new Set,D=new Ju.LinkedMap,Te.func(e.dispose)&&e.dispose(),Te.func(t.dispose)&&t.dispose()},"dispose"),listen:i(()=>{Mt(),pr(),fe=ft.Listening,t.listen(ur)},"listen"),inspect:i(()=>{(0,Qu.default)().console.log("inspect")},"inspect")};return Et.onNotification(bi.type,_=>{if(G===ce.Off||!Y)return;let I=G===ce.Verbose||G===ce.Compact;Y.log(_.message,I?_.verbose:void 0)}),Et.onNotification(nr.type,_=>{let I=L.get(_.token);I?I(_.value):Oe.fire(_)}),Et}i(ig,"createMessageConnection");ne.createMessageConnection=ig});var Ri=Z(R=>{"use strict";y();Object.defineProperty(R,"__esModule",{value:!0});R.ProgressType=R.ProgressToken=R.createMessageConnection=R.NullLogger=R.ConnectionOptions=R.ConnectionStrategy=R.AbstractMessageBuffer=R.WriteableStreamMessageWriter=R.AbstractMessageWriter=R.MessageWriter=R.ReadableStreamMessageReader=R.AbstractMessageReader=R.MessageReader=R.SharedArrayReceiverStrategy=R.SharedArraySenderStrategy=R.CancellationToken=R.CancellationTokenSource=R.Emitter=R.Event=R.Disposable=R.LRUCache=R.Touch=R.LinkedMap=R.ParameterStructures=R.NotificationType9=R.NotificationType8=R.NotificationType7=R.NotificationType6=R.NotificationType5=R.NotificationType4=R.NotificationType3=R.NotificationType2=R.NotificationType1=R.NotificationType0=R.NotificationType=R.ErrorCodes=R.ResponseError=R.RequestType9=R.RequestType8=R.RequestType7=R.RequestType6=R.RequestType5=R.RequestType4=R.RequestType3=R.RequestType2=R.RequestType1=R.RequestType0=R.RequestType=R.Message=R.RAL=void 0;R.MessageStrategy=R.CancellationStrategy=R.CancellationSenderStrategy=R.CancellationReceiverStrategy=R.ConnectionError=R.ConnectionErrors=R.LogTraceNotification=R.SetTraceNotification=R.TraceFormat=R.TraceValues=R.Trace=void 0;var ye=ps();Object.defineProperty(R,"Message",{enumerable:!0,get:i(function(){return ye.Message},"get")});Object.defineProperty(R,"RequestType",{enumerable:!0,get:i(function(){return ye.RequestType},"get")});Object.defineProperty(R,"RequestType0",{enumerable:!0,get:i(function(){return ye.RequestType0},"get")});Object.defineProperty(R,"RequestType1",{enumerable:!0,get:i(function(){return ye.RequestType1},"get")});Object.defineProperty(R,"RequestType2",{enumerable:!0,get:i(function(){return ye.RequestType2},"get")});Object.defineProperty(R,"RequestType3",{enumerable:!0,get:i(function(){return ye.RequestType3},"get")});Object.defineProperty(R,"RequestType4",{enumerable:!0,get:i(function(){return ye.RequestType4},"get")});Object.defineProperty(R,"RequestType5",{enumerable:!0,get:i(function(){return ye.RequestType5},"get")});Object.defineProperty(R,"RequestType6",{enumerable:!0,get:i(function(){return ye.RequestType6},"get")});Object.defineProperty(R,"RequestType7",{enumerable:!0,get:i(function(){return ye.RequestType7},"get")});Object.defineProperty(R,"RequestType8",{enumerable:!0,get:i(function(){return ye.RequestType8},"get")});Object.defineProperty(R,"RequestType9",{enumerable:!0,get:i(function(){return ye.RequestType9},"get")});Object.defineProperty(R,"ResponseError",{enumerable:!0,get:i(function(){return ye.ResponseError},"get")});Object.defineProperty(R,"ErrorCodes",{enumerable:!0,get:i(function(){return ye.ErrorCodes},"get")});Object.defineProperty(R,"NotificationType",{enumerable:!0,get:i(function(){return ye.NotificationType},"get")});Object.defineProperty(R,"NotificationType0",{enumerable:!0,get:i(function(){return ye.NotificationType0},"get")});Object.defineProperty(R,"NotificationType1",{enumerable:!0,get:i(function(){return ye.NotificationType1},"get")});Object.defineProperty(R,"NotificationType2",{enumerable:!0,get:i(function(){return ye.NotificationType2},"get")});Object.defineProperty(R,"NotificationType3",{enumerable:!0,get:i(function(){return ye.NotificationType3},"get")});Object.defineProperty(R,"NotificationType4",{enumerable:!0,get:i(function(){return ye.NotificationType4},"get")});Object.defineProperty(R,"NotificationType5",{enumerable:!0,get:i(function(){return ye.NotificationType5},"get")});Object.defineProperty(R,"NotificationType6",{enumerable:!0,get:i(function(){return ye.NotificationType6},"get")});Object.defineProperty(R,"NotificationType7",{enumerable:!0,get:i(function(){return ye.NotificationType7},"get")});Object.defineProperty(R,"NotificationType8",{enumerable:!0,get:i(function(){return ye.NotificationType8},"get")});Object.defineProperty(R,"NotificationType9",{enumerable:!0,get:i(function(){return ye.NotificationType9},"get")});Object.defineProperty(R,"ParameterStructures",{enumerable:!0,get:i(function(){return ye.ParameterStructures},"get")});var Hs=ys();Object.defineProperty(R,"LinkedMap",{enumerable:!0,get:i(function(){return Hs.LinkedMap},"get")});Object.defineProperty(R,"LRUCache",{enumerable:!0,get:i(function(){return Hs.LRUCache},"get")});Object.defineProperty(R,"Touch",{enumerable:!0,get:i(function(){return Hs.Touch},"get")});var og=qu();Object.defineProperty(R,"Disposable",{enumerable:!0,get:i(function(){return og.Disposable},"get")});var el=vn();Object.defineProperty(R,"Event",{enumerable:!0,get:i(function(){return el.Event},"get")});Object.defineProperty(R,"Emitter",{enumerable:!0,get:i(function(){return el.Emitter},"get")});var tl=gi();Object.defineProperty(R,"CancellationTokenSource",{enumerable:!0,get:i(function(){return tl.CancellationTokenSource},"get")});Object.defineProperty(R,"CancellationToken",{enumerable:!0,get:i(function(){return tl.CancellationToken},"get")});var nl=Uu();Object.defineProperty(R,"SharedArraySenderStrategy",{enumerable:!0,get:i(function(){return nl.SharedArraySenderStrategy},"get")});Object.defineProperty(R,"SharedArrayReceiverStrategy",{enumerable:!0,get:i(function(){return nl.SharedArrayReceiverStrategy},"get")});var Vs=Bu();Object.defineProperty(R,"MessageReader",{enumerable:!0,get:i(function(){return Vs.MessageReader},"get")});Object.defineProperty(R,"AbstractMessageReader",{enumerable:!0,get:i(function(){return Vs.AbstractMessageReader},"get")});Object.defineProperty(R,"ReadableStreamMessageReader",{enumerable:!0,get:i(function(){return Vs.ReadableStreamMessageReader},"get")});var Gs=Gu();Object.defineProperty(R,"MessageWriter",{enumerable:!0,get:i(function(){return Gs.MessageWriter},"get")});Object.defineProperty(R,"AbstractMessageWriter",{enumerable:!0,get:i(function(){return Gs.AbstractMessageWriter},"get")});Object.defineProperty(R,"WriteableStreamMessageWriter",{enumerable:!0,get:i(function(){return Gs.WriteableStreamMessageWriter},"get")});var sg=Zu();Object.defineProperty(R,"AbstractMessageBuffer",{enumerable:!0,get:i(function(){return sg.AbstractMessageBuffer},"get")});var qe=Yu();Object.defineProperty(R,"ConnectionStrategy",{enumerable:!0,get:i(function(){return qe.ConnectionStrategy},"get")});Object.defineProperty(R,"ConnectionOptions",{enumerable:!0,get:i(function(){return qe.ConnectionOptions},"get")});Object.defineProperty(R,"NullLogger",{enumerable:!0,get:i(function(){return qe.NullLogger},"get")});Object.defineProperty(R,"createMessageConnection",{enumerable:!0,get:i(function(){return qe.createMessageConnection},"get")});Object.defineProperty(R,"ProgressToken",{enumerable:!0,get:i(function(){return qe.ProgressToken},"get")});Object.defineProperty(R,"ProgressType",{enumerable:!0,get:i(function(){return qe.ProgressType},"get")});Object.defineProperty(R,"Trace",{enumerable:!0,get:i(function(){return qe.Trace},"get")});Object.defineProperty(R,"TraceValues",{enumerable:!0,get:i(function(){return qe.TraceValues},"get")});Object.defineProperty(R,"TraceFormat",{enumerable:!0,get:i(function(){return qe.TraceFormat},"get")});Object.defineProperty(R,"SetTraceNotification",{enumerable:!0,get:i(function(){return qe.SetTraceNotification},"get")});Object.defineProperty(R,"LogTraceNotification",{enumerable:!0,get:i(function(){return qe.LogTraceNotification},"get")});Object.defineProperty(R,"ConnectionErrors",{enumerable:!0,get:i(function(){return qe.ConnectionErrors},"get")});Object.defineProperty(R,"ConnectionError",{enumerable:!0,get:i(function(){return qe.ConnectionError},"get")});Object.defineProperty(R,"CancellationReceiverStrategy",{enumerable:!0,get:i(function(){return qe.CancellationReceiverStrategy},"get")});Object.defineProperty(R,"CancellationSenderStrategy",{enumerable:!0,get:i(function(){return qe.CancellationSenderStrategy},"get")});Object.defineProperty(R,"CancellationStrategy",{enumerable:!0,get:i(function(){return qe.CancellationStrategy},"get")});Object.defineProperty(R,"MessageStrategy",{enumerable:!0,get:i(function(){return qe.MessageStrategy},"get")});var ag=At();R.RAL=ag.default});var ol=Z(Xs=>{"use strict";y();Object.defineProperty(Xs,"__esModule",{value:!0});var rl=require("util"),It=Ri(),xi=class t extends It.AbstractMessageBuffer{static{i(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new rl.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};xi.emptyBuffer=Buffer.allocUnsafe(0);var Zs=class{static{i(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),It.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),It.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),It.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),It.Disposable.create(()=>this.stream.off("data",e))}},Qs=class{static{i(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),It.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),It.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),It.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,o)=>{let s=i(a=>{a==null?r():o(a)},"callback");typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},il=Object.freeze({messageBuffer:Object.freeze({create:i(t=>new xi(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:i((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:i((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new rl.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:i(t=>new Zs(t),"asReadableStream"),asWritableStream:i(t=>new Qs(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:i(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:i(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:i(()=>clearInterval(r),"dispose")}}})});function Js(){return il}i(Js,"RIL");(function(t){function e(){It.RAL.install(il)}i(e,"install"),t.install=e})(Js||(Js={}));Xs.default=Js});var nn=Z(ae=>{"use strict";y();var ug=ae&&ae.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),lg=ae&&ae.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ug(e,t,n)};Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.createServerSocketTransport=ae.createClientSocketTransport=ae.createServerPipeTransport=ae.createClientPipeTransport=ae.generateRandomPipeName=ae.StreamMessageWriter=ae.StreamMessageReader=ae.SocketMessageWriter=ae.SocketMessageReader=ae.PortMessageWriter=ae.PortMessageReader=ae.IPCMessageWriter=ae.IPCMessageReader=void 0;var Rn=ol();Rn.default.install();var sl=require("path"),cg=require("os"),dg=require("crypto"),Mi=require("net"),et=Ri();lg(Ri(),ae);var Ks=class extends et.AbstractMessageReader{static{i(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),et.Disposable.create(()=>this.process.off("message",e))}};ae.IPCMessageReader=Ks;var Ys=class extends et.AbstractMessageWriter{static{i(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.IPCMessageWriter=Ys;var ea=class extends et.AbstractMessageReader{static{i(this,"PortMessageReader")}constructor(e){super(),this.onData=new et.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ae.PortMessageReader=ea;var ta=class extends et.AbstractMessageWriter{static{i(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.PortMessageWriter=ta;var en=class extends et.ReadableStreamMessageReader{static{i(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,Rn.default)().stream.asReadableStream(e),n)}};ae.SocketMessageReader=en;var tn=class extends et.WriteableStreamMessageWriter{static{i(this,"SocketMessageWriter")}constructor(e,n){super((0,Rn.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ae.SocketMessageWriter=tn;var Ii=class extends et.ReadableStreamMessageReader{static{i(this,"StreamMessageReader")}constructor(e,n){super((0,Rn.default)().stream.asReadableStream(e),n)}};ae.StreamMessageReader=Ii;var Ni=class extends et.WriteableStreamMessageWriter{static{i(this,"StreamMessageWriter")}constructor(e,n){super((0,Rn.default)().stream.asWritableStream(e),n)}};ae.StreamMessageWriter=Ni;var al=process.env.XDG_RUNTIME_DIR,fg=new Map([["linux",107],["darwin",103]]);function mg(){let t=(0,dg.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;al?e=sl.join(al,`vscode-ipc-${t}.sock`):e=sl.join(cg.tmpdir(),`vscode-${t}.sock`);let n=fg.get(process.platform);return n!==void 0&&e.length>n&&(0,Rn.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}i(mg,"generateRandomPipeName");ae.generateRandomPipeName=mg;function gg(t,e="utf-8"){let n,r=new Promise((o,s)=>{n=o});return new Promise((o,s)=>{let a=(0,Mi.createServer)(l=>{a.close(),n([new en(l,e),new tn(l,e)])});a.on("error",s),a.listen(t,()=>{a.removeListener("error",s),o({onConnected:i(()=>r,"onConnected")})})})}i(gg,"createClientPipeTransport");ae.createClientPipeTransport=gg;function _g(t,e="utf-8"){let n=(0,Mi.createConnection)(t);return[new en(n,e),new tn(n,e)]}i(_g,"createServerPipeTransport");ae.createServerPipeTransport=_g;function pg(t,e="utf-8"){let n,r=new Promise((o,s)=>{n=o});return new Promise((o,s)=>{let a=(0,Mi.createServer)(l=>{a.close(),n([new en(l,e),new tn(l,e)])});a.on("error",s),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",s),o({onConnected:i(()=>r,"onConnected")})})})}i(pg,"createClientSocketTransport");ae.createClientSocketTransport=pg;function hg(t,e="utf-8"){let n=(0,Mi.createConnection)(t,"127.0.0.1");return[new en(n,e),new tn(n,e)]}i(hg,"createServerSocketTransport");ae.createServerSocketTransport=hg;function yg(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}i(yg,"isReadableStream");function bg(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}i(bg,"isWritableStream");function vg(t,e,n,r){n||(n=et.NullLogger);let o=yg(t)?new Ii(t):t,s=bg(e)?new Ni(e):e;return et.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,et.createMessageConnection)(o,s,n,r)}i(vg,"createMessageConnection");ae.createMessageConnection=vg});var na=Z((Hv,ul)=>{"use strict";y();ul.exports=nn()});var Pi=Z((ll,ki)=>{y();(function(t){if(typeof ki=="object"&&typeof ki.exports=="object"){var e=t(require,ll);e!==void 0&&(ki.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(c){function p(h){return typeof h=="string"}i(p,"is"),c.is=p})(n||(e.DocumentUri=n={}));var r;(function(c){function p(h){return typeof h=="string"}i(p,"is"),c.is=p})(r||(e.URI=r={}));var o;(function(c){c.MIN_VALUE=-2147483648,c.MAX_VALUE=2147483647;function p(h){return typeof h=="number"&&c.MIN_VALUE<=h&&h<=c.MAX_VALUE}i(p,"is"),c.is=p})(o||(e.integer=o={}));var s;(function(c){c.MIN_VALUE=0,c.MAX_VALUE=2147483647;function p(h){return typeof h=="number"&&c.MIN_VALUE<=h&&h<=c.MAX_VALUE}i(p,"is"),c.is=p})(s||(e.uinteger=s={}));var a;(function(c){function p(d,u){return d===Number.MAX_VALUE&&(d=s.MAX_VALUE),u===Number.MAX_VALUE&&(u=s.MAX_VALUE),{line:d,character:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&w.uinteger(u.line)&&w.uinteger(u.character)}i(h,"is"),c.is=h})(a||(e.Position=a={}));var l;(function(c){function p(d,u,v,M){if(w.uinteger(d)&&w.uinteger(u)&&w.uinteger(v)&&w.uinteger(M))return{start:a.create(d,u),end:a.create(v,M)};if(a.is(d)&&a.is(u))return{start:d,end:u};throw new Error("Range#create called with invalid arguments[".concat(d,", ").concat(u,", ").concat(v,", ").concat(M,"]"))}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&a.is(u.start)&&a.is(u.end)}i(h,"is"),c.is=h})(l||(e.Range=l={}));var f;(function(c){function p(d,u){return{uri:d,range:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&l.is(u.range)&&(w.string(u.uri)||w.undefined(u.uri))}i(h,"is"),c.is=h})(f||(e.Location=f={}));var g;(function(c){function p(d,u,v,M){return{targetUri:d,targetRange:u,targetSelectionRange:v,originSelectionRange:M}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&l.is(u.targetRange)&&w.string(u.targetUri)&&l.is(u.targetSelectionRange)&&(l.is(u.originSelectionRange)||w.undefined(u.originSelectionRange))}i(h,"is"),c.is=h})(g||(e.LocationLink=g={}));var b;(function(c){function p(d,u,v,M){return{red:d,green:u,blue:v,alpha:M}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&w.numberRange(u.red,0,1)&&w.numberRange(u.green,0,1)&&w.numberRange(u.blue,0,1)&&w.numberRange(u.alpha,0,1)}i(h,"is"),c.is=h})(b||(e.Color=b={}));var T;(function(c){function p(d,u){return{range:d,color:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&l.is(u.range)&&b.is(u.color)}i(h,"is"),c.is=h})(T||(e.ColorInformation=T={}));var x;(function(c){function p(d,u,v){return{label:d,textEdit:u,additionalTextEdits:v}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&w.string(u.label)&&(w.undefined(u.textEdit)||Y.is(u))&&(w.undefined(u.additionalTextEdits)||w.typedArray(u.additionalTextEdits,Y.is))}i(h,"is"),c.is=h})(x||(e.ColorPresentation=x={}));var L;(function(c){c.Comment="comment",c.Imports="imports",c.Region="region"})(L||(e.FoldingRangeKind=L={}));var B;(function(c){function p(d,u,v,M,te,Re){var pe={startLine:d,endLine:u};return w.defined(v)&&(pe.startCharacter=v),w.defined(M)&&(pe.endCharacter=M),w.defined(te)&&(pe.kind=te),w.defined(Re)&&(pe.collapsedText=Re),pe}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&w.uinteger(u.startLine)&&w.uinteger(u.startLine)&&(w.undefined(u.startCharacter)||w.uinteger(u.startCharacter))&&(w.undefined(u.endCharacter)||w.uinteger(u.endCharacter))&&(w.undefined(u.kind)||w.string(u.kind))}i(h,"is"),c.is=h})(B||(e.FoldingRange=B={}));var D;(function(c){function p(d,u){return{location:d,message:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&f.is(u.location)&&w.string(u.message)}i(h,"is"),c.is=h})(D||(e.DiagnosticRelatedInformation=D={}));var j;(function(c){c.Error=1,c.Warning=2,c.Information=3,c.Hint=4})(j||(e.DiagnosticSeverity=j={}));var $;(function(c){c.Unnecessary=1,c.Deprecated=2})($||(e.DiagnosticTag=$={}));var k;(function(c){function p(h){var d=h;return w.objectLiteral(d)&&w.string(d.href)}i(p,"is"),c.is=p})(k||(e.CodeDescription=k={}));var G;(function(c){function p(d,u,v,M,te,Re){var pe={range:d,message:u};return w.defined(v)&&(pe.severity=v),w.defined(M)&&(pe.code=M),w.defined(te)&&(pe.source=te),w.defined(Re)&&(pe.relatedInformation=Re),pe}i(p,"create"),c.create=p;function h(d){var u,v=d;return w.defined(v)&&l.is(v.range)&&w.string(v.message)&&(w.number(v.severity)||w.undefined(v.severity))&&(w.integer(v.code)||w.string(v.code)||w.undefined(v.code))&&(w.undefined(v.codeDescription)||w.string((u=v.codeDescription)===null||u===void 0?void 0:u.href))&&(w.string(v.source)||w.undefined(v.source))&&(w.undefined(v.relatedInformation)||w.typedArray(v.relatedInformation,D.is))}i(h,"is"),c.is=h})(G||(e.Diagnostic=G={}));var K;(function(c){function p(d,u){for(var v=[],M=2;M<arguments.length;M++)v[M-2]=arguments[M];var te={title:d,command:u};return w.defined(v)&&v.length>0&&(te.arguments=v),te}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.string(u.title)&&w.string(u.command)}i(h,"is"),c.is=h})(K||(e.Command=K={}));var Y;(function(c){function p(v,M){return{range:v,newText:M}}i(p,"replace"),c.replace=p;function h(v,M){return{range:{start:v,end:v},newText:M}}i(h,"insert"),c.insert=h;function d(v){return{range:v,newText:""}}i(d,"del"),c.del=d;function u(v){var M=v;return w.objectLiteral(M)&&w.string(M.newText)&&l.is(M.range)}i(u,"is"),c.is=u})(Y||(e.TextEdit=Y={}));var fe;(function(c){function p(d,u,v){var M={label:d};return u!==void 0&&(M.needsConfirmation=u),v!==void 0&&(M.description=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&w.string(u.label)&&(w.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(w.string(u.description)||u.description===void 0)}i(h,"is"),c.is=h})(fe||(e.ChangeAnnotation=fe={}));var oe;(function(c){function p(h){var d=h;return w.string(d)}i(p,"is"),c.is=p})(oe||(e.ChangeAnnotationIdentifier=oe={}));var ge;(function(c){function p(v,M,te){return{range:v,newText:M,annotationId:te}}i(p,"replace"),c.replace=p;function h(v,M,te){return{range:{start:v,end:v},newText:M,annotationId:te}}i(h,"insert"),c.insert=h;function d(v,M){return{range:v,newText:"",annotationId:M}}i(d,"del"),c.del=d;function u(v){var M=v;return Y.is(M)&&(fe.is(M.annotationId)||oe.is(M.annotationId))}i(u,"is"),c.is=u})(ge||(e.AnnotatedTextEdit=ge={}));var Ae;(function(c){function p(d,u){return{textDocument:d,edits:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&H.is(u.textDocument)&&Array.isArray(u.edits)}i(h,"is"),c.is=h})(Ae||(e.TextDocumentEdit=Ae={}));var Oe;(function(c){function p(d,u,v){var M={kind:"create",uri:d};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(M.options=u),v!==void 0&&(M.annotationId=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return u&&u.kind==="create"&&w.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||w.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||w.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||oe.is(u.annotationId))}i(h,"is"),c.is=h})(Oe||(e.CreateFile=Oe={}));var A;(function(c){function p(d,u,v,M){var te={kind:"rename",oldUri:d,newUri:u};return v!==void 0&&(v.overwrite!==void 0||v.ignoreIfExists!==void 0)&&(te.options=v),M!==void 0&&(te.annotationId=M),te}i(p,"create"),c.create=p;function h(d){var u=d;return u&&u.kind==="rename"&&w.string(u.oldUri)&&w.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||w.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||w.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||oe.is(u.annotationId))}i(h,"is"),c.is=h})(A||(e.RenameFile=A={}));var E;(function(c){function p(d,u,v){var M={kind:"delete",uri:d};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(M.options=u),v!==void 0&&(M.annotationId=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return u&&u.kind==="delete"&&w.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||w.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||w.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||oe.is(u.annotationId))}i(h,"is"),c.is=h})(E||(e.DeleteFile=E={}));var q;(function(c){function p(h){var d=h;return d&&(d.changes!==void 0||d.documentChanges!==void 0)&&(d.documentChanges===void 0||d.documentChanges.every(function(u){return w.string(u.kind)?Oe.is(u)||A.is(u)||E.is(u):Ae.is(u)}))}i(p,"is"),c.is=p})(q||(e.WorkspaceEdit=q={}));var W=function(){function c(p,h){this.edits=p,this.changeAnnotations=h}return i(c,"TextEditChangeImpl"),c.prototype.insert=function(p,h,d){var u,v;if(d===void 0?u=Y.insert(p,h):oe.is(d)?(v=d,u=ge.insert(p,h,d)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(d),u=ge.insert(p,h,v)),this.edits.push(u),v!==void 0)return v},c.prototype.replace=function(p,h,d){var u,v;if(d===void 0?u=Y.replace(p,h):oe.is(d)?(v=d,u=ge.replace(p,h,d)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(d),u=ge.replace(p,h,v)),this.edits.push(u),v!==void 0)return v},c.prototype.delete=function(p,h){var d,u;if(h===void 0?d=Y.del(p):oe.is(h)?(u=h,d=ge.del(p,h)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(h),d=ge.del(p,u)),this.edits.push(d),u!==void 0)return u},c.prototype.add=function(p){this.edits.push(p)},c.prototype.all=function(){return this.edits},c.prototype.clear=function(){this.edits.splice(0,this.edits.length)},c.prototype.assertChangeAnnotations=function(p){if(p===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},c}(),S=function(){function c(p){this._annotations=p===void 0?Object.create(null):p,this._counter=0,this._size=0}return i(c,"ChangeAnnotations"),c.prototype.all=function(){return this._annotations},Object.defineProperty(c.prototype,"size",{get:i(function(){return this._size},"get"),enumerable:!1,configurable:!0}),c.prototype.manage=function(p,h){var d;if(oe.is(p)?d=p:(d=this.nextId(),h=p),this._annotations[d]!==void 0)throw new Error("Id ".concat(d," is already in use."));if(h===void 0)throw new Error("No annotation provided for id ".concat(d));return this._annotations[d]=h,this._size++,d},c.prototype.nextId=function(){return this._counter++,this._counter.toString()},c}(),N=function(){function c(p){var h=this;this._textEditChanges=Object.create(null),p!==void 0?(this._workspaceEdit=p,p.documentChanges?(this._changeAnnotations=new S(p.changeAnnotations),p.changeAnnotations=this._changeAnnotations.all(),p.documentChanges.forEach(function(d){if(Ae.is(d)){var u=new W(d.edits,h._changeAnnotations);h._textEditChanges[d.textDocument.uri]=u}})):p.changes&&Object.keys(p.changes).forEach(function(d){var u=new W(p.changes[d]);h._textEditChanges[d]=u})):this._workspaceEdit={}}return i(c,"WorkspaceChange"),Object.defineProperty(c.prototype,"edit",{get:i(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),c.prototype.getTextEditChange=function(p){if(H.is(p)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h={uri:p.uri,version:p.version},d=this._textEditChanges[h.uri];if(!d){var u=[],v={textDocument:h,edits:u};this._workspaceEdit.documentChanges.push(v),d=new W(u,this._changeAnnotations),this._textEditChanges[h.uri]=d}return d}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var d=this._textEditChanges[p];if(!d){var u=[];this._workspaceEdit.changes[p]=u,d=new W(u),this._textEditChanges[p]=d}return d}},c.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new S,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},c.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},c.prototype.createFile=function(p,h,d){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;fe.is(h)||oe.is(h)?u=h:d=h;var v,M;if(u===void 0?v=Oe.create(p,d):(M=oe.is(u)?u:this._changeAnnotations.manage(u),v=Oe.create(p,d,M)),this._workspaceEdit.documentChanges.push(v),M!==void 0)return M},c.prototype.renameFile=function(p,h,d,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;fe.is(d)||oe.is(d)?v=d:u=d;var M,te;if(v===void 0?M=A.create(p,h,u):(te=oe.is(v)?v:this._changeAnnotations.manage(v),M=A.create(p,h,u,te)),this._workspaceEdit.documentChanges.push(M),te!==void 0)return te},c.prototype.deleteFile=function(p,h,d){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;fe.is(h)||oe.is(h)?u=h:d=h;var v,M;if(u===void 0?v=E.create(p,d):(M=oe.is(u)?u:this._changeAnnotations.manage(u),v=E.create(p,d,M)),this._workspaceEdit.documentChanges.push(v),M!==void 0)return M},c}();e.WorkspaceChange=N;var P;(function(c){function p(d){return{uri:d}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.string(u.uri)}i(h,"is"),c.is=h})(P||(e.TextDocumentIdentifier=P={}));var z;(function(c){function p(d,u){return{uri:d,version:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.string(u.uri)&&w.integer(u.version)}i(h,"is"),c.is=h})(z||(e.VersionedTextDocumentIdentifier=z={}));var H;(function(c){function p(d,u){return{uri:d,version:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.string(u.uri)&&(u.version===null||w.integer(u.version))}i(h,"is"),c.is=h})(H||(e.OptionalVersionedTextDocumentIdentifier=H={}));var U;(function(c){function p(d,u,v,M){return{uri:d,languageId:u,version:v,text:M}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.string(u.uri)&&w.string(u.languageId)&&w.integer(u.version)&&w.string(u.text)}i(h,"is"),c.is=h})(U||(e.TextDocumentItem=U={}));var X;(function(c){c.PlainText="plaintext",c.Markdown="markdown";function p(h){var d=h;return d===c.PlainText||d===c.Markdown}i(p,"is"),c.is=p})(X||(e.MarkupKind=X={}));var ee;(function(c){function p(h){var d=h;return w.objectLiteral(h)&&X.is(d.kind)&&w.string(d.value)}i(p,"is"),c.is=p})(ee||(e.MarkupContent=ee={}));var Ie;(function(c){c.Text=1,c.Method=2,c.Function=3,c.Constructor=4,c.Field=5,c.Variable=6,c.Class=7,c.Interface=8,c.Module=9,c.Property=10,c.Unit=11,c.Value=12,c.Enum=13,c.Keyword=14,c.Snippet=15,c.Color=16,c.File=17,c.Reference=18,c.Folder=19,c.EnumMember=20,c.Constant=21,c.Struct=22,c.Event=23,c.Operator=24,c.TypeParameter=25})(Ie||(e.CompletionItemKind=Ie={}));var le;(function(c){c.PlainText=1,c.Snippet=2})(le||(e.InsertTextFormat=le={}));var He;(function(c){c.Deprecated=1})(He||(e.CompletionItemTag=He={}));var gt;(function(c){function p(d,u,v){return{newText:d,insert:u,replace:v}}i(p,"create"),c.create=p;function h(d){var u=d;return u&&w.string(u.newText)&&l.is(u.insert)&&l.is(u.replace)}i(h,"is"),c.is=h})(gt||(e.InsertReplaceEdit=gt={}));var ur;(function(c){c.asIs=1,c.adjustIndentation=2})(ur||(e.InsertTextMode=ur={}));var lr;(function(c){function p(h){var d=h;return d&&(w.string(d.detail)||d.detail===void 0)&&(w.string(d.description)||d.description===void 0)}i(p,"is"),c.is=p})(lr||(e.CompletionItemLabelDetails=lr={}));var cr;(function(c){function p(h){return{label:h}}i(p,"create"),c.create=p})(cr||(e.CompletionItem=cr={}));var dr;(function(c){function p(h,d){return{items:h||[],isIncomplete:!!d}}i(p,"create"),c.create=p})(dr||(e.CompletionList=dr={}));var on;(function(c){function p(d){return d.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i(p,"fromPlainText"),c.fromPlainText=p;function h(d){var u=d;return w.string(u)||w.objectLiteral(u)&&w.string(u.language)&&w.string(u.value)}i(h,"is"),c.is=h})(on||(e.MarkedString=on={}));var at;(function(c){function p(h){var d=h;return!!d&&w.objectLiteral(d)&&(ee.is(d.contents)||on.is(d.contents)||w.typedArray(d.contents,on.is))&&(h.range===void 0||l.is(h.range))}i(p,"is"),c.is=p})(at||(e.Hover=at={}));var fr;(function(c){function p(h,d){return d?{label:h,documentation:d}:{label:h}}i(p,"create"),c.create=p})(fr||(e.ParameterInformation=fr={}));var mr;(function(c){function p(h,d){for(var u=[],v=2;v<arguments.length;v++)u[v-2]=arguments[v];var M={label:h};return w.defined(d)&&(M.documentation=d),w.defined(u)?M.parameters=u:M.parameters=[],M}i(p,"create"),c.create=p})(mr||(e.SignatureInformation=mr={}));var zt;(function(c){c.Text=1,c.Read=2,c.Write=3})(zt||(e.DocumentHighlightKind=zt={}));var gr;(function(c){function p(h,d){var u={range:h};return w.number(d)&&(u.kind=d),u}i(p,"create"),c.create=p})(gr||(e.DocumentHighlight=gr={}));var sn;(function(c){c.File=1,c.Module=2,c.Namespace=3,c.Package=4,c.Class=5,c.Method=6,c.Property=7,c.Field=8,c.Constructor=9,c.Enum=10,c.Interface=11,c.Function=12,c.Variable=13,c.Constant=14,c.String=15,c.Number=16,c.Boolean=17,c.Array=18,c.Object=19,c.Key=20,c.Null=21,c.EnumMember=22,c.Struct=23,c.Event=24,c.Operator=25,c.TypeParameter=26})(sn||(e.SymbolKind=sn={}));var _r;(function(c){c.Deprecated=1})(_r||(e.SymbolTag=_r={}));var wt;(function(c){function p(h,d,u,v,M){var te={name:h,kind:d,location:{uri:v,range:u}};return M&&(te.containerName=M),te}i(p,"create"),c.create=p})(wt||(e.SymbolInformation=wt={}));var Mt;(function(c){function p(h,d,u,v){return v!==void 0?{name:h,kind:d,location:{uri:u,range:v}}:{name:h,kind:d,location:{uri:u}}}i(p,"create"),c.create=p})(Mt||(e.WorkspaceSymbol=Mt={}));var pr;(function(c){function p(d,u,v,M,te,Re){var pe={name:d,detail:u,kind:v,range:M,selectionRange:te};return Re!==void 0&&(pe.children=Re),pe}i(p,"create"),c.create=p;function h(d){var u=d;return u&&w.string(u.name)&&w.number(u.kind)&&l.is(u.range)&&l.is(u.selectionRange)&&(u.detail===void 0||w.string(u.detail))&&(u.deprecated===void 0||w.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}i(h,"is"),c.is=h})(pr||(e.DocumentSymbol=pr={}));var hr;(function(c){c.Empty="",c.QuickFix="quickfix",c.Refactor="refactor",c.RefactorExtract="refactor.extract",c.RefactorInline="refactor.inline",c.RefactorRewrite="refactor.rewrite",c.Source="source",c.SourceOrganizeImports="source.organizeImports",c.SourceFixAll="source.fixAll"})(hr||(e.CodeActionKind=hr={}));var _t;(function(c){c.Invoked=1,c.Automatic=2})(_t||(e.CodeActionTriggerKind=_t={}));var Fn;(function(c){function p(d,u,v){var M={diagnostics:d};return u!=null&&(M.only=u),v!=null&&(M.triggerKind=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.typedArray(u.diagnostics,G.is)&&(u.only===void 0||w.typedArray(u.only,w.string))&&(u.triggerKind===void 0||u.triggerKind===_t.Invoked||u.triggerKind===_t.Automatic)}i(h,"is"),c.is=h})(Fn||(e.CodeActionContext=Fn={}));var qn;(function(c){function p(d,u,v){var M={title:d},te=!0;return typeof u=="string"?(te=!1,M.kind=u):K.is(u)?M.command=u:M.edit=u,te&&v!==void 0&&(M.kind=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return u&&w.string(u.title)&&(u.diagnostics===void 0||w.typedArray(u.diagnostics,G.is))&&(u.kind===void 0||w.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||K.is(u.command))&&(u.isPreferred===void 0||w.boolean(u.isPreferred))&&(u.edit===void 0||q.is(u.edit))}i(h,"is"),c.is=h})(qn||(e.CodeAction=qn={}));var an;(function(c){function p(d,u){var v={range:d};return w.defined(u)&&(v.data=u),v}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&l.is(u.range)&&(w.undefined(u.command)||K.is(u.command))}i(h,"is"),c.is=h})(an||(e.CodeLens=an={}));var jn;(function(c){function p(d,u){return{tabSize:d,insertSpaces:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&w.uinteger(u.tabSize)&&w.boolean(u.insertSpaces)}i(h,"is"),c.is=h})(jn||(e.FormattingOptions=jn={}));var Et;(function(c){function p(d,u,v){return{range:d,target:u,data:v}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&l.is(u.range)&&(w.undefined(u.target)||w.string(u.target))}i(h,"is"),c.is=h})(Et||(e.DocumentLink=Et={}));var _;(function(c){function p(d,u){return{range:d,parent:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&l.is(u.range)&&(u.parent===void 0||c.is(u.parent))}i(h,"is"),c.is=h})(_||(e.SelectionRange=_={}));var I;(function(c){c.namespace="namespace",c.type="type",c.class="class",c.enum="enum",c.interface="interface",c.struct="struct",c.typeParameter="typeParameter",c.parameter="parameter",c.variable="variable",c.property="property",c.enumMember="enumMember",c.event="event",c.function="function",c.method="method",c.macro="macro",c.keyword="keyword",c.modifier="modifier",c.comment="comment",c.string="string",c.number="number",c.regexp="regexp",c.operator="operator",c.decorator="decorator"})(I||(e.SemanticTokenTypes=I={}));var F;(function(c){c.declaration="declaration",c.definition="definition",c.readonly="readonly",c.static="static",c.deprecated="deprecated",c.abstract="abstract",c.async="async",c.modification="modification",c.documentation="documentation",c.defaultLibrary="defaultLibrary"})(F||(e.SemanticTokenModifiers=F={}));var V;(function(c){function p(h){var d=h;return w.objectLiteral(d)&&(d.resultId===void 0||typeof d.resultId=="string")&&Array.isArray(d.data)&&(d.data.length===0||typeof d.data[0]=="number")}i(p,"is"),c.is=p})(V||(e.SemanticTokens=V={}));var me;(function(c){function p(d,u){return{range:d,text:u}}i(p,"create"),c.create=p;function h(d){var u=d;return u!=null&&l.is(u.range)&&w.string(u.text)}i(h,"is"),c.is=h})(me||(e.InlineValueText=me={}));var de;(function(c){function p(d,u,v){return{range:d,variableName:u,caseSensitiveLookup:v}}i(p,"create"),c.create=p;function h(d){var u=d;return u!=null&&l.is(u.range)&&w.boolean(u.caseSensitiveLookup)&&(w.string(u.variableName)||u.variableName===void 0)}i(h,"is"),c.is=h})(de||(e.InlineValueVariableLookup=de={}));var be;(function(c){function p(d,u){return{range:d,expression:u}}i(p,"create"),c.create=p;function h(d){var u=d;return u!=null&&l.is(u.range)&&(w.string(u.expression)||u.expression===void 0)}i(h,"is"),c.is=h})(be||(e.InlineValueEvaluatableExpression=be={}));var we;(function(c){function p(d,u){return{frameId:d,stoppedLocation:u}}i(p,"create"),c.create=p;function h(d){var u=d;return w.defined(u)&&l.is(d.stoppedLocation)}i(h,"is"),c.is=h})(we||(e.InlineValueContext=we={}));var re;(function(c){c.Type=1,c.Parameter=2;function p(h){return h===1||h===2}i(p,"is"),c.is=p})(re||(e.InlayHintKind=re={}));var _e;(function(c){function p(d){return{value:d}}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&(u.tooltip===void 0||w.string(u.tooltip)||ee.is(u.tooltip))&&(u.location===void 0||f.is(u.location))&&(u.command===void 0||K.is(u.command))}i(h,"is"),c.is=h})(_e||(e.InlayHintLabelPart=_e={}));var ue;(function(c){function p(d,u,v){var M={position:d,label:u};return v!==void 0&&(M.kind=v),M}i(p,"create"),c.create=p;function h(d){var u=d;return w.objectLiteral(u)&&a.is(u.position)&&(w.string(u.label)||w.typedArray(u.label,_e.is))&&(u.kind===void 0||re.is(u.kind))&&u.textEdits===void 0||w.typedArray(u.textEdits,Y.is)&&(u.tooltip===void 0||w.string(u.tooltip)||ee.is(u.tooltip))&&(u.paddingLeft===void 0||w.boolean(u.paddingLeft))&&(u.paddingRight===void 0||w.boolean(u.paddingRight))}i(h,"is"),c.is=h})(ue||(e.InlayHint=ue={}));var Se;(function(c){function p(h){return{kind:"snippet",value:h}}i(p,"createSnippet"),c.createSnippet=p})(Se||(e.StringValue=Se={}));var Le;(function(c){function p(h,d,u,v){return{insertText:h,filterText:d,range:u,command:v}}i(p,"create"),c.create=p})(Le||(e.InlineCompletionItem=Le={}));var Xe;(function(c){function p(h){return{items:h}}i(p,"create"),c.create=p})(Xe||(e.InlineCompletionList=Xe={}));var yr;(function(c){c.Invoked=0,c.Automatic=1})(yr||(e.InlineCompletionTriggerKind=yr={}));var ba;(function(c){function p(h,d){return{range:h,text:d}}i(p,"create"),c.create=p})(ba||(e.SelectedCompletionInfo=ba={}));var va;(function(c){function p(h,d){return{triggerKind:h,selectedCompletionInfo:d}}i(p,"create"),c.create=p})(va||(e.InlineCompletionContext=va={}));var wa;(function(c){function p(h){var d=h;return w.objectLiteral(d)&&r.is(d.uri)&&w.string(d.name)}i(p,"is"),c.is=p})(wa||(e.WorkspaceFolder=wa={})),e.EOL=[`
`,`\r
`,"\r"];var Ea;(function(c){function p(v,M,te,Re){return new df(v,M,te,Re)}i(p,"create"),c.create=p;function h(v){var M=v;return!!(w.defined(M)&&w.string(M.uri)&&(w.undefined(M.languageId)||w.string(M.languageId))&&w.uinteger(M.lineCount)&&w.func(M.getText)&&w.func(M.positionAt)&&w.func(M.offsetAt))}i(h,"is"),c.is=h;function d(v,M){for(var te=v.getText(),Re=u(M,function(un,br){var Ta=un.range.start.line-br.range.start.line;return Ta===0?un.range.start.character-br.range.start.character:Ta}),pe=te.length,ut=Re.length-1;ut>=0;ut--){var lt=Re[ut],Tt=v.offsetAt(lt.range.start),se=v.offsetAt(lt.range.end);if(se<=pe)te=te.substring(0,Tt)+lt.newText+te.substring(se,te.length);else throw new Error("Overlapping edit");pe=Tt}return te}i(d,"applyEdits"),c.applyEdits=d;function u(v,M){if(v.length<=1)return v;var te=v.length/2|0,Re=v.slice(0,te),pe=v.slice(te);u(Re,M),u(pe,M);for(var ut=0,lt=0,Tt=0;ut<Re.length&&lt<pe.length;){var se=M(Re[ut],pe[lt]);se<=0?v[Tt++]=Re[ut++]:v[Tt++]=pe[lt++]}for(;ut<Re.length;)v[Tt++]=Re[ut++];for(;lt<pe.length;)v[Tt++]=pe[lt++];return v}i(u,"mergeSort")})(Ea||(e.TextDocument=Ea={}));var df=function(){function c(p,h,d,u){this._uri=p,this._languageId=h,this._version=d,this._content=u,this._lineOffsets=void 0}return i(c,"FullTextDocument"),Object.defineProperty(c.prototype,"uri",{get:i(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"languageId",{get:i(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"version",{get:i(function(){return this._version},"get"),enumerable:!1,configurable:!0}),c.prototype.getText=function(p){if(p){var h=this.offsetAt(p.start),d=this.offsetAt(p.end);return this._content.substring(h,d)}return this._content},c.prototype.update=function(p,h){this._content=p.text,this._version=h,this._lineOffsets=void 0},c.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var p=[],h=this._content,d=!0,u=0;u<h.length;u++){d&&(p.push(u),d=!1);var v=h.charAt(u);d=v==="\r"||v===`
`,v==="\r"&&u+1<h.length&&h.charAt(u+1)===`
`&&u++}d&&h.length>0&&p.push(h.length),this._lineOffsets=p}return this._lineOffsets},c.prototype.positionAt=function(p){p=Math.max(Math.min(p,this._content.length),0);var h=this.getLineOffsets(),d=0,u=h.length;if(u===0)return a.create(0,p);for(;d<u;){var v=Math.floor((d+u)/2);h[v]>p?u=v:d=v+1}var M=d-1;return a.create(M,p-h[M])},c.prototype.offsetAt=function(p){var h=this.getLineOffsets();if(p.line>=h.length)return this._content.length;if(p.line<0)return 0;var d=h[p.line],u=p.line+1<h.length?h[p.line+1]:this._content.length;return Math.max(Math.min(d+p.character,u),d)},Object.defineProperty(c.prototype,"lineCount",{get:i(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),c}(),w;(function(c){var p=Object.prototype.toString;function h(se){return typeof se<"u"}i(h,"defined"),c.defined=h;function d(se){return typeof se>"u"}i(d,"undefined"),c.undefined=d;function u(se){return se===!0||se===!1}i(u,"boolean"),c.boolean=u;function v(se){return p.call(se)==="[object String]"}i(v,"string"),c.string=v;function M(se){return p.call(se)==="[object Number]"}i(M,"number"),c.number=M;function te(se,un,br){return p.call(se)==="[object Number]"&&un<=se&&se<=br}i(te,"numberRange"),c.numberRange=te;function Re(se){return p.call(se)==="[object Number]"&&-2147483648<=se&&se<=2147483647}i(Re,"integer"),c.integer=Re;function pe(se){return p.call(se)==="[object Number]"&&0<=se&&se<=2147483647}i(pe,"uinteger"),c.uinteger=pe;function ut(se){return p.call(se)==="[object Function]"}i(ut,"func"),c.func=ut;function lt(se){return se!==null&&typeof se=="object"}i(lt,"objectLiteral"),c.objectLiteral=lt;function Tt(se,un){return Array.isArray(se)&&se.every(un)}i(Tt,"typedArray"),c.typedArray=Tt})(w||(w={}))})});var Ee=Z(Ze=>{"use strict";y();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.ProtocolNotificationType=Ze.ProtocolNotificationType0=Ze.ProtocolRequestType=Ze.ProtocolRequestType0=Ze.RegistrationType=Ze.MessageDirection=void 0;var xn=nn(),cl;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(cl||(Ze.MessageDirection=cl={}));var ra=class{static{i(this,"RegistrationType")}constructor(e){this.method=e}};Ze.RegistrationType=ra;var ia=class extends xn.RequestType0{static{i(this,"ProtocolRequestType0")}constructor(e){super(e)}};Ze.ProtocolRequestType0=ia;var oa=class extends xn.RequestType{static{i(this,"ProtocolRequestType")}constructor(e){super(e,xn.ParameterStructures.byName)}};Ze.ProtocolRequestType=oa;var sa=class extends xn.NotificationType0{static{i(this,"ProtocolNotificationType0")}constructor(e){super(e)}};Ze.ProtocolNotificationType0=sa;var aa=class extends xn.NotificationType{static{i(this,"ProtocolNotificationType")}constructor(e){super(e,xn.ParameterStructures.byName)}};Ze.ProtocolNotificationType=aa});var Ci=Z(Ce=>{"use strict";y();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.objectLiteral=Ce.typedArray=Ce.stringArray=Ce.array=Ce.func=Ce.error=Ce.number=Ce.string=Ce.boolean=void 0;function wg(t){return t===!0||t===!1}i(wg,"boolean");Ce.boolean=wg;function dl(t){return typeof t=="string"||t instanceof String}i(dl,"string");Ce.string=dl;function Eg(t){return typeof t=="number"||t instanceof Number}i(Eg,"number");Ce.number=Eg;function Tg(t){return t instanceof Error}i(Tg,"error");Ce.error=Tg;function Sg(t){return typeof t=="function"}i(Sg,"func");Ce.func=Sg;function fl(t){return Array.isArray(t)}i(fl,"array");Ce.array=fl;function Rg(t){return fl(t)&&t.every(e=>dl(e))}i(Rg,"stringArray");Ce.stringArray=Rg;function xg(t,e){return Array.isArray(t)&&t.every(e)}i(xg,"typedArray");Ce.typedArray=xg;function Ig(t){return t!==null&&typeof t=="object"}i(Ig,"objectLiteral");Ce.objectLiteral=Ig});var _l=Z(Li=>{"use strict";y();Object.defineProperty(Li,"__esModule",{value:!0});Li.ImplementationRequest=void 0;var ml=Ee(),gl;(function(t){t.method="textDocument/implementation",t.messageDirection=ml.MessageDirection.clientToServer,t.type=new ml.ProtocolRequestType(t.method)})(gl||(Li.ImplementationRequest=gl={}))});var yl=Z(Di=>{"use strict";y();Object.defineProperty(Di,"__esModule",{value:!0});Di.TypeDefinitionRequest=void 0;var pl=Ee(),hl;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=pl.MessageDirection.clientToServer,t.type=new pl.ProtocolRequestType(t.method)})(hl||(Di.TypeDefinitionRequest=hl={}))});var wl=Z(In=>{"use strict";y();Object.defineProperty(In,"__esModule",{value:!0});In.DidChangeWorkspaceFoldersNotification=In.WorkspaceFoldersRequest=void 0;var Ai=Ee(),bl;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Ai.MessageDirection.serverToClient,t.type=new Ai.ProtocolRequestType0(t.method)})(bl||(In.WorkspaceFoldersRequest=bl={}));var vl;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Ai.MessageDirection.clientToServer,t.type=new Ai.ProtocolNotificationType(t.method)})(vl||(In.DidChangeWorkspaceFoldersNotification=vl={}))});var Sl=Z(Oi=>{"use strict";y();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.ConfigurationRequest=void 0;var El=Ee(),Tl;(function(t){t.method="workspace/configuration",t.messageDirection=El.MessageDirection.serverToClient,t.type=new El.ProtocolRequestType(t.method)})(Tl||(Oi.ConfigurationRequest=Tl={}))});var Il=Z(Nn=>{"use strict";y();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ColorPresentationRequest=Nn.DocumentColorRequest=void 0;var Fi=Ee(),Rl;(function(t){t.method="textDocument/documentColor",t.messageDirection=Fi.MessageDirection.clientToServer,t.type=new Fi.ProtocolRequestType(t.method)})(Rl||(Nn.DocumentColorRequest=Rl={}));var xl;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Fi.MessageDirection.clientToServer,t.type=new Fi.ProtocolRequestType(t.method)})(xl||(Nn.ColorPresentationRequest=xl={}))});var kl=Z(Mn=>{"use strict";y();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.FoldingRangeRefreshRequest=Mn.FoldingRangeRequest=void 0;var qi=Ee(),Nl;(function(t){t.method="textDocument/foldingRange",t.messageDirection=qi.MessageDirection.clientToServer,t.type=new qi.ProtocolRequestType(t.method)})(Nl||(Mn.FoldingRangeRequest=Nl={}));var Ml;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=qi.MessageDirection.serverToClient,t.type=new qi.ProtocolRequestType0(t.method)})(Ml||(Mn.FoldingRangeRefreshRequest=Ml={}))});var Ll=Z(ji=>{"use strict";y();Object.defineProperty(ji,"__esModule",{value:!0});ji.DeclarationRequest=void 0;var Pl=Ee(),Cl;(function(t){t.method="textDocument/declaration",t.messageDirection=Pl.MessageDirection.clientToServer,t.type=new Pl.ProtocolRequestType(t.method)})(Cl||(ji.DeclarationRequest=Cl={}))});var Ol=Z(Ui=>{"use strict";y();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SelectionRangeRequest=void 0;var Dl=Ee(),Al;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Dl.MessageDirection.clientToServer,t.type=new Dl.ProtocolRequestType(t.method)})(Al||(Ui.SelectionRangeRequest=Al={}))});var Ul=Z(qt=>{"use strict";y();Object.defineProperty(qt,"__esModule",{value:!0});qt.WorkDoneProgressCancelNotification=qt.WorkDoneProgressCreateRequest=qt.WorkDoneProgress=void 0;var Ng=nn(),Wi=Ee(),Fl;(function(t){t.type=new Ng.ProgressType;function e(n){return n===t.type}i(e,"is"),t.is=e})(Fl||(qt.WorkDoneProgress=Fl={}));var ql;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Wi.MessageDirection.serverToClient,t.type=new Wi.ProtocolRequestType(t.method)})(ql||(qt.WorkDoneProgressCreateRequest=ql={}));var jl;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Wi.MessageDirection.clientToServer,t.type=new Wi.ProtocolNotificationType(t.method)})(jl||(qt.WorkDoneProgressCancelNotification=jl={}))});var zl=Z(jt=>{"use strict";y();Object.defineProperty(jt,"__esModule",{value:!0});jt.CallHierarchyOutgoingCallsRequest=jt.CallHierarchyIncomingCallsRequest=jt.CallHierarchyPrepareRequest=void 0;var kn=Ee(),Wl;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=kn.MessageDirection.clientToServer,t.type=new kn.ProtocolRequestType(t.method)})(Wl||(jt.CallHierarchyPrepareRequest=Wl={}));var Bl;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=kn.MessageDirection.clientToServer,t.type=new kn.ProtocolRequestType(t.method)})(Bl||(jt.CallHierarchyIncomingCallsRequest=Bl={}));var $l;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=kn.MessageDirection.clientToServer,t.type=new kn.ProtocolRequestType(t.method)})($l||(jt.CallHierarchyOutgoingCallsRequest=$l={}))});var Jl=Z(Qe=>{"use strict";y();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.SemanticTokensRefreshRequest=Qe.SemanticTokensRangeRequest=Qe.SemanticTokensDeltaRequest=Qe.SemanticTokensRequest=Qe.SemanticTokensRegistrationType=Qe.TokenFormat=void 0;var Nt=Ee(),Hl;(function(t){t.Relative="relative"})(Hl||(Qe.TokenFormat=Hl={}));var or;(function(t){t.method="textDocument/semanticTokens",t.type=new Nt.RegistrationType(t.method)})(or||(Qe.SemanticTokensRegistrationType=or={}));var Vl;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Nt.MessageDirection.clientToServer,t.type=new Nt.ProtocolRequestType(t.method),t.registrationMethod=or.method})(Vl||(Qe.SemanticTokensRequest=Vl={}));var Gl;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Nt.MessageDirection.clientToServer,t.type=new Nt.ProtocolRequestType(t.method),t.registrationMethod=or.method})(Gl||(Qe.SemanticTokensDeltaRequest=Gl={}));var Zl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Nt.MessageDirection.clientToServer,t.type=new Nt.ProtocolRequestType(t.method),t.registrationMethod=or.method})(Zl||(Qe.SemanticTokensRangeRequest=Zl={}));var Ql;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Nt.MessageDirection.serverToClient,t.type=new Nt.ProtocolRequestType0(t.method)})(Ql||(Qe.SemanticTokensRefreshRequest=Ql={}))});var Yl=Z(Bi=>{"use strict";y();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.ShowDocumentRequest=void 0;var Xl=Ee(),Kl;(function(t){t.method="window/showDocument",t.messageDirection=Xl.MessageDirection.serverToClient,t.type=new Xl.ProtocolRequestType(t.method)})(Kl||(Bi.ShowDocumentRequest=Kl={}))});var nc=Z($i=>{"use strict";y();Object.defineProperty($i,"__esModule",{value:!0});$i.LinkedEditingRangeRequest=void 0;var ec=Ee(),tc;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=ec.MessageDirection.clientToServer,t.type=new ec.ProtocolRequestType(t.method)})(tc||($i.LinkedEditingRangeRequest=tc={}))});var cc=Z(We=>{"use strict";y();Object.defineProperty(We,"__esModule",{value:!0});We.WillDeleteFilesRequest=We.DidDeleteFilesNotification=We.DidRenameFilesNotification=We.WillRenameFilesRequest=We.DidCreateFilesNotification=We.WillCreateFilesRequest=We.FileOperationPatternKind=void 0;var ot=Ee(),rc;(function(t){t.file="file",t.folder="folder"})(rc||(We.FileOperationPatternKind=rc={}));var ic;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolRequestType(t.method)})(ic||(We.WillCreateFilesRequest=ic={}));var oc;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolNotificationType(t.method)})(oc||(We.DidCreateFilesNotification=oc={}));var sc;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolRequestType(t.method)})(sc||(We.WillRenameFilesRequest=sc={}));var ac;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolNotificationType(t.method)})(ac||(We.DidRenameFilesNotification=ac={}));var uc;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolNotificationType(t.method)})(uc||(We.DidDeleteFilesNotification=uc={}));var lc;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=ot.MessageDirection.clientToServer,t.type=new ot.ProtocolRequestType(t.method)})(lc||(We.WillDeleteFilesRequest=lc={}))});var _c=Z(Ut=>{"use strict";y();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.MonikerRequest=Ut.MonikerKind=Ut.UniquenessLevel=void 0;var dc=Ee(),fc;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(fc||(Ut.UniquenessLevel=fc={}));var mc;(function(t){t.$import="import",t.$export="export",t.local="local"})(mc||(Ut.MonikerKind=mc={}));var gc;(function(t){t.method="textDocument/moniker",t.messageDirection=dc.MessageDirection.clientToServer,t.type=new dc.ProtocolRequestType(t.method)})(gc||(Ut.MonikerRequest=gc={}))});var bc=Z(Wt=>{"use strict";y();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.TypeHierarchySubtypesRequest=Wt.TypeHierarchySupertypesRequest=Wt.TypeHierarchyPrepareRequest=void 0;var Pn=Ee(),pc;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Pn.MessageDirection.clientToServer,t.type=new Pn.ProtocolRequestType(t.method)})(pc||(Wt.TypeHierarchyPrepareRequest=pc={}));var hc;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Pn.MessageDirection.clientToServer,t.type=new Pn.ProtocolRequestType(t.method)})(hc||(Wt.TypeHierarchySupertypesRequest=hc={}));var yc;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Pn.MessageDirection.clientToServer,t.type=new Pn.ProtocolRequestType(t.method)})(yc||(Wt.TypeHierarchySubtypesRequest=yc={}))});var Ec=Z(Cn=>{"use strict";y();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.InlineValueRefreshRequest=Cn.InlineValueRequest=void 0;var zi=Ee(),vc;(function(t){t.method="textDocument/inlineValue",t.messageDirection=zi.MessageDirection.clientToServer,t.type=new zi.ProtocolRequestType(t.method)})(vc||(Cn.InlineValueRequest=vc={}));var wc;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=zi.MessageDirection.serverToClient,t.type=new zi.ProtocolRequestType0(t.method)})(wc||(Cn.InlineValueRefreshRequest=wc={}))});var xc=Z(Bt=>{"use strict";y();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.InlayHintRefreshRequest=Bt.InlayHintResolveRequest=Bt.InlayHintRequest=void 0;var Ln=Ee(),Tc;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(Tc||(Bt.InlayHintRequest=Tc={}));var Sc;(function(t){t.method="inlayHint/resolve",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(Sc||(Bt.InlayHintResolveRequest=Sc={}));var Rc;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Ln.MessageDirection.serverToClient,t.type=new Ln.ProtocolRequestType0(t.method)})(Rc||(Bt.InlayHintRefreshRequest=Rc={}))});var Lc=Z(st=>{"use strict";y();Object.defineProperty(st,"__esModule",{value:!0});st.DiagnosticRefreshRequest=st.WorkspaceDiagnosticRequest=st.DocumentDiagnosticRequest=st.DocumentDiagnosticReportKind=st.DiagnosticServerCancellationData=void 0;var Cc=nn(),Mg=Ci(),Dn=Ee(),Ic;(function(t){function e(n){let r=n;return r&&Mg.boolean(r.retriggerRequest)}i(e,"is"),t.is=e})(Ic||(st.DiagnosticServerCancellationData=Ic={}));var Nc;(function(t){t.Full="full",t.Unchanged="unchanged"})(Nc||(st.DocumentDiagnosticReportKind=Nc={}));var Mc;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Dn.MessageDirection.clientToServer,t.type=new Dn.ProtocolRequestType(t.method),t.partialResult=new Cc.ProgressType})(Mc||(st.DocumentDiagnosticRequest=Mc={}));var kc;(function(t){t.method="workspace/diagnostic",t.messageDirection=Dn.MessageDirection.clientToServer,t.type=new Dn.ProtocolRequestType(t.method),t.partialResult=new Cc.ProgressType})(kc||(st.WorkspaceDiagnosticRequest=kc={}));var Pc;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Dn.MessageDirection.serverToClient,t.type=new Dn.ProtocolRequestType0(t.method)})(Pc||(st.DiagnosticRefreshRequest=Pc={}))});var Uc=Z(xe=>{"use strict";y();Object.defineProperty(xe,"__esModule",{value:!0});xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=void 0;var sr=Pi(),mt=Ci(),yt=Ee(),ua;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}i(e,"is"),t.is=e})(ua||(xe.NotebookCellKind=ua={}));var la;(function(t){function e(o,s){let a={executionOrder:o};return(s===!0||s===!1)&&(a.success=s),a}i(e,"create"),t.create=e;function n(o){let s=o;return mt.objectLiteral(s)&&sr.uinteger.is(s.executionOrder)&&(s.success===void 0||mt.boolean(s.success))}i(n,"is"),t.is=n;function r(o,s){return o===s?!0:o==null||s===null||s===void 0?!1:o.executionOrder===s.executionOrder&&o.success===s.success}i(r,"equals"),t.equals=r})(la||(xe.ExecutionSummary=la={}));var Hi;(function(t){function e(s,a){return{kind:s,document:a}}i(e,"create"),t.create=e;function n(s){let a=s;return mt.objectLiteral(a)&&ua.is(a.kind)&&sr.DocumentUri.is(a.document)&&(a.metadata===void 0||mt.objectLiteral(a.metadata))}i(n,"is"),t.is=n;function r(s,a){let l=new Set;return s.document!==a.document&&l.add("document"),s.kind!==a.kind&&l.add("kind"),s.executionSummary!==a.executionSummary&&l.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!o(s.metadata,a.metadata)&&l.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!la.equals(s.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}i(r,"diff"),t.diff=r;function o(s,a){if(s===a)return!0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return!1;let l=Array.isArray(s),f=Array.isArray(a);if(l!==f)return!1;if(l&&f){if(s.length!==a.length)return!1;for(let g=0;g<s.length;g++)if(!o(s[g],a[g]))return!1}if(mt.objectLiteral(s)&&mt.objectLiteral(a)){let g=Object.keys(s),b=Object.keys(a);if(g.length!==b.length||(g.sort(),b.sort(),!o(g,b)))return!1;for(let T=0;T<g.length;T++){let x=g[T];if(!o(s[x],a[x]))return!1}}return!0}i(o,"equalsMetadata")})(Hi||(xe.NotebookCell=Hi={}));var Dc;(function(t){function e(r,o,s,a){return{uri:r,notebookType:o,version:s,cells:a}}i(e,"create"),t.create=e;function n(r){let o=r;return mt.objectLiteral(o)&&mt.string(o.uri)&&sr.integer.is(o.version)&&mt.typedArray(o.cells,Hi.is)}i(n,"is"),t.is=n})(Dc||(xe.NotebookDocument=Dc={}));var An;(function(t){t.method="notebookDocument/sync",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.RegistrationType(t.method)})(An||(xe.NotebookDocumentSyncRegistrationType=An={}));var Ac;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(Ac||(xe.DidOpenNotebookDocumentNotification=Ac={}));var Oc;(function(t){function e(r){let o=r;return mt.objectLiteral(o)&&sr.uinteger.is(o.start)&&sr.uinteger.is(o.deleteCount)&&(o.cells===void 0||mt.typedArray(o.cells,Hi.is))}i(e,"is"),t.is=e;function n(r,o,s){let a={start:r,deleteCount:o};return s!==void 0&&(a.cells=s),a}i(n,"create"),t.create=n})(Oc||(xe.NotebookCellArrayChange=Oc={}));var Fc;(function(t){t.method="notebookDocument/didChange",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(Fc||(xe.DidChangeNotebookDocumentNotification=Fc={}));var qc;(function(t){t.method="notebookDocument/didSave",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(qc||(xe.DidSaveNotebookDocumentNotification=qc={}));var jc;(function(t){t.method="notebookDocument/didClose",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(jc||(xe.DidCloseNotebookDocumentNotification=jc={}))});var $c=Z(Vi=>{"use strict";y();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.InlineCompletionRequest=void 0;var Wc=Ee(),Bc;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Wc.MessageDirection.clientToServer,t.type=new Wc.ProtocolRequestType(t.method)})(Bc||(Vi.InlineCompletionRequest=Bc={}))});var nf=Z(m=>{"use strict";y();Object.defineProperty(m,"__esModule",{value:!0});m.WorkspaceSymbolRequest=m.CodeActionResolveRequest=m.CodeActionRequest=m.DocumentSymbolRequest=m.DocumentHighlightRequest=m.ReferencesRequest=m.DefinitionRequest=m.SignatureHelpRequest=m.SignatureHelpTriggerKind=m.HoverRequest=m.CompletionResolveRequest=m.CompletionRequest=m.CompletionTriggerKind=m.PublishDiagnosticsNotification=m.WatchKind=m.RelativePattern=m.FileChangeType=m.DidChangeWatchedFilesNotification=m.WillSaveTextDocumentWaitUntilRequest=m.WillSaveTextDocumentNotification=m.TextDocumentSaveReason=m.DidSaveTextDocumentNotification=m.DidCloseTextDocumentNotification=m.DidChangeTextDocumentNotification=m.TextDocumentContentChangeEvent=m.DidOpenTextDocumentNotification=m.TextDocumentSyncKind=m.TelemetryEventNotification=m.LogMessageNotification=m.ShowMessageRequest=m.ShowMessageNotification=m.MessageType=m.DidChangeConfigurationNotification=m.ExitNotification=m.ShutdownRequest=m.InitializedNotification=m.InitializeErrorCodes=m.InitializeRequest=m.WorkDoneProgressOptions=m.TextDocumentRegistrationOptions=m.StaticRegistrationOptions=m.PositionEncodingKind=m.FailureHandlingKind=m.ResourceOperationKind=m.UnregistrationRequest=m.RegistrationRequest=m.DocumentSelector=m.NotebookCellTextDocumentFilter=m.NotebookDocumentFilter=m.TextDocumentFilter=void 0;m.MonikerRequest=m.MonikerKind=m.UniquenessLevel=m.WillDeleteFilesRequest=m.DidDeleteFilesNotification=m.WillRenameFilesRequest=m.DidRenameFilesNotification=m.WillCreateFilesRequest=m.DidCreateFilesNotification=m.FileOperationPatternKind=m.LinkedEditingRangeRequest=m.ShowDocumentRequest=m.SemanticTokensRegistrationType=m.SemanticTokensRefreshRequest=m.SemanticTokensRangeRequest=m.SemanticTokensDeltaRequest=m.SemanticTokensRequest=m.TokenFormat=m.CallHierarchyPrepareRequest=m.CallHierarchyOutgoingCallsRequest=m.CallHierarchyIncomingCallsRequest=m.WorkDoneProgressCancelNotification=m.WorkDoneProgressCreateRequest=m.WorkDoneProgress=m.SelectionRangeRequest=m.DeclarationRequest=m.FoldingRangeRefreshRequest=m.FoldingRangeRequest=m.ColorPresentationRequest=m.DocumentColorRequest=m.ConfigurationRequest=m.DidChangeWorkspaceFoldersNotification=m.WorkspaceFoldersRequest=m.TypeDefinitionRequest=m.ImplementationRequest=m.ApplyWorkspaceEditRequest=m.ExecuteCommandRequest=m.PrepareRenameRequest=m.RenameRequest=m.PrepareSupportDefaultBehavior=m.DocumentOnTypeFormattingRequest=m.DocumentRangesFormattingRequest=m.DocumentRangeFormattingRequest=m.DocumentFormattingRequest=m.DocumentLinkResolveRequest=m.DocumentLinkRequest=m.CodeLensRefreshRequest=m.CodeLensResolveRequest=m.CodeLensRequest=m.WorkspaceSymbolResolveRequest=void 0;m.InlineCompletionRequest=m.DidCloseNotebookDocumentNotification=m.DidSaveNotebookDocumentNotification=m.DidChangeNotebookDocumentNotification=m.NotebookCellArrayChange=m.DidOpenNotebookDocumentNotification=m.NotebookDocumentSyncRegistrationType=m.NotebookDocument=m.NotebookCell=m.ExecutionSummary=m.NotebookCellKind=m.DiagnosticRefreshRequest=m.WorkspaceDiagnosticRequest=m.DocumentDiagnosticRequest=m.DocumentDiagnosticReportKind=m.DiagnosticServerCancellationData=m.InlayHintRefreshRequest=m.InlayHintResolveRequest=m.InlayHintRequest=m.InlineValueRefreshRequest=m.InlineValueRequest=m.TypeHierarchySupertypesRequest=m.TypeHierarchySubtypesRequest=m.TypeHierarchyPrepareRequest=void 0;var O=Ee(),zc=Pi(),De=Ci(),kg=_l();Object.defineProperty(m,"ImplementationRequest",{enumerable:!0,get:i(function(){return kg.ImplementationRequest},"get")});var Pg=yl();Object.defineProperty(m,"TypeDefinitionRequest",{enumerable:!0,get:i(function(){return Pg.TypeDefinitionRequest},"get")});var Kd=wl();Object.defineProperty(m,"WorkspaceFoldersRequest",{enumerable:!0,get:i(function(){return Kd.WorkspaceFoldersRequest},"get")});Object.defineProperty(m,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:i(function(){return Kd.DidChangeWorkspaceFoldersNotification},"get")});var Cg=Sl();Object.defineProperty(m,"ConfigurationRequest",{enumerable:!0,get:i(function(){return Cg.ConfigurationRequest},"get")});var Yd=Il();Object.defineProperty(m,"DocumentColorRequest",{enumerable:!0,get:i(function(){return Yd.DocumentColorRequest},"get")});Object.defineProperty(m,"ColorPresentationRequest",{enumerable:!0,get:i(function(){return Yd.ColorPresentationRequest},"get")});var ef=kl();Object.defineProperty(m,"FoldingRangeRequest",{enumerable:!0,get:i(function(){return ef.FoldingRangeRequest},"get")});Object.defineProperty(m,"FoldingRangeRefreshRequest",{enumerable:!0,get:i(function(){return ef.FoldingRangeRefreshRequest},"get")});var Lg=Ll();Object.defineProperty(m,"DeclarationRequest",{enumerable:!0,get:i(function(){return Lg.DeclarationRequest},"get")});var Dg=Ol();Object.defineProperty(m,"SelectionRangeRequest",{enumerable:!0,get:i(function(){return Dg.SelectionRangeRequest},"get")});var ga=Ul();Object.defineProperty(m,"WorkDoneProgress",{enumerable:!0,get:i(function(){return ga.WorkDoneProgress},"get")});Object.defineProperty(m,"WorkDoneProgressCreateRequest",{enumerable:!0,get:i(function(){return ga.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(m,"WorkDoneProgressCancelNotification",{enumerable:!0,get:i(function(){return ga.WorkDoneProgressCancelNotification},"get")});var _a=zl();Object.defineProperty(m,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:i(function(){return _a.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(m,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:i(function(){return _a.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(m,"CallHierarchyPrepareRequest",{enumerable:!0,get:i(function(){return _a.CallHierarchyPrepareRequest},"get")});var On=Jl();Object.defineProperty(m,"TokenFormat",{enumerable:!0,get:i(function(){return On.TokenFormat},"get")});Object.defineProperty(m,"SemanticTokensRequest",{enumerable:!0,get:i(function(){return On.SemanticTokensRequest},"get")});Object.defineProperty(m,"SemanticTokensDeltaRequest",{enumerable:!0,get:i(function(){return On.SemanticTokensDeltaRequest},"get")});Object.defineProperty(m,"SemanticTokensRangeRequest",{enumerable:!0,get:i(function(){return On.SemanticTokensRangeRequest},"get")});Object.defineProperty(m,"SemanticTokensRefreshRequest",{enumerable:!0,get:i(function(){return On.SemanticTokensRefreshRequest},"get")});Object.defineProperty(m,"SemanticTokensRegistrationType",{enumerable:!0,get:i(function(){return On.SemanticTokensRegistrationType},"get")});var Ag=Yl();Object.defineProperty(m,"ShowDocumentRequest",{enumerable:!0,get:i(function(){return Ag.ShowDocumentRequest},"get")});var Og=nc();Object.defineProperty(m,"LinkedEditingRangeRequest",{enumerable:!0,get:i(function(){return Og.LinkedEditingRangeRequest},"get")});var rn=cc();Object.defineProperty(m,"FileOperationPatternKind",{enumerable:!0,get:i(function(){return rn.FileOperationPatternKind},"get")});Object.defineProperty(m,"DidCreateFilesNotification",{enumerable:!0,get:i(function(){return rn.DidCreateFilesNotification},"get")});Object.defineProperty(m,"WillCreateFilesRequest",{enumerable:!0,get:i(function(){return rn.WillCreateFilesRequest},"get")});Object.defineProperty(m,"DidRenameFilesNotification",{enumerable:!0,get:i(function(){return rn.DidRenameFilesNotification},"get")});Object.defineProperty(m,"WillRenameFilesRequest",{enumerable:!0,get:i(function(){return rn.WillRenameFilesRequest},"get")});Object.defineProperty(m,"DidDeleteFilesNotification",{enumerable:!0,get:i(function(){return rn.DidDeleteFilesNotification},"get")});Object.defineProperty(m,"WillDeleteFilesRequest",{enumerable:!0,get:i(function(){return rn.WillDeleteFilesRequest},"get")});var pa=_c();Object.defineProperty(m,"UniquenessLevel",{enumerable:!0,get:i(function(){return pa.UniquenessLevel},"get")});Object.defineProperty(m,"MonikerKind",{enumerable:!0,get:i(function(){return pa.MonikerKind},"get")});Object.defineProperty(m,"MonikerRequest",{enumerable:!0,get:i(function(){return pa.MonikerRequest},"get")});var ha=bc();Object.defineProperty(m,"TypeHierarchyPrepareRequest",{enumerable:!0,get:i(function(){return ha.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(m,"TypeHierarchySubtypesRequest",{enumerable:!0,get:i(function(){return ha.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(m,"TypeHierarchySupertypesRequest",{enumerable:!0,get:i(function(){return ha.TypeHierarchySupertypesRequest},"get")});var tf=Ec();Object.defineProperty(m,"InlineValueRequest",{enumerable:!0,get:i(function(){return tf.InlineValueRequest},"get")});Object.defineProperty(m,"InlineValueRefreshRequest",{enumerable:!0,get:i(function(){return tf.InlineValueRefreshRequest},"get")});var ya=xc();Object.defineProperty(m,"InlayHintRequest",{enumerable:!0,get:i(function(){return ya.InlayHintRequest},"get")});Object.defineProperty(m,"InlayHintResolveRequest",{enumerable:!0,get:i(function(){return ya.InlayHintResolveRequest},"get")});Object.defineProperty(m,"InlayHintRefreshRequest",{enumerable:!0,get:i(function(){return ya.InlayHintRefreshRequest},"get")});var ar=Lc();Object.defineProperty(m,"DiagnosticServerCancellationData",{enumerable:!0,get:i(function(){return ar.DiagnosticServerCancellationData},"get")});Object.defineProperty(m,"DocumentDiagnosticReportKind",{enumerable:!0,get:i(function(){return ar.DocumentDiagnosticReportKind},"get")});Object.defineProperty(m,"DocumentDiagnosticRequest",{enumerable:!0,get:i(function(){return ar.DocumentDiagnosticRequest},"get")});Object.defineProperty(m,"WorkspaceDiagnosticRequest",{enumerable:!0,get:i(function(){return ar.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(m,"DiagnosticRefreshRequest",{enumerable:!0,get:i(function(){return ar.DiagnosticRefreshRequest},"get")});var bt=Uc();Object.defineProperty(m,"NotebookCellKind",{enumerable:!0,get:i(function(){return bt.NotebookCellKind},"get")});Object.defineProperty(m,"ExecutionSummary",{enumerable:!0,get:i(function(){return bt.ExecutionSummary},"get")});Object.defineProperty(m,"NotebookCell",{enumerable:!0,get:i(function(){return bt.NotebookCell},"get")});Object.defineProperty(m,"NotebookDocument",{enumerable:!0,get:i(function(){return bt.NotebookDocument},"get")});Object.defineProperty(m,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:i(function(){return bt.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(m,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:i(function(){return bt.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(m,"NotebookCellArrayChange",{enumerable:!0,get:i(function(){return bt.NotebookCellArrayChange},"get")});Object.defineProperty(m,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:i(function(){return bt.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(m,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:i(function(){return bt.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(m,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:i(function(){return bt.DidCloseNotebookDocumentNotification},"get")});var Fg=$c();Object.defineProperty(m,"InlineCompletionRequest",{enumerable:!0,get:i(function(){return Fg.InlineCompletionRequest},"get")});var ca;(function(t){function e(n){let r=n;return De.string(r)||De.string(r.language)||De.string(r.scheme)||De.string(r.pattern)}i(e,"is"),t.is=e})(ca||(m.TextDocumentFilter=ca={}));var da;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(De.string(r.notebookType)||De.string(r.scheme)||De.string(r.pattern))}i(e,"is"),t.is=e})(da||(m.NotebookDocumentFilter=da={}));var fa;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(De.string(r.notebook)||da.is(r.notebook))&&(r.language===void 0||De.string(r.language))}i(e,"is"),t.is=e})(fa||(m.NotebookCellTextDocumentFilter=fa={}));var ma;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!De.string(r)&&!ca.is(r)&&!fa.is(r))return!1;return!0}i(e,"is"),t.is=e})(ma||(m.DocumentSelector=ma={}));var Hc;(function(t){t.method="client/registerCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Hc||(m.RegistrationRequest=Hc={}));var Vc;(function(t){t.method="client/unregisterCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Vc||(m.UnregistrationRequest=Vc={}));var Gc;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Gc||(m.ResourceOperationKind=Gc={}));var Zc;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Zc||(m.FailureHandlingKind=Zc={}));var Qc;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Qc||(m.PositionEncodingKind=Qc={}));var Jc;(function(t){function e(n){let r=n;return r&&De.string(r.id)&&r.id.length>0}i(e,"hasId"),t.hasId=e})(Jc||(m.StaticRegistrationOptions=Jc={}));var Xc;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||ma.is(r.documentSelector))}i(e,"is"),t.is=e})(Xc||(m.TextDocumentRegistrationOptions=Xc={}));var Kc;(function(t){function e(r){let o=r;return De.objectLiteral(o)&&(o.workDoneProgress===void 0||De.boolean(o.workDoneProgress))}i(e,"is"),t.is=e;function n(r){let o=r;return o&&De.boolean(o.workDoneProgress)}i(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Kc||(m.WorkDoneProgressOptions=Kc={}));var Yc;(function(t){t.method="initialize",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Yc||(m.InitializeRequest=Yc={}));var ed;(function(t){t.unknownProtocolVersion=1})(ed||(m.InitializeErrorCodes=ed={}));var td;(function(t){t.method="initialized",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(td||(m.InitializedNotification=td={}));var nd;(function(t){t.method="shutdown",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType0(t.method)})(nd||(m.ShutdownRequest=nd={}));var rd;(function(t){t.method="exit",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType0(t.method)})(rd||(m.ExitNotification=rd={}));var id;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(id||(m.DidChangeConfigurationNotification=id={}));var od;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(od||(m.MessageType=od={}));var sd;(function(t){t.method="window/showMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(sd||(m.ShowMessageNotification=sd={}));var ad;(function(t){t.method="window/showMessageRequest",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(ad||(m.ShowMessageRequest=ad={}));var ud;(function(t){t.method="window/logMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(ud||(m.LogMessageNotification=ud={}));var ld;(function(t){t.method="telemetry/event",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(ld||(m.TelemetryEventNotification=ld={}));var cd;(function(t){t.None=0,t.Full=1,t.Incremental=2})(cd||(m.TextDocumentSyncKind=cd={}));var dd;(function(t){t.method="textDocument/didOpen",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(dd||(m.DidOpenTextDocumentNotification=dd={}));var fd;(function(t){function e(r){let o=r;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}i(e,"isIncremental"),t.isIncremental=e;function n(r){let o=r;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}i(n,"isFull"),t.isFull=n})(fd||(m.TextDocumentContentChangeEvent=fd={}));var md;(function(t){t.method="textDocument/didChange",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(md||(m.DidChangeTextDocumentNotification=md={}));var gd;(function(t){t.method="textDocument/didClose",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(gd||(m.DidCloseTextDocumentNotification=gd={}));var _d;(function(t){t.method="textDocument/didSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(_d||(m.DidSaveTextDocumentNotification=_d={}));var pd;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(pd||(m.TextDocumentSaveReason=pd={}));var hd;(function(t){t.method="textDocument/willSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(hd||(m.WillSaveTextDocumentNotification=hd={}));var yd;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(yd||(m.WillSaveTextDocumentWaitUntilRequest=yd={}));var bd;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(bd||(m.DidChangeWatchedFilesNotification=bd={}));var vd;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(vd||(m.FileChangeType=vd={}));var wd;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(zc.URI.is(r.baseUri)||zc.WorkspaceFolder.is(r.baseUri))&&De.string(r.pattern)}i(e,"is"),t.is=e})(wd||(m.RelativePattern=wd={}));var Ed;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Ed||(m.WatchKind=Ed={}));var Td;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Td||(m.PublishDiagnosticsNotification=Td={}));var Sd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Sd||(m.CompletionTriggerKind=Sd={}));var Rd;(function(t){t.method="textDocument/completion",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Rd||(m.CompletionRequest=Rd={}));var xd;(function(t){t.method="completionItem/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(xd||(m.CompletionResolveRequest=xd={}));var Id;(function(t){t.method="textDocument/hover",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Id||(m.HoverRequest=Id={}));var Nd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Nd||(m.SignatureHelpTriggerKind=Nd={}));var Md;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Md||(m.SignatureHelpRequest=Md={}));var kd;(function(t){t.method="textDocument/definition",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(kd||(m.DefinitionRequest=kd={}));var Pd;(function(t){t.method="textDocument/references",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Pd||(m.ReferencesRequest=Pd={}));var Cd;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Cd||(m.DocumentHighlightRequest=Cd={}));var Ld;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Ld||(m.DocumentSymbolRequest=Ld={}));var Dd;(function(t){t.method="textDocument/codeAction",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Dd||(m.CodeActionRequest=Dd={}));var Ad;(function(t){t.method="codeAction/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Ad||(m.CodeActionResolveRequest=Ad={}));var Od;(function(t){t.method="workspace/symbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Od||(m.WorkspaceSymbolRequest=Od={}));var Fd;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Fd||(m.WorkspaceSymbolResolveRequest=Fd={}));var qd;(function(t){t.method="textDocument/codeLens",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(qd||(m.CodeLensRequest=qd={}));var jd;(function(t){t.method="codeLens/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(jd||(m.CodeLensResolveRequest=jd={}));var Ud;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType0(t.method)})(Ud||(m.CodeLensRefreshRequest=Ud={}));var Wd;(function(t){t.method="textDocument/documentLink",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Wd||(m.DocumentLinkRequest=Wd={}));var Bd;(function(t){t.method="documentLink/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Bd||(m.DocumentLinkResolveRequest=Bd={}));var $d;(function(t){t.method="textDocument/formatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})($d||(m.DocumentFormattingRequest=$d={}));var zd;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(zd||(m.DocumentRangeFormattingRequest=zd={}));var Hd;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Hd||(m.DocumentRangesFormattingRequest=Hd={}));var Vd;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Vd||(m.DocumentOnTypeFormattingRequest=Vd={}));var Gd;(function(t){t.Identifier=1})(Gd||(m.PrepareSupportDefaultBehavior=Gd={}));var Zd;(function(t){t.method="textDocument/rename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Zd||(m.RenameRequest=Zd={}));var Qd;(function(t){t.method="textDocument/prepareRename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Qd||(m.PrepareRenameRequest=Qd={}));var Jd;(function(t){t.method="workspace/executeCommand",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Jd||(m.ExecuteCommandRequest=Jd={}));var Xd;(function(t){t.method="workspace/applyEdit",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType("workspace/applyEdit")})(Xd||(m.ApplyWorkspaceEditRequest=Xd={}))});var of=Z(Gi=>{"use strict";y();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.createProtocolConnection=void 0;var rf=nn();function qg(t,e,n,r){return rf.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,rf.createMessageConnection)(t,e,n,r)}i(qg,"createProtocolConnection");Gi.createProtocolConnection=qg});var af=Z(Je=>{"use strict";y();var jg=Je&&Je.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Zi=Je&&Je.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&jg(e,t,n)};Object.defineProperty(Je,"__esModule",{value:!0});Je.LSPErrorCodes=Je.createProtocolConnection=void 0;Zi(nn(),Je);Zi(Pi(),Je);Zi(Ee(),Je);Zi(nf(),Je);var Ug=of();Object.defineProperty(Je,"createProtocolConnection",{enumerable:!0,get:i(function(){return Ug.createProtocolConnection},"get")});var sf;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(sf||(Je.LSPErrorCodes=sf={}))});var lf=Z(vt=>{"use strict";y();var Wg=vt&&vt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uf=vt&&vt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Wg(e,t,n)};Object.defineProperty(vt,"__esModule",{value:!0});vt.createProtocolConnection=void 0;var Bg=na();uf(na(),vt);uf(af(),vt);function $g(t,e,n,r){return(0,Bg.createMessageConnection)(t,e,n,r)}i($g,"createProtocolConnection");vt.createProtocolConnection=$g});var Vg={};yf(Vg,{IndexWorker:()=>Ji,isIndexWorker:()=>zg,runIndexWorker:()=>Hg});module.exports=bf(Vg);y();y();y();var Ht={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};y();y();var Ra=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],xa={".php":[".blade"]},Ia=Object.keys(Ht).flatMap(t=>Ht[t].extensions);y();var ka=require("os"),Ki=require("path");y();var Na;(()=>{"use strict";var t={975:A=>{function E(S){if(typeof S!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(S))}i(E,"e");function q(S,N){for(var P,z="",H=0,U=-1,X=0,ee=0;ee<=S.length;++ee){if(ee<S.length)P=S.charCodeAt(ee);else{if(P===47)break;P=47}if(P===47){if(!(U===ee-1||X===1))if(U!==ee-1&&X===2){if(z.length<2||H!==2||z.charCodeAt(z.length-1)!==46||z.charCodeAt(z.length-2)!==46){if(z.length>2){var Ie=z.lastIndexOf("/");if(Ie!==z.length-1){Ie===-1?(z="",H=0):H=(z=z.slice(0,Ie)).length-1-z.lastIndexOf("/"),U=ee,X=0;continue}}else if(z.length===2||z.length===1){z="",H=0,U=ee,X=0;continue}}N&&(z.length>0?z+="/..":z="..",H=2)}else z.length>0?z+="/"+S.slice(U+1,ee):z=S.slice(U+1,ee),H=ee-U-1;U=ee,X=0}else P===46&&X!==-1?++X:X=-1}return z}i(q,"r");var W={resolve:i(function(){for(var S,N="",P=!1,z=arguments.length-1;z>=-1&&!P;z--){var H;z>=0?H=arguments[z]:(S===void 0&&(S=process.cwd()),H=S),E(H),H.length!==0&&(N=H+"/"+N,P=H.charCodeAt(0)===47)}return N=q(N,!P),P?N.length>0?"/"+N:"/":N.length>0?N:"."},"resolve"),normalize:i(function(S){if(E(S),S.length===0)return".";var N=S.charCodeAt(0)===47,P=S.charCodeAt(S.length-1)===47;return(S=q(S,!N)).length!==0||N||(S="."),S.length>0&&P&&(S+="/"),N?"/"+S:S},"normalize"),isAbsolute:i(function(S){return E(S),S.length>0&&S.charCodeAt(0)===47},"isAbsolute"),join:i(function(){if(arguments.length===0)return".";for(var S,N=0;N<arguments.length;++N){var P=arguments[N];E(P),P.length>0&&(S===void 0?S=P:S+="/"+P)}return S===void 0?".":W.normalize(S)},"join"),relative:i(function(S,N){if(E(S),E(N),S===N||(S=W.resolve(S))===(N=W.resolve(N)))return"";for(var P=1;P<S.length&&S.charCodeAt(P)===47;++P);for(var z=S.length,H=z-P,U=1;U<N.length&&N.charCodeAt(U)===47;++U);for(var X=N.length-U,ee=H<X?H:X,Ie=-1,le=0;le<=ee;++le){if(le===ee){if(X>ee){if(N.charCodeAt(U+le)===47)return N.slice(U+le+1);if(le===0)return N.slice(U+le)}else H>ee&&(S.charCodeAt(P+le)===47?Ie=le:le===0&&(Ie=0));break}var He=S.charCodeAt(P+le);if(He!==N.charCodeAt(U+le))break;He===47&&(Ie=le)}var gt="";for(le=P+Ie+1;le<=z;++le)le!==z&&S.charCodeAt(le)!==47||(gt.length===0?gt+="..":gt+="/..");return gt.length>0?gt+N.slice(U+Ie):(U+=Ie,N.charCodeAt(U)===47&&++U,N.slice(U))},"relative"),_makeLong:i(function(S){return S},"_makeLong"),dirname:i(function(S){if(E(S),S.length===0)return".";for(var N=S.charCodeAt(0),P=N===47,z=-1,H=!0,U=S.length-1;U>=1;--U)if((N=S.charCodeAt(U))===47){if(!H){z=U;break}}else H=!1;return z===-1?P?"/":".":P&&z===1?"//":S.slice(0,z)},"dirname"),basename:i(function(S,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');E(S);var P,z=0,H=-1,U=!0;if(N!==void 0&&N.length>0&&N.length<=S.length){if(N.length===S.length&&N===S)return"";var X=N.length-1,ee=-1;for(P=S.length-1;P>=0;--P){var Ie=S.charCodeAt(P);if(Ie===47){if(!U){z=P+1;break}}else ee===-1&&(U=!1,ee=P+1),X>=0&&(Ie===N.charCodeAt(X)?--X==-1&&(H=P):(X=-1,H=ee))}return z===H?H=ee:H===-1&&(H=S.length),S.slice(z,H)}for(P=S.length-1;P>=0;--P)if(S.charCodeAt(P)===47){if(!U){z=P+1;break}}else H===-1&&(U=!1,H=P+1);return H===-1?"":S.slice(z,H)},"basename"),extname:i(function(S){E(S);for(var N=-1,P=0,z=-1,H=!0,U=0,X=S.length-1;X>=0;--X){var ee=S.charCodeAt(X);if(ee!==47)z===-1&&(H=!1,z=X+1),ee===46?N===-1?N=X:U!==1&&(U=1):N!==-1&&(U=-1);else if(!H){P=X+1;break}}return N===-1||z===-1||U===0||U===1&&N===z-1&&N===P+1?"":S.slice(N,z)},"extname"),format:i(function(S){if(S===null||typeof S!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof S);return function(N,P){var z=P.dir||P.root,H=P.base||(P.name||"")+(P.ext||"");return z?z===P.root?z+H:z+"/"+H:H}(0,S)},"format"),parse:i(function(S){E(S);var N={root:"",dir:"",base:"",ext:"",name:""};if(S.length===0)return N;var P,z=S.charCodeAt(0),H=z===47;H?(N.root="/",P=1):P=0;for(var U=-1,X=0,ee=-1,Ie=!0,le=S.length-1,He=0;le>=P;--le)if((z=S.charCodeAt(le))!==47)ee===-1&&(Ie=!1,ee=le+1),z===46?U===-1?U=le:He!==1&&(He=1):U!==-1&&(He=-1);else if(!Ie){X=le+1;break}return U===-1||ee===-1||He===0||He===1&&U===ee-1&&U===X+1?ee!==-1&&(N.base=N.name=X===0&&H?S.slice(1,ee):S.slice(X,ee)):(X===0&&H?(N.name=S.slice(1,U),N.base=S.slice(1,ee)):(N.name=S.slice(X,U),N.base=S.slice(X,ee)),N.ext=S.slice(U,ee)),X>0?N.dir=S.slice(0,X-1):H&&(N.dir="/"),N},"parse"),sep:"/",delimiter:":",win32:null,posix:null};W.posix=W,A.exports=W}},e={};function n(A){var E=e[A];if(E!==void 0)return E.exports;var q=e[A]={exports:{}};return t[A](q,q.exports,n),q.exports}i(n,"r"),n.d=(A,E)=>{for(var q in E)n.o(E,q)&&!n.o(A,q)&&Object.defineProperty(A,q,{enumerable:!0,get:E[q]})},n.o=(A,E)=>Object.prototype.hasOwnProperty.call(A,E),n.r=A=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:i(()=>x,"URI"),Utils:i(()=>Oe,"Utils")}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function f(A,E){if(!A.scheme&&E)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${A.authority}", path: "${A.path}", query: "${A.query}", fragment: "${A.fragment}"}`);if(A.scheme&&!s.test(A.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(A.path){if(A.authority){if(!a.test(A.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(A.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}i(f,"a");let g="",b="/",T=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class x{static{i(this,"l")}static isUri(E){return E instanceof x||!!E&&typeof E.authority=="string"&&typeof E.fragment=="string"&&typeof E.path=="string"&&typeof E.query=="string"&&typeof E.scheme=="string"&&typeof E.fsPath=="string"&&typeof E.with=="function"&&typeof E.toString=="function"}scheme;authority;path;query;fragment;constructor(E,q,W,S,N,P=!1){typeof E=="object"?(this.scheme=E.scheme||g,this.authority=E.authority||g,this.path=E.path||g,this.query=E.query||g,this.fragment=E.fragment||g):(this.scheme=function(z,H){return z||H?z:"file"}(E,P),this.authority=q||g,this.path=function(z,H){switch(z){case"https":case"http":case"file":H?H[0]!==b&&(H=b+H):H=b}return H}(this.scheme,W||g),this.query=S||g,this.fragment=N||g,f(this,P))}get fsPath(){return k(this,!1)}with(E){if(!E)return this;let{scheme:q,authority:W,path:S,query:N,fragment:P}=E;return q===void 0?q=this.scheme:q===null&&(q=g),W===void 0?W=this.authority:W===null&&(W=g),S===void 0?S=this.path:S===null&&(S=g),N===void 0?N=this.query:N===null&&(N=g),P===void 0?P=this.fragment:P===null&&(P=g),q===this.scheme&&W===this.authority&&S===this.path&&N===this.query&&P===this.fragment?this:new B(q,W,S,N,P)}static parse(E,q=!1){let W=T.exec(E);return W?new B(W[2]||g,fe(W[4]||g),fe(W[5]||g),fe(W[7]||g),fe(W[9]||g),q):new B(g,g,g,g,g)}static file(E){let q=g;if(o&&(E=E.replace(/\\/g,b)),E[0]===b&&E[1]===b){let W=E.indexOf(b,2);W===-1?(q=E.substring(2),E=b):(q=E.substring(2,W),E=E.substring(W)||b)}return new B("file",q,E,g,g)}static from(E){let q=new B(E.scheme,E.authority,E.path,E.query,E.fragment);return f(q,!0),q}toString(E=!1){return G(this,E)}toJSON(){return this}static revive(E){if(E){if(E instanceof x)return E;{let q=new B(E);return q._formatted=E.external,q._fsPath=E._sep===L?E.fsPath:null,q}}return E}}let L=o?1:void 0;class B extends x{static{i(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=k(this,!1)),this._fsPath}toString(E=!1){return E?G(this,!0):(this._formatted||(this._formatted=G(this,!1)),this._formatted)}toJSON(){let E={$mid:1};return this._fsPath&&(E.fsPath=this._fsPath,E._sep=L),this._formatted&&(E.external=this._formatted),this.path&&(E.path=this.path),this.scheme&&(E.scheme=this.scheme),this.authority&&(E.authority=this.authority),this.query&&(E.query=this.query),this.fragment&&(E.fragment=this.fragment),E}}let D={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function j(A,E,q){let W,S=-1;for(let N=0;N<A.length;N++){let P=A.charCodeAt(N);if(P>=97&&P<=122||P>=65&&P<=90||P>=48&&P<=57||P===45||P===46||P===95||P===126||E&&P===47||q&&P===91||q&&P===93||q&&P===58)S!==-1&&(W+=encodeURIComponent(A.substring(S,N)),S=-1),W!==void 0&&(W+=A.charAt(N));else{W===void 0&&(W=A.substr(0,N));let z=D[P];z!==void 0?(S!==-1&&(W+=encodeURIComponent(A.substring(S,N)),S=-1),W+=z):S===-1&&(S=N)}}return S!==-1&&(W+=encodeURIComponent(A.substring(S))),W!==void 0?W:A}i(j,"m");function $(A){let E;for(let q=0;q<A.length;q++){let W=A.charCodeAt(q);W===35||W===63?(E===void 0&&(E=A.substr(0,q)),E+=D[W]):E!==void 0&&(E+=A[q])}return E!==void 0?E:A}i($,"y");function k(A,E){let q;return q=A.authority&&A.path.length>1&&A.scheme==="file"?`//${A.authority}${A.path}`:A.path.charCodeAt(0)===47&&(A.path.charCodeAt(1)>=65&&A.path.charCodeAt(1)<=90||A.path.charCodeAt(1)>=97&&A.path.charCodeAt(1)<=122)&&A.path.charCodeAt(2)===58?E?A.path.substr(1):A.path[1].toLowerCase()+A.path.substr(2):A.path,o&&(q=q.replace(/\//g,"\\")),q}i(k,"v");function G(A,E){let q=E?$:j,W="",{scheme:S,authority:N,path:P,query:z,fragment:H}=A;if(S&&(W+=S,W+=":"),(N||S==="file")&&(W+=b,W+=b),N){let U=N.indexOf("@");if(U!==-1){let X=N.substr(0,U);N=N.substr(U+1),U=X.lastIndexOf(":"),U===-1?W+=q(X,!1,!1):(W+=q(X.substr(0,U),!1,!1),W+=":",W+=q(X.substr(U+1),!1,!0)),W+="@"}N=N.toLowerCase(),U=N.lastIndexOf(":"),U===-1?W+=q(N,!1,!0):(W+=q(N.substr(0,U),!1,!0),W+=N.substr(U))}if(P){if(P.length>=3&&P.charCodeAt(0)===47&&P.charCodeAt(2)===58){let U=P.charCodeAt(1);U>=65&&U<=90&&(P=`/${String.fromCharCode(U+32)}:${P.substr(3)}`)}else if(P.length>=2&&P.charCodeAt(1)===58){let U=P.charCodeAt(0);U>=65&&U<=90&&(P=`${String.fromCharCode(U+32)}:${P.substr(2)}`)}W+=q(P,!0,!1)}return z&&(W+="?",W+=q(z,!1,!1)),H&&(W+="#",W+=E?H:j(H,!1,!1)),W}i(G,"b");function K(A){try{return decodeURIComponent(A)}catch{return A.length>3?A.substr(0,3)+K(A.substr(3)):A}}i(K,"C");let Y=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(A){return A.match(Y)?A.replace(Y,E=>K(E)):A}i(fe,"w");var oe=n(975);let ge=oe.posix||oe,Ae="/";var Oe;(function(A){A.joinPath=function(E,...q){return E.with({path:ge.join(E.path,...q)})},A.resolvePath=function(E,...q){let W=E.path,S=!1;W[0]!==Ae&&(W=Ae+W,S=!0);let N=ge.resolve(W,...q);return S&&N[0]===Ae&&!E.authority&&(N=N.substring(1)),E.with({path:N})},A.dirname=function(E){if(E.path.length===0||E.path===Ae)return E;let q=ge.dirname(E.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),E.with({path:q})},A.basename=function(E){return ge.basename(E.path)},A.extname=function(E){return ge.extname(E.path)}})(Oe||(Oe={})),Na=r})();var{URI:Xi,Utils:vf}=Na;function Pa(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+Pa(t.substring(3)):t}}i(Pa,"decodeURIComponentGraceful");var Ma=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function wf(t){return t.match(Ma)?t.replace(Ma,e=>Pa(e)):t}i(wf,"percentDecode");function Ef(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Xi.parse(e[1]+e[2],!0):Xi.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}i(Ef,"parseUri");var Tf=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Pt(t){let e=Ef(t);if(!Tf.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,ka.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,Ki.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}i(Pt,"fsPath");function vr(t){try{return Pt(t)}catch{return}}i(vr,"getFsPath");function Ca(t){return wf((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}i(Ca,"basename");var Yi=kt(require("node:path"));var cn=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{i(this,"Language")}},Wn=class{static{i(this,"LanguageDetection")}},eo=new Map,ln=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(Ht)){for(let r of e)eo.set(r,[...eo.get(r)??[],t]);for(let r of n??[])ln.set(r,[...ln.get(r)??[],t])}var to=class extends Wn{static{i(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Ca(e.uri),r=Yi.extname(n).toLowerCase(),o=this.extensionWithoutTemplateLanguage(n,r),s=this.detectLanguageId(n,o),a=this.computeFullyQualifiedExtension(r,o);return s?new cn(s.languageId,s.isGuess,a):new cn(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,n){if(Ra.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),o=Yi.extname(r).toLowerCase();if(o.length>0&&Ia.includes(o)&&this.isExtensionValidForTemplateLanguage(n,o))return o}return n}isExtensionValidForTemplateLanguage(e,n){let r=xa[e];return!r||r.includes(n)}detectLanguageId(e,n){if(ln.has(e))return{languageId:ln.get(e)[0],isGuess:!1};let r=eo.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),ln.has(e))return{languageId:ln.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},no=class extends Wn{constructor(n){super();this.delegate=n}static{i(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),o=r.languageId;return o==="c"||o==="cpp"?new cn("cpp",r.isGuess,r.fileExtension):r}},ro=class extends Wn{constructor(n){super();this.delegate=n}static{i(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new cn(n.languageId,!0,""):this.delegate.detectLanguage(n)}},c_=new no(new ro(new to));y();y();y();y();function St(t){if(t.isCancellationRequested)throw new io}i(St,"throwIfCancellationRequested");var io=class extends Error{static{i(this,"CancellationError")}constructor(){super(Sf),this.name=this.message}},Sf="Canceled",wr=class{constructor(){this.items=[]}static{i(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};y();y();var dn=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{i(this,"CopilotPromptLoadFailure")}};y();var La=kt(require("node:fs/promises")),Er=kt(require("node:path"));async function Tr(t){return await La.readFile(oo(t))}i(Tr,"readFile");function oo(t){return Er.default.resolve(Er.default.extname(__filename)!==".ts"?__dirname:Er.default.resolve(__dirname,"../../dist"),t)}i(oo,"locateFile");var Sr=kt(Da());var Aa={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function Rf(t){if(!(t in Aa))throw new Error(`Unrecognized language: ${t}`);return Aa[t]}i(Rf,"languageIdToWasmLanguage");var so=new Map;async function xf(t){let e;try{e=await Tr(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new dn(`Could not load tree-sitter-${t}.wasm`,n):n}return Sr.default.Language.load(e)}i(xf,"loadWasmLanguage");function If(t){let e=Rf(t);if(!so.has(e)){let n=xf(e);so.set(e,n)}return so.get(e)}i(If,"getLanguage");var ao=class extends Error{static{i(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function Oa(t,e){await Sr.default.init({locateFile:i(s=>oo(s),"locateFile")});let n;try{n=new Sr.default}catch(s){throw s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"&&s.message.includes("table index is out of bounds")?new ao(`Could not init Parse for language <${t}>`,s):s}let r=await If(t);n.setLanguage(r);let o=n.parse(e);return n.delete(),o}i(Oa,"parseTreeSitter");function Vt(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}i(Vt,"isTypeDefinition");var he=class t{static{i(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],o=this.start;for(o=qa(e,e.length,o),Fa(r,n);o<this.end;)e[o]!=="\r"&&e[o]!==`
`?r.push(e[o++]):e[o]==="\r"&&o<e.length&&e[o+1]!==`
`||e[o]===`
`?(r.push(`
`),o=qa(e,e.length,++o),Fa(r,n)):o++;return r.join("")}};function Fa(t,e){for(let n=0;n<e;n++)t.push(" ")}i(Fa,"appendIndent");function qa(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}i(qa,"consumeIndent");var tt=class{constructor(e,n,r,o,s,a,l,f,g){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=o;this.nameRange=s;this.bodyRange=a;this.extentRange=l;this.kind=f;this.refKind=g;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{i(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ne=class t{constructor(){this.queriesCache=new Map}static{i(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await Oa(this.languageId,e),o=r.getLanguage(),a=this.getOrCreateQuery(o,n).matches(r.rootNode);return{tree:r,matches:a}}async executeQuery(e,n,r){let o;try{o=await this.findMatches(n,r);let s=new wr,a=[];for(let l of o.matches){let f=this.createSymbolRange(s,e,n,l.captures);f&&a.push(f)}return a}catch{return[]}finally{o?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,o){let s=0,a=0,l=0,f=0,g=0,b=0,T=0,x=0,L=null,B=null;for(let $=0;$<o.length;$++){let k=o[$].name;k==="name"?(g=o[$].node.startIndex,b=o[$].node.endIndex):k==="reference"?(g=o[$].node.startIndex,b=o[$].node.endIndex,l=o[$].node.startIndex,f=o[$].node.endIndex,L=k):k==="body"?(T=o[$].node.startIndex,x=o[$].node.endIndex):k==="comment"?(s=s===0?o[$].node.startIndex:Math.min(s,o[$].node.startIndex),a=Math.max(a,o[$].node.endIndex)):k==="receiver"?B=he.fromBounds(o[$].node.startIndex,o[$].node.endIndex).getText(r):(l=o[$].node.startIndex,f=o[$].node.endIndex,L=k)}L==="definition.module.filescoped"&&(x=r.length,f=x);let D=he.fromBounds(l,f),j=l>0||f>0||g>0||b>0?new tt(n,"","",he.fromBounds(s,a),he.fromBounds(g,b),he.fromBounds(T,x),D,t.kindFromString(L),0):null;if(j){t.updateScopesForSymbol(e,j);let $=j.nameRange.getText(r),k=this.createNameFromScopes(r,e.toArray());return k=B?`${B}.${k}`:k,new tt(n,k,$.substring($.lastIndexOf(".")+1),j.commentRange,j.nameRange,j.bodyRange,j.extentRange,j.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var Rr=class extends Ne{static{i(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,Nf)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},xr=class extends Ne{static{i(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,kf)}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,Pf),s=o.filter(f=>f.kind!==9),a=o.filter(f=>f.kind===9&&f.extentRange.containsRange(r)),l=[];for(let f of a)l.push(...s.filter(g=>f.extentRange.containsRange(g.extentRange)));return l}},Ir=class extends Ne{static{i(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,Mf),o=new Set;try{r.matches.forEach(s=>{let a,l,f;for(let g of s.captures)g.name==="import.name"?a=g:g.name==="alias"?l=g:g.name==="import"&&(f=g);if(a&&f){let g=this.cleanQuotedString(a.node.text),b=a.node.startIndex+1,T=a.node.endIndex-1,x=l?new he(l.node.startIndex,l.node.endIndex-l.node.startIndex):new he(b,T-b),L=new he(f.node.startIndex,f.node.endIndex-f.node.startIndex),B=he.empty,D=he.empty,j=g.substring(g.lastIndexOf("/")+1);o.add(new tt(e,g,j,B,x,D,L,17,0))}})}finally{r.tree.delete()}return o.size>0?[...o]:[]}},Nf=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,Mf=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,kf=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,Pf=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;y();var Mr=class extends Ne{static{i(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,Cf)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},kr=class extends Ne{static{i(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,Df)}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,Af),s=o.filter(f=>f.kind!==9),a=o.filter(f=>f.kind===9&&f.extentRange.containsRange(r)),l=[];for(let f of a)l.push(...s.filter(g=>f.extentRange.containsRange(g.extentRange)));return l}},Pr=class extends Ne{static{i(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){return(await this.executeQuery(e,n,Lf)).filter(o=>o.kind===0)}},Cf=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,Lf=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,Df=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,Af=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;y();var Of=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Cr=class extends Ne{static{i(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,Ff)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Lr=class extends Ne{static{i(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,qf)).filter(o=>!Of.has(o.unqualifiedName))}};var Ff=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,qf=`
(call_expression function: (_) @name) @reference
`;y();var jf=new Set(["int","str","float","bool","list","dict","tuple","set"]),Dr=class extends Ne{static{i(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,Uf)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Ar=class extends Ne{static{i(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,Wf)).filter(o=>!jf.has(o.unqualifiedName))}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,$f),s=o.filter(f=>f.kind!==9),a=o.filter(f=>f.kind===9&&f.extentRange.containsRange(r)),l=[];for(let f of a)l.push(...s.filter(g=>f.extentRange.containsRange(g.extentRange)));return l}},Or=class extends Ne{static{i(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,Bf),o=new Set;try{r.matches.forEach(s=>{let a,l,f,g;for(let b of s.captures)b.name==="import.name"?a=b:b.name==="import.module"?f=b:b.name==="alias"?l=b:b.name==="import"&&(g=b);if(f&&g){let b=a||f,T=l?new he(l.node.startIndex,l.node.endIndex-l.node.startIndex):new he(b.node.startIndex,g.node.endIndex-b.node.endIndex),x=new he(g.node.startIndex,g.node.endIndex-g.node.startIndex),L=he.empty,B=he.empty,D=b.node.text,j=D.split(".").pop()||D,$;a?$=`${f.node.text}.${a.node.text}`:$=f.node.text,o.add(new tt(e,$,j,L,T,B,x,17,0))}})}finally{r.tree.delete()}return o.size>0?[...o]:[]}},Uf=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,Wf=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Bf=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,$f=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;y();var zf=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),fn=class extends Ne{static{i(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,Hf)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},mn=class extends Ne{static{i(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,Vf)).filter(o=>!zf.has(o.unqualifiedName))}async extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}};var Hf=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,Vf=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;y();var Gf=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Fr=class extends fn{static{i(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,Zf),super.extractSymbols(e,n)]).then(([r,o])=>[...r,...o])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},qr=class extends mn{static{i(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,o]=await Promise.all([this.executeQuery(e,n,Qf),super.extractReferences(e,n)]);return[...r.filter(s=>!Gf.has(s.unqualifiedName)),...o]}},Zf=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,Qf=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var jr=[{symbolExtractor:new Mr,referenceExtractor:new kr,importExtractor:new Pr,languageId:"java"},{symbolExtractor:new Rr,referenceExtractor:new xr,importExtractor:new Ir,languageId:"go"},{symbolExtractor:new Dr,referenceExtractor:new Ar,importExtractor:new Or,languageId:"python"},{symbolExtractor:new fn,referenceExtractor:new mn,languageId:"typescript"},{symbolExtractor:new Fr,referenceExtractor:new qr,languageId:"typescriptreact"},{symbolExtractor:new Cr,referenceExtractor:new Lr,languageId:"javascript"}];var ja=new Map(jr.map(t=>[t.languageId,t.referenceExtractor])),Ua=new Map(jr.map(t=>[t.languageId,t.symbolExtractor])),Wa=new Map(jr.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),Rp=jr.map(t=>Ht[t.languageId].extensions).flat();y();y();y();y();y();y();y();y();y();function uo(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}i(uo,"virtualNode");function Ba(t,e,n,r,o){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:o}}i(Ba,"lineNode");function lo(t){return{type:"blank",lineNumber:t,subs:[]}}i(lo,"blankNode");function Ur(t){return{type:"top",indentation:-1,subs:t??[]}}i(Ur,"topNode");function Fe(t){return t.type==="blank"}i(Fe,"isBlank");function Gt(t){return t.type==="line"}i(Gt,"isLine");function Zt(t){return t.type==="virtual"}i(Zt,"isVirtual");y();function $a(t,e){return Be(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}i($a,"clearLabelsIf");function Qt(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>Qt(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>Qt(n,e)),label:t.label?e(t.label):void 0}}}i(Qt,"mapLabels");function Be(t,e,n){function r(o){n==="topDown"&&e(o),o.subs.forEach(s=>{r(s)}),n==="bottomUp"&&e(o)}i(r,"_visit"),r(t)}i(Be,"visitTree");function co(t,e,n,r){let o=e;function s(a){o=n(a,o)}return i(s,"visitor"),Be(t,s,r),o}i(co,"foldTree");function Wr(t,e,n){let r=i(s=>{if(n!==void 0&&n(s))return s;{let a=s.subs.map(r).filter(l=>l!==void 0);return s.subs=a,e(s)}},"rebuild"),o=r(t);return o!==void 0?o:Ur()}i(Wr,"rebuildTree");y();function Xf(t){let e=t.split(`
`),n=e.map(g=>g.match(/^\s*/)[0].length),r=e.map(g=>g.trimLeft());function o(g){let[b,T]=s(g+1,n[g]);return[Ba(n[g],g,r[g],b),T]}i(o,"parseNode");function s(g,b){let T,x=[],L=g,B;for(;L<r.length&&(r[L]===""||n[L]>b);)if(r[L]==="")B===void 0&&(B=L),L+=1;else{if(B!==void 0){for(let D=B;D<L;D++)x.push(lo(D));B=void 0}[T,L]=o(L),x.push(T)}return B!==void 0&&(L=B),[x,L]}i(s,"parseSubs");let[a,l]=s(0,-1),f=l;for(;f<r.length&&r[f]==="";)a.push(lo(f)),f+=1;if(f<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${f} out of ${r.length}`);return Ur(a)}i(Xf,"parseRaw");function Bn(t,e){function n(r){if(Gt(r)){let o=e.find(s=>s.matches(r.sourceLine));o&&(r.label=o.label)}}i(n,"visitor"),Be(t,n,"bottomUp")}i(Bn,"labelLines");function Br(t){function e(n){if(Zt(n)&&n.label===void 0){let r=n.subs.filter(o=>!Fe(o));r.length===1&&(n.label=r[0].label)}}i(e,"visitor"),Be(t,e,"bottomUp")}i(Br,"labelVirtualInherited");function $n(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=i(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}i($n,"buildLabelRules");function fo(t){let n=Wr(t,i(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let o=[],s;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],f=r.subs[a-1];if(l.label==="opener"&&f!==void 0&&Gt(f))f.subs.push(l),l.subs.forEach(g=>f.subs.push(g)),l.subs=[];else if(l.label==="closer"&&s!==void 0&&(Gt(l)||Zt(l))&&l.indentation>=s.indentation){let g=o.length-1;for(;g>0&&Fe(o[g]);)g-=1;if(s.subs.push(...o.splice(g+1)),l.subs.length>0){let b=s.subs.findIndex(B=>B.label!=="newVirtual"),T=s.subs.slice(0,b),x=s.subs.slice(b),L=x.length>0?[uo(l.indentation,x,"newVirtual")]:[];s.subs=[...T,...L,l]}else s.subs.push(l)}else o.push(l),Fe(l)||(s=l)}return r.subs=o,r},"rebuilder"));return $a(t,r=>r==="newVirtual"),n}i(fo,"combineClosersAndOpeners");function za(t,e=Fe,n){return Wr(t,i(function(o){if(o.subs.length<=1)return o;let s=[],a=[],l,f=!1;function g(b=!1){if(l!==void 0&&(s.length>0||!b)){let T=uo(l,a,n);s.push(T)}else a.forEach(T=>s.push(T))}i(g,"flushBlockIntoNewSubs");for(let b=0;b<o.subs.length;b++){let T=o.subs[b],x=e(T);!x&&f&&(g(),a=[]),f=x,a.push(T),Fe(T)||(l=l??T.indentation)}return g(!0),o.subs=s,o},"rebuilder"))}i(za,"groupBlocks");function Jt(t){return Wr(t,i(function(n){return Zt(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&Zt(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}i(Jt,"flattenVirtual");var Kf={opener:/^[[({]/,closer:/^[\])}]/},Yf=$n(Kf),Ha={};function mo(t,e){Ha[t]=e}i(mo,"registerLanguageSpecificParser");function $r(t,e){let n=Xf(t),r=Ha[e??""];return r?r(n):(Bn(n,Yf),fo(n))}i($r,"parseTree");var em={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},tm=$n(em);function Va(t){let e=t;return Bn(e,tm),e=fo(e),e=Jt(e),Br(e),Be(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!Fe(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}i(Va,"processJava");y();var nm={heading:/^# /,subheading:/^## /,subsubheading:/### /},rm=$n(nm);function Ga(t){let e=t;if(Bn(e,rm),Fe(e))return e;function n(s){if(s.label==="heading")return 1;if(s.label==="subheading")return 2;if(s.label==="subsubheading")return 3}i(n,"headingLevel");let r=[e],o=[...e.subs];e.subs=[];for(let s of o){let a=n(s);if(a===void 0||Fe(s))r[r.length-1].subs.push(s);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(s),r[a]=s;r.length>a+1;)r.pop()}}return e=za(e),e=Jt(e),Br(e),e}i(Ga,"processMarkdown");y();function Za(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}i(Za,"deparseLine");mo("markdown",Ga);mo("java",Va);y();y();var gn=kt(uu());var Qr=new Map;function nt(t="o200k_base"){let e=Qr.get(t);return e!==void 0||(e=Qr.get("o200k_base"),e!==void 0)?e:new xo}i(nt,"getTokenizer");async function bm(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await Tr(t),n=new Map,r=[];for(let o=0;o<e.length;o++){if(e[o]!==255||r.length===0){r.push(e[o]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}i(bm,"parseTikTokenNoIndex");var So=class t{constructor(e){this._tokenizer=e}static{i(this,"TTokenizer")}static async create(e){try{let n=(0,gn.createTokenizer)(await bm(`resources/${e}.tiktoken.noindex`),(0,gn.getSpecialTokensByEncoder)(e),(0,gn.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new dn("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,s=Math.min(e.length,n*r),a=e.slice(-s),l=this.tokenize(a);for(;l.length<n+2&&s<e.length;)s=Math.min(e.length,s+n*o),a=e.slice(-s),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,s=Math.min(e.length,n*r),a=e.slice(0,s),l=this.tokenize(a);for(;l.length<n+2&&s<e.length;)s=Math.min(e.length,s+n*o),a=e.slice(0,s),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}},Ro=class{constructor(){this.hash=i(e=>{let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);n=(n<<5)-n+o,n&=n&65535}return n},"hash")}static{i(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}},vm={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},To=4,xo=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{i(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(n=>{let r=0;for(let o=0;o<n.length;o++)r=r*Math.pow(10,To)+n.charCodeAt(o);return r})}detokenize(e){return e.map(n=>{let r=[],o=n.toString();for(;o.length>0;){let s=o.slice(-To),a=String.fromCharCode(parseInt(s));r.unshift(a),o=o.slice(0,-To)}return r.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?vm[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(o,s)=>s)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(o,s)=>s)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}};async function lu(t){try{let e=await So.create(t);Qr.set(t,e)}catch{}}i(lu,"setTokenizer");var Kh=(async()=>{Qr.set("mock",new Ro),await Promise.all([lu("cl100k_base"),lu("o200k_base")])})();var wm={worthUp:.9,worthSibling:.88,worthDown:.8};function Io(t,e,n=nt(),r=wm){let o=Qt(t,s=>s?1:void 0);return Be(o,s=>{if(Fe(s))return;let a=s.subs.reduce((l,f)=>Math.max(l,f.label??0),0);s.label=Math.max(s.label??0,a*r.worthUp)},"bottomUp"),Be(o,s=>{if(Fe(s))return;let a=s.subs.map(g=>g.label??0),l=[...a];for(let g=0;g<a.length;g++)a[g]!==0&&(l=l.map((b,T)=>Math.max(b,Math.pow(r.worthSibling,Math.abs(g-T))*a[g])));let f=s.label;f!==void 0&&(l=l.map(g=>Math.max(g,r.worthDown*f))),s.subs.forEach((g,b)=>g.label=l[b])},"topDown"),Em(o,e,n)}i(Io,"fromTreeWithFocussedLines");function Em(t,e,n=nt()){let r=co(t,[],(o,s)=>((o.type==="line"||o.type==="blank")&&s.push(o.type==="line"?[Za(o).trimEnd(),o.label??0]:["",o.label??0]),s),"topDown");return new Xt(r,e,n)}i(Em,"fromTreeWithValuedLines");function cu(t,e=!0,n=!0,r,o=nt()){let s=typeof t=="string"?$r(t):$r(t.source,t.languageId);Jt(s);let a=Qt(s,l=>e&&l!=="closer");return Be(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Be(a,l=>{if(l.label){let f=!1;for(let g of[...l.subs].reverse())g.label&&!f?f=!0:g.label=!1}else for(let f of l.subs)f.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),n&&Be(a,l=>{l.label||=(Gt(l)||Fe(l))&&l.lineNumber==0},"topDown"),Io(a,r,o)}i(cu,"elidableTextForSourceCode");y();var Hn=class t{constructor(e,n,r,o="strict",s){this.text=e;this._value=n;this._cost=r;this.metadata=s;this.markedForRemoval=!1;if(e.includes(`
`)&&o!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&o!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&o!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(o=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{i(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>nt().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Xt=class t{constructor(e,n,r=nt()){this.metadata=n;this.tokenizer=r;this.lines=[];let o=[];for(let s of e){let a=Array.isArray(s)?s[1]:1,l=Array.isArray(s)?s[0]:s;typeof l=="string"?l.split(`
`).forEach(f=>o.push(new Hn(f,a,r.tokenLength(f+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(f=>o.push(f.copy().adjustValue(a))):"source"in l&&"languageId"in l&&cu(l).lines.forEach(f=>o.push(f.copy().adjustValue(a)))}this.lines=o}static{i(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>nt().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,o="removeLeastDesirable",s=this.tokenizer,a="topToBottom"){if(s.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:f,priorityQueue:g}=Sm(this.lines,o);if(f<=e)return No(l);Rm(g,a);let b=f;for(;b>e&&g.length>0;){let x=g.shift().originalIndex,L=l[x];if(L.markedForRemoval)continue;let B=r?xm(l,x):"",D=du(B,n,s,L);l[x]=D,b-=L.cost,b+=D.cost;let j=x+1;if(j<l.length){let k=l[j];Jr(k,n)&&(b-=k.cost,k.markedForRemoval=!0)}let $=x-1;if($>=0){let k=l[$];Jr(k,n)&&(b-=k.cost,k.markedForRemoval=!0)}}if(b>e)return No([du("",n,s)]);let T=l.filter(x=>!x.markedForRemoval);for(let x=T.length-1;x>0;x--)Jr(T[x],n)&&Jr(T[x-1],n)&&T.splice(x,1);return No(T)}};function Tm(t){return t?.text.match(/^\s*/)?.[0]??""}i(Tm,"getIndentation");function Jr(t,e){return t?.text.trim()===e.trim()}i(Jr,"isEllipsis");function No(t){return{getText:i(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:i(()=>t,"getLines")}}i(No,"produceElidedText");function Sm(t,e){let n=0,r=[];return{lines:t.map((s,a)=>{let l=s.copy();return e==="removeLeastBangForBuck"&&l.adjustValue(1/l.cost),n+=l.cost,r.push({originalIndex:a,value:l.value}),l}),totalCost:n,priorityQueue:r}}i(Sm,"initializeElisionContext");function Rm(t,e){t.sort((n,r)=>n.value!==r.value?n.value-r.value:e==="bottomToTop"?r.originalIndex-n.originalIndex:n.originalIndex-r.originalIndex)}i(Rm,"sortPriorityQueue");function xm(t,e){let n="";for(let r=e;r>=0;r--){let o=t[r];if(!o.markedForRemoval&&o.text.trim()!==""){n=Tm(o);break}}return n}i(xm,"getClosestIndentation");function du(t,e,n,r){let o=t+e;return new Hn(o,1/0,n.tokenLength(o+`
`),"loose",r?.metadata)}i(du,"getNewEllipsis");y();y();function ct(){}i(ct,"Diff");ct.prototype={diff:i(function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.callback;typeof o=="function"&&(s=o,o={});var a=this;function l(K){return K=a.postProcess(K,o),s?(setTimeout(function(){s(K)},0),!0):K}i(l,"done"),e=this.castInput(e,o),n=this.castInput(n,o),e=this.removeEmpty(this.tokenize(e,o)),n=this.removeEmpty(this.tokenize(n,o));var f=n.length,g=e.length,b=1,T=f+g;o.maxEditLength!=null&&(T=Math.min(T,o.maxEditLength));var x=(r=o.timeout)!==null&&r!==void 0?r:1/0,L=Date.now()+x,B=[{oldPos:-1,lastComponent:void 0}],D=this.extractCommon(B[0],n,e,0,o);if(B[0].oldPos+1>=g&&D+1>=f)return l(fu(a,B[0].lastComponent,n,e,a.useLongestToken));var j=-1/0,$=1/0;function k(){for(var K=Math.max(j,-b);K<=Math.min($,b);K+=2){var Y=void 0,fe=B[K-1],oe=B[K+1];fe&&(B[K-1]=void 0);var ge=!1;if(oe){var Ae=oe.oldPos-K;ge=oe&&0<=Ae&&Ae<f}var Oe=fe&&fe.oldPos+1<g;if(!ge&&!Oe){B[K]=void 0;continue}if(!Oe||ge&&fe.oldPos<oe.oldPos?Y=a.addToPath(oe,!0,!1,0,o):Y=a.addToPath(fe,!1,!0,1,o),D=a.extractCommon(Y,n,e,K,o),Y.oldPos+1>=g&&D+1>=f)return l(fu(a,Y.lastComponent,n,e,a.useLongestToken));B[K]=Y,Y.oldPos+1>=g&&($=Math.min($,K-1)),D+1>=f&&(j=Math.max(j,K+1))}b++}if(i(k,"execEditLength"),s)i(function K(){setTimeout(function(){if(b>T||Date.now()>L)return s();k()||K()},0)},"exec")();else for(;b<=T&&Date.now()<=L;){var G=k();if(G)return G}},"diff"),addToPath:i(function(e,n,r,o,s){var a=e.lastComponent;return a&&!s.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:i(function(e,n,r,o,s){for(var a=n.length,l=r.length,f=e.oldPos,g=f-o,b=0;g+1<a&&f+1<l&&this.equals(r[f+1],n[g+1],s);)g++,f++,b++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return b&&!s.oneChangePerToken&&(e.lastComponent={count:b,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=f,g},"extractCommon"),equals:i(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:i(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:i(function(e){return e},"castInput"),tokenize:i(function(e){return Array.from(e)},"tokenize"),join:i(function(e){return e.join("")},"join"),postProcess:i(function(e){return e},"postProcess")};function fu(t,e,n,r,o){for(var s=[],a;e;)s.push(e),a=e.previousComponent,delete e.previousComponent,e=a;s.reverse();for(var l=0,f=s.length,g=0,b=0;l<f;l++){var T=s[l];if(T.removed)T.value=t.join(r.slice(b,b+T.count)),b+=T.count;else{if(!T.added&&o){var x=n.slice(g,g+T.count);x=x.map(function(L,B){var D=r[b+B];return D.length>L.length?D:L}),T.value=t.join(x)}else T.value=t.join(n.slice(g,g+T.count));g+=T.count,T.added||(b+=T.count)}}return s}i(fu,"buildValues");var Py=new ct;function mu(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}i(mu,"longestCommonPrefix");function gu(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}i(gu,"longestCommonSuffix");function Mo(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}i(Mo,"replacePrefix");function ko(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}i(ko,"replaceSuffix");function Vn(t,e){return Mo(t,e,"")}i(Vn,"removePrefix");function Xr(t,e){return ko(t,e,"")}i(Xr,"removeSuffix");function _u(t,e){return e.slice(0,Im(t,e))}i(_u,"maximumOverlap");function Im(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var o=Array(r),s=0;o[0]=0;for(var a=1;a<r;a++){for(e[a]==e[s]?o[a]=o[s]:o[a]=s;s>0&&e[a]!=e[s];)s=o[s];e[a]==e[s]&&s++}s=0;for(var l=n;l<t.length;l++){for(;s>0&&t[l]!=e[s];)s=o[s];t[l]==e[s]&&s++}return s}i(Im,"overlapCount");var Kr="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Nm=new RegExp("[".concat(Kr,"]+|\\s+|[^").concat(Kr,"]"),"ug"),Yr=new ct;Yr.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Yr.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(s){return s.segment})}else n=t.match(Nm)||[];var r=[],o=null;return n.forEach(function(s){/\s/.test(s)?o==null?r.push(s):r.push(r.pop()+s):/\s/.test(o)?r[r.length-1]==o?r.push(r.pop()+s):r.push(o+s):r.push(s),o=s}),r};Yr.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};Yr.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,o=null;return t.forEach(function(s){s.added?r=s:s.removed?o=s:((r||o)&&pu(n,o,r,s),n=s,r=null,o=null)}),(r||o)&&pu(n,o,r,null),t};function pu(t,e,n,r){if(e&&n){var o=e.value.match(/^\s*/)[0],s=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var f=mu(o,a);t.value=ko(t.value,a,f),e.value=Vn(e.value,f),n.value=Vn(n.value,f)}if(r){var g=gu(s,l);r.value=Mo(r.value,l,g),e.value=Xr(e.value,g),n.value=Xr(n.value,g)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var b=r.value.match(/^\s*/)[0],T=e.value.match(/^\s*/)[0],x=e.value.match(/\s*$/)[0],L=mu(b,T);e.value=Vn(e.value,L);var B=gu(Vn(b,L),x);e.value=Xr(e.value,B),r.value=Mo(r.value,b,B),t.value=ko(t.value,b,b.slice(0,b.length-B.length))}else if(r){var D=r.value.match(/^\s*/)[0],j=e.value.match(/\s*$/)[0],$=_u(j,D);e.value=Xr(e.value,$)}else if(t){var k=t.value.match(/\s*$/)[0],G=e.value.match(/^\s*/)[0],K=_u(k,G);e.value=Vn(e.value,K)}}i(pu,"dedupeWhitespaceInChangeObjects");var Mm=new ct;Mm.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(Kr,"]+|[^\\S\\n\\r]+|[^").concat(Kr,"]"),"ug");return t.match(e)||[]};var Do=new ct;Do.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var s=r[o];o%2&&!e.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n};Do.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),ct.prototype.equals.call(this,t,e,n)};var km=new ct;km.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Pm=new ct;Pm.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Po(t){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(t)}i(Po,"_typeof");var Gn=new ct;Gn.useLongestToken=!0;Gn.tokenize=Do.tokenize;Gn.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(s,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(Co(t,null,null,o),o,"  ")};Gn.equals=function(t,e,n){return ct.prototype.equals.call(Gn,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function Co(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),s=0;s<t.length;s+=1)a[s]=Co(t[s],e,n,r,o);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),Po(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],f;for(f in t)Object.prototype.hasOwnProperty.call(t,f)&&l.push(f);for(l.sort(),s=0;s<l.length;s+=1)f=l[s],a[f]=Co(t[f],e,n,r,f);e.pop(),n.pop()}else a=t;return a}i(Co,"canonicalize");var Lo=new ct;Lo.tokenize=function(t){return t.slice()};Lo.join=Lo.removeEmpty=function(t){return t};var hu=require("fs");async function yu(t,e,n,r,o){let s=new Map,a=0;for(let T of t){let x=T.node.fileName.toLowerCase(),L=s.get(x);L?L.symbols.push(T):s.set(x,{symbols:[T],topRank:a}),a++}if(s.delete(n.toLowerCase()),s.size===0)return[];let l=e,f=e/Math.min(4,s.size),g=[],b=Array.from(s.keys());b.sort((T,x)=>{let L=s.get(T).topRank,B=s.get(x).topRank;return L-B});for(let T of b){let x=s.get(T).symbols;if(x.length===0)continue;let L=x[0].node.fileName,B=x.reduce((D,j)=>D+j.node.extentRange.length,0);for(let D of x){if(l<=5)return g;St(o);let j=D.node.extentRange.length/B,$=Math.min(l,j*f),k=(await Lm([D])).elide($).getText();l-=r.tokenLength(k),g.push({uri:L,value:k})}}return g}i(yu,"symbolRangesToCodeSnippets");async function Lm(t){if(t.length===0)return new Xt([]);let e=t[0].node.fileName,n=[],r="";try{let o=vr(e);o&&(r=(await hu.promises.readFile(o)).toString())}catch{}for(let o of t)bu(o,r).forEach(s=>n.push(s));return new Xt(n)}i(Lm,"sameFileSymbolRangeToElidableText");function bu(t,e){let r=[],o=t.node,s=e.substring(Ao(e,o.commentRange.start),o.commentRange.end);r.push([Oo(s),1-3e-4]);let a=Ao(e,o.bodyRange.start),l=Ao(e,o.extentRange.start),f=o.bodyRange.length===0?e.substring(l,o.extentRange.end):e.substring(o.commentRange.length===0?l:o.commentRange.end,a);if(Vt(o.kind)&&(f="BEGIN "+f.trimStart()),r.push([Oo(f),1-1e-4]),t.children.length>0)for(let g of t.children)r.push(...bu(g,e));else{let g=1-(Vt(t.node.kind)?3e-4:4e-4),b=e.substring(a,o.bodyRange.end);r.push([Oo(b),g])}return Vt(o.kind)&&r.push(["END "+f.substring(6),1-1e-4]),r.filter(g=>g[0].length>0)}i(bu,"prepareForElidableText");function Ao(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}i(Ao,"shiftLeftToNearestLineEndingOrAlphanumeric");function Oo(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}i(Oo,"trimLineEndingsAndTrailingWhitespace");var Fo=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=n}static{i(this,"ContextRetrievalStrategy")}},Lt=class extends Fo{static{i(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,o){super(e,n),this.caseSensitive=r,this.typesOnly=o}async getContextAtPositionAsync(e,n,r,o,s,a){let l=this.referenceExtractors.get(o);if(!l)return[];St(a);let f=await l.extractReferences(e,n);St(a);let g=Array.from(f);g.sort((L,B)=>this.compareSymbolRangesByProximityToCaret(L,B,r));let b=[],T=new Set,x=await this.findDefinitionsViaUnqualifiedNames(g,s,a);this.typesOnly&&(x=x.filter(L=>Vt(L.kind)));for(let L of x)T.has(JSON.stringify(L))||(T.add(JSON.stringify(L)),b.push(await this.makeSymbolRangeNodeFromDefinition(L,a)));return b}async findDefinitionsViaUnqualifiedNames(e,n,r){let o=Array.from(new Set(e.map(T=>T.unqualifiedName))),s=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(o,s,r),l=i(T=>s?T.toLowerCase():T,"lowercaseIfCaseInsensitive"),f=i(T=>l(T.unqualifiedName),"getSymbolKey"),g=new Map;for(let T of a){let x=f(T),L=g.get(x)??[];g.set(x,[...L,T])}let b=[];for(let T of o){let x=g.get(l(T));if(!(!x||x.length>n.mlcpMaxSymbolMatches)){if(b.length+x.length>n.mlcpMaxContextItems){b.push(...x.slice(0,n.mlcpMaxContextItems-b.length));break}b.push(...x)}}return b}async makeSymbolRangeNodeFromDefinition(e,n){if(St(n),Vt(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),o=await Promise.all(r.map(s=>this.makeSymbolRangeNodeFromDefinition(s,n)));return{node:e,children:o}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let o=e.extentRange.end<=r,s=n.extentRange.end<=r;if(o&&!s)return-1;if(!o&&s)return 1;let a=Math.abs(e.extentRange.start-r),l=Math.abs(n.extentRange.start-r);return a-l}},ei=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new Lt(e,n,!0,!0)),this.strategies.set("java",new Lt(e,n,!0,!0)),this.strategies.set("python",new Lt(e,n,!0,!1)),this.strategies.set("typescript",new Lt(e,n,!0,!0)),this.strategies.set("typescriptreact",new Lt(e,n,!0,!0)),this.strategies.set("javascript",new Lt(e,n,!0,!1))}static{i(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,o,s,a,l){let f=await this.getContextAtPositionAsync(e,n,r,o,s,l);St(l);let g=nt();return yu(f,a,e,g,l)}async getContextAtPositionAsync(e,n,r,o,s,a){return this.strategies.has(o)?this.strategies.get(o).getContextAtPositionAsync(e,n,r,o,s,a):[]}};y();y();y();y();var Kt={Id:"id"},Ke={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},ie={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};y();y();var ti=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new qo(Kt.Id)}static{i(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},Zn=class t extends ti{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${Ke.FilePath}');`]);this.fields=[new Xn(Ke.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Ve(Ke.LastWriteTimeUtc,{notNull:!0})]}static{i(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},Qn=class t extends ti{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${ie.DocumentId}', '${ie.ExtentStart}', '${ie.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${ie.UnqualifiedName}');`],`FOREIGN KEY(${ie.DocumentId}) REFERENCES Document(${Kt.Id}) ON DELETE CASCADE`);this.fields=[new Ve(ie.DocumentId),new Xn(ie.FullyQualifiedName,{notNull:!0}),new Xn(ie.UnqualifiedName,{notNull:!0}),new Ve(ie.CommentStart,{notNull:!0}),new Ve(ie.CommentLength,{notNull:!0}),new Ve(ie.NameStart,{notNull:!0}),new Ve(ie.NameLength,{notNull:!0}),new Ve(ie.BodyStart,{notNull:!0}),new Ve(ie.BodyLength,{notNull:!0}),new Ve(ie.ExtentStart,{notNull:!0}),new Ve(ie.ExtentLength,{notNull:!0}),new Ve(ie.SymbolKind,{notNull:!0}),new Ve(ie.RefKind,{notNull:!0})]}static{i(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},Jn=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{i(this,"SQLField")}},Xn=class extends Jn{static{i(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,o=this.unique?"UNIQUE":void 0,s=[e,n,r,o].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${s}`}},Ve=class extends Jn{static{i(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},qo=class extends Jn{static{i(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var ni=class{static{i(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=i(o=>new Promise((s,a)=>{e.run(o,l=>{l?a(l):s()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let o of r)await n(o)}async insert(e,n){let r=await this.init;r&&await new Promise((o,s)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?s(l):o(this)})})}async getAllRows(){let e=await this.init;return e?rt(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return rt(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${Kt.Id} = ?`,[e])}},Rt=class t extends ni{static{i(this,"DocumentTable")}static{this.tableName=Zn.tableName}createQueryGenerator(){return new Zn}async updateTimestamp(e,n){let r=await this.init;r&&await rt(r,`UPDATE ${t.tableName} SET ${Ke.LastWriteTimeUtc} = ? WHERE ${Ke.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await rt(n,`DELETE FROM ${t.tableName} WHERE ${Ke.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?rt(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Ke.FilePath} = ?`,[e]):[]}},Pe=class t extends ni{static{i(this,"SymbolTable")}static{this.tableName=Qn.tableName}createQueryGenerator(){return new Qn}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return rt(n,`DELETE FROM ${t.tableName} WHERE ${ie.DocumentId} = ?`,[e])}};async function rt(t,e,n){return new Promise((r,o)=>t.all(e,n,(s,a)=>{s&&o(s),r(a)}))}i(rt,"runPromisifiedDBQuery");var oi=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Rt.tableName} ON ${Pe.tableName}.${ie.DocumentId} = ${Rt.tableName}.${Kt.Id}`;this.db=this.initDb(e),this.documentTable=new Rt(this.db),this.symbolTable=new Pe(this.db)}static{i(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>kt(Cu()))}catch(o){console.error("Error loading sqlite3 module:",o);return}let r;try{r=await new Promise((o,s)=>{let a=new n.default.Database(e,l=>{l?s(l):o(a)})})}catch(o){console.error("Error initializing database:",o);return}return await rt(r,"pragma journal_mode=wal",[]),await rt(r,"pragma synchronous=normal",[]),await rt(r,"pragma optimize=0x10002",[]),await rt(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(o=>o?r(o):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${ie.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${ie.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),o=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${ie.UnqualifiedName} ${o}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${ie.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${Rt.tableName}.${Ke.FilePath} = ? AND ${Pe.tableName}.${ie.ExtentStart} <= ? AND (${Pe.tableName}.${ie.ExtentStart} + ${Pe.tableName}.${ie.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${Rt.tableName}.${Ke.FilePath} = ? AND ${Pe.tableName}.${ie.ExtentStart} >= ? AND (${Pe.tableName}.${ie.ExtentStart} + ${Pe.tableName}.${ie.ExtentLength}) <= ?`,`ORDER BY ${Pe.tableName}.${ie.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${Pe.tableName}`,this.innerJoinStatement,`WHERE ${Rt.tableName}.${Ke.FilePath} = ? AND ${Pe.tableName}.${ie.FullyQualifiedName} LIKE ?`,`ORDER BY ${Pe.tableName}.${ie.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,rt(r,e,n)):[]}};var si=class{static{i(this,"SQLStorageReaderWriter")}constructor(e){this.database=new oi(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let o=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(o.id),r.length>0&&await this.database.insertSymbols(r.map(s=>({documentId:o.id,fullyQualifiedName:s.fullyQualifiedName,unqualifiedName:s.unqualifiedName,commentStart:s.commentRange.start,commentLength:s.commentRange.length,nameStart:s.nameRange.start,nameLength:s.nameRange.length,bodyStart:s.bodyRange.start,bodyLength:s.bodyRange.length,extentStart:s.extentRange.start,extentLength:s.extentRange.length,symbolKind:s.kind,refKind:s.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return hn(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let o=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let f=await this.database.querySymbolsUsingUnqualifiedNames(l,n);o.push(...f),St(r)}return hn(o)}async getDefinitionsAsync(e){return hn(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return hn(r)}async findSymbolsContainedByRangeAsync(e,n,r){return hn(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return hn(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let o=await this.database.getDocument(e);if(!o)throw Error("Unable to insert document");return o[0]}};function hn(t){return t.map(e=>new tt(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new he(e.commentStart,e.commentLength),new he(e.nameStart,e.nameLength),new he(e.bodyStart,e.bodyLength),new he(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}i(hn,"symbolsToSymbolRanges");var ui=kt(require("fs/promises"));var ai=class{static{i(this,"Index")}constructor(e,n,r,o){this.storage=new si(e),this.symbolExtractors=n,this.importExtractors=r,this.params=o}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=vr(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let o;try{o=await ui.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let s=o.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=s)return;let l=this.symbolExtractors.get(n);if(!l)return;let f=(await ui.readFile(r)).toString(),g=await l.extractSymbols(e,f),b=g;if(this.params?.mlcpEnableImports){let T=this.importExtractors.get(n);if(T){let x=await T.extractSymbols(e,f);b=[...g,...x]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,s,b)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};y();function zo(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>Um(n))}i(zo,"isIndexWorkerData");var $o=class{static{i(this,"IndexNotification")}constructor(e){this.operation=e}};var xt={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"};var dt=class extends $o{constructor(n,r,o){super(xt.Response);this.id=n;this.error=r;this.data=o;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{i(this,"ResponseMessage")}};function Um(t){return"databaseFilePath"in t&&"rootPath"in t}i(Um,"isIndexableWorkspaceFolder");var cf=kt(lf()),$t=require("worker_threads");var Qi=class{static{i(this,"IndexInfo")}constructor(e,n){this.index=new ai(e,Ua,Wa,n),this.contextRetreival=new ei(this.index.reader,ja)}},Ji=class t{constructor(e,n,r){this.indices=new Map;this.cancellationTokens=new Map;this.params=r;for(let o of n){let s=Pt(o.rootPath);this.indices.set(s,new Qi(o.databaseFilePath,r))}this.port=e,this.port.on("message",o=>void this.dispatchMessage(o,this.indices,this.cancellationTokens))}static{i(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let o=new cf.CancellationTokenSource;r.set(e.id,o);let s;switch(e.operation){case xt.AddOrInvalidated:s=await t.dispatchAddOrInvalidate(e,n,o.token);break;case xt.GetContext:s=await t.dispatchGetContext(e,n,o.token);break;case xt.Cancel:r.get(e.id)?.cancel(),s=new dt(e.id,void 0,void 0);break;case xt.Exit:s=await this.dispatchExit(e,n,o.token);break;case xt.CreateIndex:s=await t.dispatchCreateIndex(e,n,o.token);break;case xt.RemoveIndex:s=await t.dispatchRemoveIndex(e,n,o.token);break;case xt.GetAllDocumentsInWorkspace:s=await t.GetAllDocumentsInWorkspaceRequest(e,n,o.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}s&&this.port?.postMessage(s),r.get(e.id)?.dispose(),r.delete(e.id)}catch(o){if(!(o instanceof Error))throw o;this.port?.postMessage(new dt(e.id,o,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let o=Pt(e.baseWorkspaceFolderUri),s,a;return n.has(o)?a=await n.get(o).index.getDocumentFilePaths():s=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new dt(e.id,s,a)}static async dispatchAddOrInvalidate(e,n,r){let o=Pt(e.fileUri),s=t.getIndexInfo(o,n)?.index,a;return s?await s.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new dt(e.id,a,void 0)}static async dispatchGetContext(e,n,r){let o=Pt(e.fileUri),s=t.getIndexInfo(o,n)?.contextRetreival,a,l;return s?l=await s.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new dt(e.id,a,l)}async dispatchExit(e,n,r){for(let o of n.values())await o.index.dispose();n.clear(),this.port?.postMessage(new dt(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,n,r){let o=Pt(e.baseWorkspaceFolderUri);return n.has(o)||n.set(o,new Qi(e.databaseFilePath)),new dt(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let o=Pt(e.baseWorkspaceFolderUri);if(n.has(o)){let s=n.get(o);s&&await s.index.dispose(),n.delete(o)}return new dt(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,o]of n)if(e.startsWith(r))return o}};function zg(){return zo($t.workerData)}i(zg,"isIndexWorker");function Hg(){let t=$t.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!zo($t.workerData))throw new Error("Worker data must provide a valid database path.");let e=$t.workerData.cwd;process.cwd=()=>e,new Ji(t,$t.workerData.indexWorkspaceRoots,$t.workerData.params)}i(Hg,"runIndexWorker");0&&(module.exports={IndexWorker,isIndexWorker,runIndexWorker});
//# sourceMappingURL=indexWorker.js.map
